(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6907],{9176:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});let a=(0,r(77805).F3)("Browser",{web:()=>r.e(1234).then(r.bind(r,81234)).then(e=>new e.BrowserWeb)})},31069:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},31440:(e,t,r)=>{Promise.resolve().then(r.bind(r,34330))},32391:(e,t,r)=>{"use strict";r.d(t,{default:()=>b});var a=r(95155);r(12115);var s=r(98500),l=r.n(s);r(28393);var i=r(73321),d=r(66614),o=r(98401),n=r(34530),c=r(96035),x=r(42869);function h(){let e=(0,i.usePathname)(),t=[{label:"Home",icon:d.A,href:"/dashboard",isActive:e=>"/dashboard"===e},{label:"Courses",icon:o.A,href:"/courses",isActive:e=>e.startsWith("/courses")},{label:"Explore",icon:n.A,href:"/explore",isActive:e=>e.startsWith("/explore")},{label:"AI Chat",icon:c.A,href:"/chat",isActive:e=>e.startsWith("/chat")},{label:"Account",icon:x.A,href:"/profile",isActive:e=>e.startsWith("/profile")}];return(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg border-t border-gray-200 dark:border-gray-800 pb-safe-bottom z-50",children:(0,a.jsx)("div",{className:"flex justify-around items-center h-14",children:t.map(t=>{let r=t.isActive(e);return(0,a.jsxs)(l(),{href:t.href,className:`flex flex-col items-center justify-center w-full h-full space-y-1 ${r?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[(0,a.jsx)(t.icon,{size:24,className:`transition-transform duration-200 ${r?"scale-110":""}`,strokeWidth:r?2.5:2}),(0,a.jsx)("span",{className:"text-[10px] font-medium",children:t.label})]},t.label)})})})}var u=r(71552),m=r(72773);function b({children:e,activeContent:t,setActiveContent:r,hideBottomNav:s=!1}){return(0,a.jsx)(m.default,{children:(0,a.jsx)(u.ThemeProvider,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col pt-safe-top",children:[(0,a.jsx)("main",{className:`flex-1 ${s?"":"pb-20 pb-safe-bottom"} overflow-x-hidden`,children:(0,a.jsx)("div",{className:"h-full",children:e})}),!s&&(0,a.jsx)(h,{})]})})})}},33210:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},34330:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(95155),s=r(12115),l=r(32391),i=r(47936),d=r(86901),o=r(53961),n=r(31069),c=r(94514),x=r(33210),h=r(79372);let u=(0,r(78340).A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var m=r(9176);r(77805);var b=r(66609),g=r(28393),y=r(5669);function p(){let{user:e,loading:t}=(0,g.h)(),[r,l]=(0,s.useState)("premium"),[p,f]=(0,s.useState)("card"),[k,j]=(0,s.useState)(!1),[v,w]=(0,s.useState)({used:0,limit:5,percentage:0,isPremium:!1,remaining:5}),[N,A]=(0,s.useState)([]),[P,M]=(0,s.useState)(!0),[$,C]=(0,s.useState)(!1),[z,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{let t=async()=>{try{let e=await (0,y.Ud)("/api/user/usage");if(e.ok){let t=await e.json();w(t)}}catch(e){console.error("Failed to fetch usage:",e)}},r=async()=>{try{let e=await (0,y.Ud)("/api/plans");if(e.ok){let t=await e.json();A(t.plans||[])}}catch(e){console.error("Failed to fetch plans:",e),b.toast.error("Failed to load plans")}finally{M(!1)}};e&&t(),r()},[e]);let U=e?.subscription?.plan==="enterprise"&&e?.subscription?.status==="active"?"enterprise":e?.subscription?.plan==="pro"&&e?.subscription?.status==="active"||e?.isPremium?"premium":"basic",L=async e=>{j(!0);try{let t=await (0,y.Ud)("/api/billing/create-session",{method:"POST",body:JSON.stringify({plan:"premium"===e?"pro":e,paymentMethod:p})});if(!t.ok){let e={};try{e=await t.json()}catch(e){console.error("Failed to parse error response:",e)}401===t.status&&(b.toast.error("Please log in to upgrade."),setTimeout(()=>{window.location.href="/auth/login"},800));let r=e.message||e.details||e.error;throw Error(r||"Failed to create checkout session")}let r=await t.json();if(r.sessionUrl)window.Capacitor||"capacitor:"===window.location.protocol?await m.P.open({url:r.sessionUrl}):window.location.href=r.sessionUrl;else throw Error("No payment URL received")}catch(e){b.toast.error(e.message||"Failed to start upgrade process. Please try again.")}finally{j(!1)}};return P?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)(i.P.div,{className:"text-center mb-12",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",children:"Upgrade Your Learning Experience"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Choose the perfect plan for your learning journey (or your organization)."})]}),(0,a.jsxs)(i.P.div,{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 uppercase",children:["Current Plan: ",U]}),(0,a.jsxs)("p",{className:"text-blue-700 dark:text-blue-300",children:["You're using ",v.used," out of ",-1===v.limit?"Unlimited":v.limit," monthly course generations"]})]}),-1!==v.limit&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[v.percentage,"%"]}),(0,a.jsx)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Usage this month"})]})]}),-1!==v.limit&&(0,a.jsx)("div",{className:"mt-4 w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${v.percentage}%`}})})]}),(0,a.jsx)(i.P.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:N.map(e=>{let t=(e=>{switch(e){case"basic":default:return d.A;case"premium":return o.A;case"enterprise":return n.A}})(e.id),r=e.id===U,s=e.popular,l={free:0,basic:1,premium:2,pro:2,enterprise:3},x=l[U]||0,h=(l[e.id]||0)<x;return(0,a.jsxs)(i.P.div,{className:`relative bg-white dark:bg-gray-800 rounded-2xl shadow-lg border-2 transition-all duration-300 hover:shadow-xl ${s?"border-blue-500 scale-105 z-10":r?"border-green-500":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,whileHover:{y:-5},children:[s&&(0,a.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 w-full text-center",children:(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-1 rounded-full text-sm font-medium shadow-sm",children:"Most Popular"})}),r&&(0,a.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 w-full text-center",children:(0,a.jsx)("span",{className:"bg-green-600 text-white px-4 py-1 rounded-full text-sm font-medium shadow-sm",children:"Current Plan"})}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${s?"bg-gradient-to-r from-blue-600 to-purple-600":`bg-${e.color}-100 dark:bg-${e.color}-900`}`,children:(0,a.jsx)(t,{className:`w-6 h-6 ${s?"text-white":`text-${e.color}-600 dark:text-${e.color}-400`}`})}),(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.name})})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-baseline",children:[(0,a.jsxs)("span",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:["$",e.price]}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"/month"})]})}),(0,a.jsxs)("ul",{className:"space-y-3 mb-8",children:[e.features.slice(0,8).map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start space-x-3",children:[(0,a.jsx)(c.A,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-300 text-sm",children:e})]},t)),e.features.length>8&&(0,a.jsxs)("li",{className:"text-xs text-gray-500 italic",children:["+ ",e.features.length-8," more features"]})]}),(0,a.jsx)(i.P.button,{onClick:()=>{r||h||(S(e.id),C(!0))},disabled:r||h||k,whileHover:{scale:r||h?1:1.02},whileTap:{scale:r||h?1:.98},className:`w-full py-3 px-4 rounded-lg font-medium transition-all ${r||h?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed":s?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:r?"Current Plan":h?"Contact Support":k?"Processing...":`Upgrade to ${e.name}`})]})]},e.id)})})]}),$&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,a.jsxs)(i.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-md w-full p-8 border border-gray-100 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Choose Payment"}),(0,a.jsx)("button",{onClick:()=>C(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",disabled:k,children:(0,a.jsx)(x.A,{className:"w-6 h-6 text-gray-500"})})]}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:["Select your preferred way to pay for the ",(0,a.jsx)("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:z})," plan."]}),(0,a.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,a.jsxs)("button",{onClick:()=>f("card"),className:`w-full flex items-center space-x-4 p-5 border-2 rounded-2xl transition-all ${"card"===p?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)("div",{className:`p-3 rounded-xl ${"card"===p?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"}`,children:(0,a.jsx)(h.A,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:`font-bold ${"card"===p?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"}`,children:"Credit/Debit Card"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Visa, Mastercard, Amex"})]})]}),(0,a.jsxs)("button",{onClick:()=>f("mobile_money"),className:`w-full flex items-center space-x-4 p-5 border-2 rounded-2xl transition-all ${"mobile_money"===p?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)("div",{className:`p-3 rounded-xl ${"mobile_money"===p?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"}`,children:(0,a.jsx)(u,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:`font-bold ${"mobile_money"===p?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"}`,children:"Mobile Money"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"M-Pesa, MTN, Airtel"})]})]})]}),(0,a.jsx)(i.P.button,{onClick:()=>L(z),disabled:k,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold rounded-2xl shadow-lg hover:from-blue-700 hover:to-purple-700 transition-all flex items-center justify-center space-x-2",children:k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Redirecting..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Proceed to Payment"}),(0,a.jsx)(c.A,{className:"w-5 h-5"})]})})]})})]})}function f(){return(0,a.jsx)(l.default,{children:(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{className:"p-6",children:"Loading pricing..."}),children:(0,a.jsx)(p,{})})})}},34530:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},42869:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},53961:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},66614:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},79372:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},86901:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},94514:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},96035:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},98401:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])}},e=>{e.O(0,[6609,8500,24,7805,6788,8441,3794,7358],()=>e(e.s=31440)),_N_E=e.O()}]);