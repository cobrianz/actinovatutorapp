(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5295],{71535:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(95155),s=r(33210);function i({isOpen:e,onClose:t,onConfirm:r,title:i="Confirm Action",message:l="Are you sure you want to proceed?",confirmText:o="Confirm",cancelText:n="Cancel",confirmColor:d="red"}){return e?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,a.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full mx-4 p-6 z-10",children:[(0,a.jsx)("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,a.jsx)(s.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"pr-8",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:i}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:l})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:n}),(0,a.jsx)("button",{onClick:()=>{r(),t()},className:`px-4 py-2 text-white rounded-lg transition-colors ${"red"===d?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:o})]})]})]}):null}},89808:(e,t,r)=>{Promise.resolve().then(r.bind(r,99913))},99913:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q});var a=r(95155),s=r(12115),i=r(73321),l=r(32391),o=r(47936),n=r(14403),d=r(97810),c=r(94290),x=r(89123),m=r(86901),g=r(48368),u=r(44071),h=r(47149),p=r(13535),b=r(94928),y=r(45049),f=r(61878),j=r(21362),v=r(31069),w=r(38194),N=r(53961),k=r(6962),A=r(41641),C=r(98500),S=r.n(C);r(71535);var P=r(66609),E=r(5669),z=r(98126),$=r(28393);let F=[{name:"All",icon:"Grid",color:"gray"},{name:"Technology",topics:["Programming & Development","AI & Machine Learning","Game Development","Web Development","Mobile Apps","Cloud Computing","Cybersecurity","Blockchain"],icon:"code",color:"blue"},{name:"Design",topics:["UI/UX Design","Graphic Design","Design Systems","Figma","Adobe Creative","3D Modeling","Animation","Branding"],icon:"palette",color:"purple"},{name:"Business",topics:["Entrepreneurship","Marketing","Finance","Management","Strategy","Sales","Project Management","Leadership","E-commerce"],icon:"briefcase",color:"orange"},{name:"Data Science",topics:["Data Analysis","Machine Learning","Statistics","Python","R","SQL","Visualization","Big Data","AI Ethics"],icon:"chart",color:"green"},{name:"AI & ML",topics:["Neural Networks","Deep Learning","Computer Vision","NLP","Reinforcement Learning","AutoML","AI Ethics","Model Deployment"],icon:"brain",color:"indigo"},{name:"Creative",topics:["Photography","Videography","Music Production","Digital Art","Animation","Content Creation","Video Editing","Sound Design"],icon:"camera",color:"pink"},{name:"Humanities",topics:["Writing","Literature","History","Philosophy","Psychology","Sociology","Cultural Studies","Ethics","Critical Thinking"],icon:"book",color:"red"},{name:"Languages",topics:["Spanish","French","German","Japanese","Chinese","Portuguese","Italian","Korean","Arabic","Russian"],icon:"globe",color:"cyan"},{name:"Science",topics:["Physics","Chemistry","Biology","Astronomy","Geology","Environmental Science","Neuroscience","Engineering","Research Methods"],icon:"microscope",color:"teal"},{name:"Mathematics",topics:["Calculus","Statistics","Algebra","Geometry","Discrete Math","Linear Algebra","Probability","Number Theory"],icon:"calculator",color:"yellow"},{name:"Health",topics:["Nutrition","Fitness","Mental Health","Medicine","Nursing","Public Health","Yoga","Meditation"],icon:"heart",color:"rose"}];function T({setActiveContent:e,setHideNavs:t}){let r=(0,i.useRouter)();(0,s.useEffect)(()=>{if(t)return t(!0),()=>t(!1)},[t]);let[l,C]=(0,s.useState)("grid"),[T,D]=(0,s.useState)("all"),[U,I]=(0,s.useState)("All"),[L,M]=(0,s.useState)(""),[O,_]=(0,s.useState)([]),[J,R]=(0,s.useState)([]),[G,H]=(0,s.useState)([]),[V,B]=(0,s.useState)(!0),[q,Y]=(0,s.useState)(!0),[Z,Q]=(0,s.useState)(!0),[W,K]=(0,s.useState)(1),[X,ee]=(0,s.useState)({}),[et,er]=(0,s.useState)({}),[ea,es]=(0,s.useState)(new Set),[ei,el]=(0,s.useState)(null),{user:eo,loading:en,refreshToken:ed}=(0,$.h)(),ec=async(e=!0)=>{if(!eo)return void B(!1);try{B(!0);let t=new URLSearchParams({page:W.toString(),limit:"12",type:"course",search:L}),r=await (0,E.Ud)(`/api/library?${t}`);if(!r.ok){if(401===r.status&&e){if(console.log("Token expired, attempting to refresh..."),await ed())return ec(!1);P.toast.error("Session expired. Please log in again.")}else 401===r.status?P.toast.error("Session expired. Please log in again."):P.toast.error("Failed to load library");B(!1);return}let a=await r.json(),s=(a.items||[]).map(e=>({id:e.id,_id:e.id.split("_")[1]||e.id,title:e.title,topic:e.topic,difficulty:e.difficulty,progress:e.progress||0,totalLessons:e.totalLessons||e.totalCards||0,completedLessons:Math.round(e.progress/100*(e.totalLessons||e.totalCards||0)),isPinned:e.pinned||!1,pinned:e.pinned||!1,createdAt:e.createdAt,lastAccessed:e.lastAccessed||"Just now",description:e.description||`Learn ${e.topic||e.title}`,instructor:e.instructor||"AI Tutor",rating:e.rating||4.8,estimatedTime:e.estimatedTime||"2-4 hours",format:"questions"===e.type?"questions":"flashcards"===e.type?"flashcards":"course",courseData:{topic:e.topic,format:"questions"===e.type?"questions":"flashcards"===e.type?"flashcards":"course",difficulty:e.difficulty},isGenerated:!0}));_(s),ee(a.pagination||{}),er(a.stats||{})}catch(e){console.error("Error fetching library:",e),P.toast.error("Network error. Please try again.")}finally{B(!1)}},ex=async()=>{try{Y(!0);let e=!!(eo?.subscription?.plan==="pro"||eo?.isPremium),t=await (0,E.Ud)(e?"/api/premium-courses/personalized":"/api/premium-courses/trending",{method:e?"POST":"GET"});if(t.ok){let e=await t.json();R(e.courses||[])}}catch(e){console.error("Error fetching premium data:",e)}finally{Y(!1)}},em=async()=>{try{Q(!0);let e=await (0,E.Ud)("/api/premium-courses/trending",{headers:{"x-user-id":eo?._id||eo?.id||""}});if(e.ok){let t=await e.json();H(t.courses||[])}}catch(e){console.error("Error fetching explore data:",e)}finally{Q(!1)}};(0,s.useEffect)(()=>{!en&&eo?(ec(),ex(),em()):en||eo||(B(!1),Y(!1),Q(!1))},[W,L,T,eo,en]),(0,s.useEffect)(()=>{K(1)},[T]),(0,s.useEffect)(()=>{O.length>0&&es(new Set(O.filter(e=>e.isPinned).map(e=>e.id)))},[O]);let eg=async(e,t=!0)=>{let r=O.find(t=>t.id===e);if(!r)return;let a=!r.isPinned,s=et.pinned||0;if(a&&s>=3)return void P.toast.error("You can only pin up to 3 courses. Unpin one first.");_(t=>t.map(t=>t.id===e?{...t,isPinned:a,pinned:a}:t)),er(e=>({...e,pinned:a?s+1:s-1}));try{let r=await (0,E.Ud)("/api/library",{method:"POST",body:JSON.stringify({action:"pin",itemId:e})});if(401===r.status&&t&&await ed())return eg(e,!1);if(!r.ok)throw Error("Failed to update pin");P.toast.success(a?"Course pinned":"Course unpinned")}catch(t){_(t=>t.map(t=>t.id===e?{...t,isPinned:!a,pinned:!a}:t)),er(e=>({...e,pinned:s})),P.toast.error("Failed to update pin status")}},eu=async e=>{if(!ei){el(e.title),P.toast.loading(`Generating course: ${e.title}...`,{id:"generating"});try{let t,a=(e.difficulty||"beginner").toLowerCase();["beginner","intermediate","advanced"].includes(a)||(a="beginner"),eo?.subscription?.plan==="pro"||eo?.isPremium||(a="beginner");let s=await (0,E.Ud)("/api/generate-course",{method:"POST",body:JSON.stringify({topic:e.title,format:"course",difficulty:a})});if(!s.ok){let e=s.headers.get("content-type"),t={};if(e&&e.includes("application/json"))t=await s.json().catch(()=>({}));else{let e=await s.text();throw console.error("Non-JSON error response:",e),Error("Server returned an error. Please try again.")}throw Error(t.error||"Failed to generate course")}try{t=await s.json()}catch(t){let e=await s.text();throw console.error("Failed to parse JSON response:",e),Error("Invalid response from server. Please try again.")}if(P.toast.success(`Course "${e.title}" generated successfully!`,{id:"generating"}),t.courseId||t.success){let t=e.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");r.push(`/learn/content?topic=${encodeURIComponent(t)}&format=course&difficulty=${a}&originalTopic=${encodeURIComponent(e.title)}`)}}catch(e){console.error("Error generating course:",e),P.toast.error(e.message||"Failed to generate course",{id:"generating"})}finally{el(null)}}},eh=!!(eo?.subscription&&("pro"===eo.subscription.plan||"enterprise"===eo.subscription.plan)&&"active"===eo.subscription.status)||!!eo?.isPremium,ep=async e=>{if(!eh)return void P.toast.error("PDF downloads are a Pro feature. Please upgrade to download courses.");let t=P.toast.loading(`Preparing PDF for ${e.title}...`);try{let r=await (0,E.Ud)(`/api/library?id=${e.id}`);if(!r.ok)throw Error("Failed to fetch full course data");let a=await r.json();if(!a.item)throw Error("Course data not found");await (0,z.O5)(a.item,e.format),P.toast.success("Download started!",{id:t})}catch(e){console.error("Library download error:",e),P.toast.error("Failed to generate PDF. Please try again.",{id:t})}},eb=({name:e,...t})=>{let r={Grid:n.A,code:d.A,palette:c.A,briefcase:x.A,brain:m.A,microscope:g.A,chart:u.A,globe:m.A,calculator:g.A,heart:h.A,camera:m.A,book:p.A}[e]||n.A;return(0,a.jsx)(r,{...t})};return en?(0,a.jsx)("div",{className:"flex justify-center py-20",children:(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 rounded-full border-t-transparent"})}):eo?(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8 space-y-12 no-scrollbar",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 pb-4",children:[{label:"Courses",value:et.courses||0,icon:d.A,color:"blue",gradient:"from-blue-500/30 to-indigo-500/30",text:"text-blue-600 dark:text-blue-400"},{label:"Done",value:et.completedCourses||0,icon:b.A,color:"green",gradient:"from-emerald-500/30 to-teal-500/30",text:"text-emerald-600 dark:text-emerald-400"},{label:"Pinned",value:et.pinnedCourses||0,icon:y.A,color:"yellow",gradient:"from-orange-500/30 to-amber-500/30",text:"text-orange-600 dark:text-orange-400"},{label:"Progress",value:`${O.length>0?Math.round(O.reduce((e,t)=>e+(t.progress||0),0)/O.length):0}%`,icon:u.A,color:"purple",gradient:"from-purple-500/30 to-fuchsia-500/30",text:"text-purple-600 dark:text-purple-400"}].map((e,t)=>(0,a.jsxs)(o.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"relative bg-white/60 dark:bg-gray-800/60 p-2.5 rounded-xl border border-gray-100 dark:border-gray-700/50 overflow-hidden",children:[(0,a.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br ${e.gradient} opacity-80`}),(0,a.jsxs)("div",{className:"relative z-10 flex items-center gap-2",children:[(0,a.jsx)("div",{className:`p-1 ${e.text}`,children:(0,a.jsx)(e.icon,{size:12,className:"stroke-[2.5]"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-1.5 min-w-0",children:[(0,a.jsx)("div",{className:"text-xs font-black text-gray-900 dark:text-white leading-none truncate",children:e.value}),(0,a.jsx)("div",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-300 truncate",children:e.label})]})]})]},t))}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-black uppercase tracking-tight text-gray-900 dark:text-white",children:"Discovery Hub"}),(0,a.jsxs)("div",{className:"relative group min-w-[300px]",children:[(0,a.jsx)(f.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-indigo-600 transition-colors"}),(0,a.jsx)("input",{type:"text",value:L,onChange:e=>M(e.target.value),placeholder:"Search disciplines...",className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border-2 border-purple-100 dark:border-purple-900/30 rounded-2xl focus:ring-2 focus:ring-purple-500/20 outline-none transition-all placeholder:text-gray-400 placeholder:font-medium font-medium text-sm"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Categories"}),(0,a.jsxs)(S(),{href:"/explore",className:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest hover:underline flex items-center gap-1",children:["Explore ",(0,a.jsx)(j.A,{size:12})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide no-scrollbar scroll-smooth",children:[F.map(e=>(0,a.jsxs)("button",{onClick:()=>{var t;I(t=e.name),"All"===t?M(""):M(t)},className:`flex-shrink-0 flex items-center gap-2 px-5 py-3 rounded-2xl font-bold text-sm transition-all active:scale-95 ${U===e.name?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[(0,a.jsx)(eb,{name:e.icon,size:16}),(0,a.jsx)("span",{children:e.name})]},e.name)),(0,a.jsxs)(S(),{href:"/explore",className:"flex-shrink-0 flex items-center gap-2 px-5 py-3 rounded-2xl font-bold text-sm transition-all active:scale-95 bg-white dark:bg-gray-800 text-indigo-600 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[(0,a.jsx)(n.A,{size:16}),(0,a.jsx)("span",{children:"View More"})]})]})]}),J.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Premium Spotlight"}),(0,a.jsx)("button",{onClick:()=>e("staff-picks"),className:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest hover:underline",children:"View All"})]}),(0,a.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide no-scrollbar scroll-smooth",children:J.map((e,t)=>(0,a.jsxs)(o.P.div,{whileHover:{y:-4},className:"flex-shrink-0 w-[280px] bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl p-5 text-white shadow-xl shadow-indigo-500/10 relative overflow-hidden group cursor-pointer",onClick:()=>eu(e),children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 blur-2xl group-hover:scale-110 transition-transform"}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,a.jsx)(v.A,{size:18,className:"text-yellow-300"})}),e.badge&&(0,a.jsx)("span",{className:"px-3 py-1 bg-white/20 rounded-full text-xs font-bold text-white",children:e.badge})]}),(0,a.jsx)("h4",{className:"font-black text-lg leading-tight mb-2 line-clamp-2",children:e.title}),(0,a.jsx)("p",{className:"text-white/70 text-xs font-medium line-clamp-2 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"mt-auto flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex -space-x-2",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-white/20 border-2 border-indigo-600 flex items-center justify-center text-[8px] font-bold",children:e},e))}),(0,a.jsx)("span",{className:"text-xs font-bold text-white/80",children:"Join 1k+ students"})]})]})]},e.id||t))})]}),G.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Featured Discovery"}),(0,a.jsx)("button",{onClick:()=>e("explore"),className:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest hover:underline",children:"View All"})]}),(0,a.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide no-scrollbar scroll-smooth",children:G.map((e,t)=>(0,a.jsxs)(o.P.div,{whileHover:{y:-4},className:"flex-shrink-0 w-[260px] bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-100 dark:border-gray-700/50 shadow-sm relative overflow-hidden group cursor-pointer",onClick:()=>eu(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-gray-50 dark:bg-gray-700/50 flex items-center justify-center text-gray-400 group-hover:text-indigo-500 transition-colors",children:(0,a.jsx)(p.A,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-sm text-gray-900 dark:text-white line-clamp-1",children:e.title}),(0,a.jsx)("p",{className:"text-xs font-bold text-gray-400",children:e.level||"Modern"})]})]}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs line-clamp-2 mb-4 h-8",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-50 dark:border-gray-700 pt-3",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-indigo-600",children:"Discovery"}),(0,a.jsx)(j.A,{size:14,className:"text-gray-300 group-hover:text-indigo-500 group-hover:translate-x-1 transition-all"})]})]},t))})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Your Collection"}),(0,a.jsxs)("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1 opacity-0 pointer-events-none hidden",children:[(0,a.jsx)("button",{onClick:()=>C("grid"),className:`p-1.5 rounded-lg transition-all ${"grid"===l?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-400"}`,children:(0,a.jsx)(n.A,{size:14})}),(0,a.jsx)("button",{onClick:()=>C("list"),className:`p-1.5 rounded-lg transition-all ${"list"===l?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-400"}`,children:(0,a.jsx)(w.A,{size:14})})]})]}),V?(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 border rounded-xl p-6 animate-pulse h-40"},t))}):0===O.length?(0,a.jsxs)(o.P.div,{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/20 rounded-xl border border-dashed border-gray-200 dark:border-gray-700",initial:{opacity:0},animate:{opacity:1},children:[(0,a.jsx)(d.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:L?"No matches found":"Your space is empty"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:L?`Couldn't find anything for "${L}"`:"Start your journey by exploring new topics!"}),(0,a.jsx)("button",{onClick:()=>e("explore"),className:"px-6 py-3 bg-indigo-600 text-white rounded-2xl font-bold text-sm shadow-lg shadow-indigo-500/20 active:scale-95 transition-all",children:"Explore Discovery"})]}):(0,a.jsx)(o.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 pb-32 pb-safe-bottom",children:[...O].sort((e,t)=>!!ea.has(t.id)-!!ea.has(e.id)).map((e,t)=>(0,a.jsxs)(o.P.div,{layoutId:e.id,onClick:()=>{e.topic.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-"),r.push(`/learn/content?topic=${encodeURIComponent(e.topic)}&format=${e.format}&difficulty=${e.difficulty||"beginner"}&originalTopic=${encodeURIComponent(e.topic)}`)},className:"w-full rounded-xl p-6 relative overflow-hidden group cursor-pointer transition-transform hover:scale-[1.02] shadow-sm border border-black/5",style:{background:"linear-gradient(90deg, #853D61, #2D0A35)"},children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 blur-2xl"}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:"questions"===e.format?(0,a.jsx)(n.A,{size:24,className:"text-white"}):"flashcards"===e.format?(0,a.jsx)(N.A,{size:24,className:"text-white"}):(0,a.jsx)(p.A,{size:24,className:"text-white"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),ep(e)},className:"p-2.5 rounded-full bg-white/10 text-white hover:bg-white/20 transition-all",title:"Download PDF",children:(0,a.jsx)(k.A,{size:14})}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),eg(e.id)},className:`p-2.5 rounded-full transition-all ${e.isPinned?"bg-white text-indigo-600":"bg-white/10 text-white hover:bg-white/20"}`,title:e.isPinned?"Unpin":"Pin",children:(0,a.jsx)(y.A,{size:14,className:e.isPinned?"fill-current":""})})]})]}),(0,a.jsx)("h4",{className:"font-black text-xl leading-snug mb-4 line-clamp-2 text-white",children:e.title}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-bold text-white/90",children:[(0,a.jsxs)("span",{children:[e.progress,"% Completed"]}),(0,a.jsx)("span",{children:e.difficulty})]}),(0,a.jsx)("div",{className:"h-2 w-full bg-white/20 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-white rounded-full transition-all duration-700",style:{width:`${e.progress}%`}})}),(0,a.jsx)("button",{className:"w-full mt-2 py-4 text-white rounded-2xl font-black text-xs hover:translate-y-[-2px] transition-all active:scale-95 shadow-lg shadow-purple-500/20 border border-black/30",style:{background:"linear-gradient(90deg, #C621E5, #7D7CF9)"},children:"Continue Learning"})]})]})]},e.id))},T),X.totalPages>1&&(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-10",children:[(0,a.jsx)("button",{onClick:()=>K(W-1),disabled:1===W,className:"p-2 border border-gray-200 dark:border-gray-700 rounded-xl disabled:opacity-30 transition-opacity",children:(0,a.jsx)(A.A,{className:"w-5 h-5"})}),[...Array(X.totalPages)].map((e,t)=>(0,a.jsx)("button",{onClick:()=>K(t+1),className:`w-9 h-9 rounded-xl font-bold text-sm transition-all ${W===t+1?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"border border-gray-200 dark:border-gray-700 text-gray-500"}`,children:t+1},t+1)),(0,a.jsx)("button",{onClick:()=>K(W+1),disabled:W===X.totalPages,className:"p-2 border border-gray-200 dark:border-gray-700 rounded-xl disabled:opacity-30 transition-opacity",children:(0,a.jsx)(j.A,{className:"w-5 h-5"})})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)(d.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Please log in"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be signed in to view your library."}),(0,a.jsx)(S(),{href:"/auth/login",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Log In"})]})}var D=r(11951),U=r(84980),I=r(7810),L=r(9176);r(77805);var M=r(75238),O=r(99799);function _(){let e=(0,i.useRouter)(),{user:t,authLoading:r}=(0,O.w)();if(r)return(0,a.jsx)(M.A,{});if(!t)return null;let[l,n]=(0,s.useState)([]),[d,x]=(0,s.useState)([]),[g,h]=(0,s.useState)(null),[p,b]=(0,s.useState)(!0),[y,w]=(0,s.useState)(1),[k,C]=(0,s.useState)(""),[S,z]=(0,s.useState)(null),[$,F]=(0,s.useState)([]),[T,_]=(0,s.useState)(!1),[J,R]=(0,s.useState)(null),G=t&&(t.subscription&&("pro"===t.subscription.plan||"enterprise"===t.subscription.plan)&&"active"===t.subscription.status||t.isPremium);(0,s.useEffect)(()=>{G?B():H(),V()},[G]),(0,s.useEffect)(()=>{g||p||($.length>0?h($.find(e=>e.featured)||$[0]):l.length>0?h(l.find(e=>e.featured)||l[0]):d.length>0&&h(d[0]))},[g,p,$,l,d]);let H=async()=>{try{let e=await (0,E.Ud)("/api/premium-courses");if(e.ok){let t=await e.json();n(t.courses);let r=t.courses.find(e=>e.featured);r&&h(r)}}catch(e){console.error("Error fetching premium courses:",e)}finally{b(!1)}},V=async()=>{try{let e=await (0,E.Ud)("/api/premium-courses/trending",{headers:{"x-user-id":t?._id||t?.id||""}});if(e.ok){let t=await e.json();x(t.courses||[]),t.courses&&t.courses.length>0&&!g&&h(t.courses[0])}else 403===e.status&&(x([]),g||h(null))}catch(e){console.error("Error fetching trending courses:",e),x([]),g||h(null)}},B=async()=>{try{_(!0);let e=localStorage.getItem("personalizedPremiumCourses");if(e){let t=JSON.parse(e);if(t.generatedAt&&new Date-new Date(t.generatedAt)<864e5){F(t.courses),b(!1),_(!1);return}}let t=await (0,E.Ud)("/api/premium-courses/personalized",{method:"POST",headers:{"Content-Type":"application/json"}});if(t.ok){let e=await t.json();e.localStorage&&localStorage.setItem("personalizedPremiumCourses",JSON.stringify(e.localStorage)),F(e.courses);let r=e.courses.find(e=>e.featured);r&&!g&&h(r),P.toast.success("Your personalized premium courses are ready!")}else throw Error("Failed to generate personalized courses")}catch(e){console.error("Error fetching personalized courses:",e),P.toast.error("Failed to load personalized courses. Using default courses."),H()}finally{b(!1),_(!1)}},q=async t=>{if(t.personalized||$.some(e=>e.id===t.id)){R(t.id),setTimeout(()=>{let r=t.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");e.push(`/learn/content?topic=${encodeURIComponent(r)}&format=course&difficulty=${t.difficulty||"intermediate"}&personalized=true&originalTopic=${encodeURIComponent(t.title)}`)},1500);return}if(!S){z(t.id),P.toast.loading(`Generating course: ${t.title}...`,{id:"generating"});try{let r=await (0,E.Ud)("/api/generate-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:t.title,format:"course",difficulty:t.difficulty||"beginner"})});if(!r.ok){let e={};try{let t=await r.text();try{e=JSON.parse(t)}catch(t){e={error:"Invalid server response"}}}catch(t){e={error:"Failed to read response"}}if(429===r.status){P.toast.dismiss("generating"),P.toast.error(`Monthly limit reached (${e.used||0}/${e.limit||2}). Please try again next month.`,{id:"generating"});return}throw Error(e.error||"Failed to generate course")}try{await (0,E.Ud)("/api/profile/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({generatedPremiumCourse:{courseId:t.id,courseTitle:t.title,generatedAt:new Date().toISOString()}})})}catch(e){console.error("Error tracking generated course:",e)}let a={};try{let e=await r.text();try{a=JSON.parse(e)}catch(t){throw console.error("Failed to parse success JSON:",e.substring(0,100)),Error("Server returned invalid success response format.")}}catch(e){throw Error("Failed to read success response.")}if(P.toast.success(`Course "${t.title}" generated successfully!`,{id:"generating"}),a.courseId){let r=t.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");e.push(`/learn/content?topic=${encodeURIComponent(r)}&format=course&difficulty=${t.difficulty||"beginner"}&originalTopic=${encodeURIComponent(t.title)}`)}}catch(e){console.error("Error generating course:",e),P.toast.error(e.message||"Failed to generate course",{id:"generating"})}finally{z(null)}}},Y=async e=>{try{let t=await (0,E.Ud)("/api/billing/create-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:e})});if(!t.ok){let e={};try{let r=await t.text();try{e=JSON.parse(r)}catch(t){e={error:"Invalid server response"}}}catch(t){e={error:"Failed to read response"}}401===t.status&&(P.toast.error("Please log in to upgrade."),setTimeout(()=>{window.location.href="/auth/login"},800));let r=e.message||e.details||e.error;throw Error(r||"Failed to create checkout session")}let r=await t.json();if(r.sessionUrl)window.Capacitor||"capacitor:"===window.location.protocol?await L.P.open({url:r.sessionUrl}):window.location.href=r.sessionUrl;else throw Error("No payment URL received")}catch(e){P.toast.error(e.message||"Failed to start upgrade process. Please try again.")}},Z=async t=>{R(t.id),setTimeout(()=>{let r=t.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");e.push(`/learn/content?topic=${encodeURIComponent(r)}&format=course&difficulty=${t.difficulty||"intermediate"}&originalTopic=${encodeURIComponent(t.title)}`)},1500)},Q=(G&&$.length>0?$:l).filter(e=>e.title.toLowerCase().includes(k.toLowerCase())||e.description.toLowerCase().includes(k.toLowerCase())),W=Math.ceil(Q.length/6),K=(y-1)*6,X=Q.slice(K,K+6),ee={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,a.jsxs)(o.P.div,{className:"mb-12",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsxs)("div",{className:"flex items-start justify-start space-x-2 mb-4",children:[(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:(0,a.jsx)(v.A,{className:"w-5 h-5 text-white"})})}),"          ",(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Premium Courses"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"High-quality courses with advanced features, expert instruction, and comprehensive learning materials."})]}),G&&(0,a.jsx)(o.P.div,{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(f.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),placeholder:"Search premium courses...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),!G&&(0,a.jsxs)(o.P.div,{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl p-8 mb-12 text-white text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,a.jsx)(v.A,{className:"w-12 h-12 mx-auto mb-4 text-yellow-300"}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Unlock Premium Trending Courses"}),(0,a.jsx)("p",{className:"text-orange-100 mb-6 max-w-2xl mx-auto",children:"Get access to the latest trending courses generated by AI, personalized to your interests. Upgrade to Pro to discover cutting-edge topics and stay ahead in your learning journey."}),(0,a.jsx)("button",{onClick:()=>Y("pro"),className:"bg-white text-orange-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors cursor-pointer",children:"Upgrade to Pro"})]}),G&&d.length>0&&(0,a.jsxs)(o.P.div,{className:"mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.A,{className:"w-6 h-6 text-orange-500"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Latest Trending"})]})}),(0,a.jsx)("div",{className:"flex overflow-x-auto pb-6 -mx-6 px-6 space-x-6 scrollbar-hide snap-x",children:d.map((e,t)=>(0,a.jsxs)(o.P.div,{whileHover:{y:-5},className:"flex-shrink-0 w-[280px] snap-start bg-white dark:bg-slate-800/50 backdrop-blur-sm border border-gray-200 dark:border-slate-700/50 rounded-2xl overflow-hidden hover:border-gray-300 dark:hover:border-slate-600/70 transition-all duration-300 shadow-sm",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-full h-32 bg-gradient-to-br from-orange-400 to-red-500"}),(0,a.jsxs)("div",{className:"absolute top-3 right-3 bg-white/20 backdrop-blur-md text-white px-2 py-1 rounded-full text-[10px] font-bold flex items-center space-x-1",children:[(0,a.jsx)(u.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Trending"})]})]}),(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsx)("h3",{className:"text-md font-bold text-gray-900 dark:text-gray-100 mb-1 line-clamp-1",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-4 line-clamp-2 min-h-[32px]",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-[10px] text-gray-500 dark:text-gray-400 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(U.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:e.estimatedDuration||"6 weeks"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(N.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:e.category||"General"})]})]}),(0,a.jsx)("button",{onClick:()=>q(e),disabled:S===e.id||J===e.id,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 text-white py-2.5 px-4 rounded-xl hover:from-orange-600 hover:to-red-700 transition-colors text-xs font-bold disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center space-x-2 shadow-sm",children:S===e.id?(0,a.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Generate"})]})})]})]},e.id||t))})]}),G&&g&&(0,a.jsxs)(o.P.div,{className:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 rounded-3xl p-8 mb-12 text-white shadow-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[(0,a.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white rounded-full -translate-y-48 translate-x-48"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-blue-400 rounded-full translate-y-32 -translate-x-32"})]}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-xl",children:(0,a.jsx)(v.A,{className:"w-6 h-6 text-blue-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent font-bold text-sm uppercase tracking-wider",children:"Featured Course"}),(0,a.jsx)("p",{className:"text-slate-300 text-sm",children:G?"Premium Exclusive":"Upgrade to Access"})]})]}),(0,a.jsx)("div",{className:"hidden md:flex items-center space-x-2",children:(0,a.jsx)("span",{className:"text-slate-300 text-sm",children:"10k+ enrolled"})})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-3 leading-tight",children:g.title}),(0,a.jsx)("p",{className:"text-slate-300 mb-4 text-base leading-relaxed",children:g.description}),(0,a.jsx)("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 mb-4",children:(0,a.jsx)("p",{className:"text-blue-300 text-xs leading-relaxed",children:"This course is personalized based on your goals and interests. New courses will appear after 1 month."})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-slate-300",children:[(0,a.jsx)(U.A,{className:"w-4 h-4 text-blue-400"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:g.duration})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2 text-slate-300",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(c.A,{className:"w-3 h-3 text-blue-400 fill-blue-400"},t)),(0,a.jsx)("span",{className:"ml-1 font-medium text-sm",children:g.rating})]})})]}),!G&&(0,a.jsxs)("div",{className:"flex items-baseline space-x-2 mb-4",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-white",children:g.price}),g.originalPrice&&(0,a.jsx)("span",{className:"text-lg text-slate-400 line-through",children:g.originalPrice})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("div",{className:"w-fit rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(v.A,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-200 italic text-sm leading-relaxed",children:g.premiumNote||g.staffNote}),(0,a.jsx)("p",{className:"text-slate-400 text-xs mt-1",children:"- Premium Team"})]})]})})}),(0,a.jsx)("div",{className:"flex justify-end",children:G?(0,a.jsx)("button",{onClick:()=>Z(g),disabled:J===g.id,className:"px-6 py-3 bg-white text-slate-900 font-normal rounded-lg hover:bg-slate-100 transition-all duration-200 transform hover:-translate-y-0.5 text-base disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center space-x-2",children:J===g.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-900"}),(0,a.jsx)("span",{children:"Preparing your course..."})]}):(0,a.jsx)("span",{children:"Start Learning"})}):(0,a.jsx)("button",{onClick:()=>Y("premium-course"),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 text-sm cursor-pointer",children:"Get Premium Access"})})]})]})]})]}),G&&(p||T?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:T?"Creating your personalized premium courses...":"Loading premium courses..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map((e,t)=>(0,a.jsxs)(o.P.div,{variants:ee,whileHover:{y:-8,scale:1.02},className:"group relative bg-blue-50/70 dark:bg-blue-900/20 backdrop-blur-sm border border-gray-200 dark:border-slate-700/50 rounded-2xl overflow-hidden hover:border-gray-300 dark:hover:border-slate-600/70 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"absolute inset-0 opacity-3 dark:opacity-10",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/20 to-purple-600/20 dark:from-blue-500/40 dark:to-purple-600/40 rounded-full -translate-y-16 translate-x-16"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-br from-purple-400/20 to-pink-600/20 dark:from-purple-500/40 dark:to-pink-600/40 rounded-full translate-y-12 -translate-x-12"})]}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-xl",children:(0,a.jsx)(v.A,{className:"w-4 h-4 text-blue-500"})}),(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent text-xs font-bold uppercase tracking-wider",children:"Premium"})]}),e.badge&&(0,a.jsxs)("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${(e=>{switch(e){case"Trending":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"Expert Level":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"Industry Favorite":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"Creative Choice":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";case"High Demand":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"Visual Excellence":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}})(e.badge)}`,children:[(e=>{switch(e){case"Trending":return(0,a.jsx)(u.A,{className:"w-3 h-3"});case"Expert Level":return(0,a.jsx)(v.A,{className:"w-3 h-3"});case"Industry Favorite":return(0,a.jsx)(D.A,{className:"w-3 h-3"});case"Creative Choice":case"Visual Excellence":default:return(0,a.jsx)(c.A,{className:"w-3 h-3"});case"High Demand":return(0,a.jsx)(N.A,{className:"w-3 h-3"})}})(e.badge),(0,a.jsx)("span",{children:e.badge})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-300 transition-colors",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-slate-200 text-sm leading-relaxed mb-2",children:e.description}),(0,a.jsxs)("p",{className:"text-gray-500 dark:text-slate-300 text-xs",children:["by ",e.instructor]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-slate-400",children:[(0,a.jsx)(I.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:["5k","10k","15k","20k","25k","30k","35k","40k"][Math.floor(8*Math.random())]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-slate-400",children:[(0,a.jsx)(U.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.duration})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 text-blue-400 fill-blue-400"}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-slate-100 font-medium text-sm",children:e.rating})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-4",children:(()=>{let{daysLeft:t,progress:r}=(e=>{if(!e)return{daysLeft:30,progress:100};let t=new Date(e),r=Math.max(0,30-Math.floor((new Date-t)/864e5)),a=Math.max(0,r/30*100);return{daysLeft:r,progress:a}})(e.createdAt);return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[(0,a.jsx)("span",{children:"Course Access"}),(0,a.jsxs)("span",{children:["Expires in ",t," days"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})})]})})()}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.price}),e.originalPrice&&(0,a.jsx)("span",{className:"text-lg text-gray-400 dark:text-slate-400 line-through",children:e.originalPrice})]}),G?(0,a.jsx)("button",{onClick:()=>Z(e),disabled:J===e.id,className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-normal rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-200 transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center space-x-2 text-xs",children:J===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Preparing your course..."})]}):(0,a.jsx)("span",{children:"Start Learning"})}):(0,a.jsx)("button",{onClick:()=>Y("premium-course"),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 cursor-pointer",children:"Get Premium"})]})]})]},e.id||t))}),W>1&&(0,a.jsxs)(o.P.div,{className:"flex items-center justify-center space-x-2 mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[(0,a.jsx)("button",{onClick:()=>w(e=>Math.max(e-1,1)),disabled:1===y,className:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:(0,a.jsx)(A.A,{className:"w-4 h-4"})}),Array.from({length:W},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>w(e),className:`px-3 py-2 rounded-lg text-sm font-medium cursor-pointer ${y===e?"bg-blue-600 text-white":"border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:e},e)),(0,a.jsx)("button",{onClick:()=>w(e=>Math.min(e+1,W)),disabled:y===W,className:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:(0,a.jsx)(j.A,{className:"w-4 h-4"})})]})]}))]})}var J=r(94655),R=r(80723),G=r(41762);function H({setActiveContent:e,setHideNavs:t}){let[r,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(!0),[n,d]=(0,s.useState)(null),[c,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t&&t(c&&!!n)},[c,n,t]);let[g,u]=(0,s.useState)(new Set),[h,b]=(0,s.useState)(!1),[y,f]=(0,s.useState)(new Set),{user:j,refreshToken:v}=(0,$.h)();j&&(j.subscription&&"pro"===j.subscription.plan&&"active"===j.subscription.status||j.isPremium),(0,s.useEffect)(()=>{w();try{let e=localStorage.getItem("bookmarked_flashcards");e&&f(new Set(JSON.parse(e)))}catch{}},[]);let w=async(e=!0)=>{try{let t=await (0,E.Ud)("/api/flashcards",{headers:{"Content-Type":"application/json"}});if(401===t.status&&e){if(console.log("Token expired, attempting to refresh..."),await v())return w(!1);return void P.toast.error("Session expired. Please log in again.")}if(t.ok){let e=await t.json();i(e.cards||[])}else P.toast.error("Failed to load flashcards")}catch(e){console.error("Error fetching flashcards:",e),P.toast.error("Error loading flashcards")}finally{o(!1)}},N=async(e,t=!0)=>{let r=y.has(e),a=new Set(y);r?a.delete(e):a.add(e),f(a);try{localStorage.setItem("bookmarked_flashcards",JSON.stringify([...a]))}catch{}try{let a=await (0,E.Ud)("/api/library",{method:"POST",headers:{"Content-Type":"application/json","x-user-id":j?._id||j?.id||""},body:JSON.stringify({action:"bookmark",itemId:`cards_${e}`})});if(401===a.status&&t&&await v())return N(e,!1);if(a.ok)P.toast.success(r?"Removed from bookmarks":"Added to bookmarks");else{let t=new Set(y);r?t.add(e):t.delete(e),f(t);try{localStorage.setItem("bookmarked_flashcards",JSON.stringify([...t]))}catch{}P.toast.error("Failed to update bookmark")}}catch(a){let t=new Set(y);r?t.add(e):t.delete(e),f(t);try{localStorage.setItem("bookmarked_flashcards",JSON.stringify([...t]))}catch{}console.error("Error bookmarking card:",a),P.toast.error("Failed to update bookmark")}};return l?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-48 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-64"})]}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-40"})]}),(0,a.jsx)("div",{className:"py-12 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl mb-12 border border-gray-200/50 dark:border-slate-700/50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-16 mx-auto mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-24 mx-auto"})]},t))})})}),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-64 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-96"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((e,t)=>(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-300 dark:bg-gray-600 rounded-xl w-12 h-12"}),(0,a.jsx)("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded-full w-20"})]}),(0,a.jsx)("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-6"}),(0,a.jsx)("div",{className:"flex items-center gap-2 mb-6 py-3 border-t border-gray-200 dark:border-slate-700",children:(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-16"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-10"}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded flex-1"})]}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-10"})]}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-full mt-4"})]},t))})]}):c&&n?(0,a.jsxs)("div",{className:`min-h-screen bg-white dark:bg-slate-900 transition-opacity duration-300 ${h?"opacity-0":"opacity-100"}`,children:[(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("button",{onClick:()=>{x(!1),d(null)},className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors","aria-label":"Back to flashcards library",children:[(0,a.jsx)(R.A,{size:20}),(0,a.jsx)("span",{children:"Back"})]})}),(0,a.jsx)(J.A,{cardData:n})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:"My Flashcards"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2",children:"View and manage your generated flashcard sets"})]})}),0===r.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:(0,a.jsx)(m.A,{className:"w-16 h-16 mx-auto"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No flashcards yet"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first flashcard set to get started"})]}):(0,a.jsxs)(a.Fragment,{children:[(()=>{let e=r.length,t=r.reduce((e,t)=>e+(t.totalCards||0),0),s=0;try{s=r.reduce((e,t)=>{let r=`opened_cards_${t._id}`,a=localStorage.getItem(r);if(!a)return e;try{let t=JSON.parse(a);return e+(Array.isArray(t)?t.length:0)}catch{return e}},0)}catch{}let i=y.size;return(0,a.jsx)("div",{className:"py-8 sm:py-10 mb-12",children:(0,a.jsx)("div",{className:"max-w-full mx-auto px-0 ",children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{label:"Sets",value:e,bg:"bg-blue-50/50 dark:bg-blue-900/10",border:"border-blue-100 dark:border-blue-800/50",text:"text-blue-600 dark:text-blue-400"},{label:"Total Cards",value:t,bg:"bg-pink-50/50 dark:bg-pink-900/10",border:"border-pink-100 dark:border-pink-800/50",text:"text-pink-600 dark:text-pink-400"},{label:"Opened",value:s,bg:"bg-emerald-50/50 dark:bg-emerald-900/10",border:"border-emerald-100 dark:border-emerald-800/50",text:"text-emerald-600 dark:text-emerald-400"},{label:"Bookmarks",value:i,bg:"bg-yellow-50/50 dark:bg-yellow-900/10",border:"border-yellow-100 dark:border-yellow-800/50",text:"text-yellow-600 dark:text-yellow-400"}].map((e,t)=>(0,a.jsxs)("div",{className:`relative ${e.bg} ${e.border} border rounded-xl p-5 flex flex-col items-center justify-center text-center transition-all duration-500`,children:[(0,a.jsx)("div",{className:`text-2xl font-black ${e.text} leading-none mb-1.5`,children:e.value}),(0,a.jsx)("div",{className:"text-[10px] font-black text-gray-500 dark:text-gray-400",children:e.label})]},t))})})})})(),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 text-balance",children:"Your Flashcards Library"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-balance",children:"Master key concepts with your personalized flashcard collections"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(e=>{let t=(e.difficulty||e.level||"beginner").toLowerCase(),r=t.charAt(0).toUpperCase()+t.slice(1),s=e.totalCards??(Array.isArray(e.cards)?e.cards.length:0);return(0,a.jsx)("div",{className:"h-full",children:(0,a.jsxs)("div",{className:"relative flex h-full flex-col rounded-sm bg-gradient-to-br from-indigo-600 to-purple-700 text-white transition-transform hover:scale-[1.02]",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 blur-2xl"}),(0,a.jsxs)("div",{className:"relative z-10 p-5 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 min-w-0",children:[(0,a.jsx)("div",{className:"flex items-center justify-center shrink-0",children:(0,a.jsx)(p.A,{size:24,className:"text-white"})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-black leading-tight text-white line-clamp-2 text-balance",children:e.title}),(0,a.jsx)("p",{className:"mt-1 text-xs font-medium text-white/70 line-clamp-1",children:e.topic||"Personalized Course"})]})]}),(0,a.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-white/20 border border-white/20 text-xs font-bold text-white",children:r})]}),(0,a.jsxs)("div",{className:"mt-auto pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-white/80 bg-white/10 px-3 py-1.5 rounded-lg border border-white/10",children:[(0,a.jsx)(p.A,{size:14}),(0,a.jsxs)("span",{children:[s," cards"]})]}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),N(e._id)},className:`p-2 rounded-xl transition-all active:scale-95 border ${y.has(e._id)?"bg-white text-indigo-600 border-white shadow-lg shadow-white/10":"bg-white/10 text-white border-white/10 hover:bg-white/20"}`,title:y.has(e._id)?"Remove bookmark":"Bookmark set",children:(0,a.jsx)(G.A,{size:18,className:y.has(e._id)?"fill-current":""})})]}),(0,a.jsxs)("button",{onClick:async t=>{t.stopPropagation(),b(!0),u(t=>new Set(t).add(e._id)),setTimeout(()=>{d(e),x(!0),u(t=>{let r=new Set(t);return r.delete(e._id),r}),b(!1)},300)},disabled:g.has(e._id),className:"w-full mt-4 py-3 px-4 rounded-xl bg-white text-indigo-900 hover:bg-white/90 active:scale-[0.98] font-black text-xs tracking-widest transition-all flex items-center justify-center gap-2",children:[g.has(e._id)?(0,a.jsx)("div",{className:"h-4 w-4 border-2 border-indigo-900/30 border-t-indigo-900 rounded-full animate-spin"}):(0,a.jsx)(m.A,{size:16}),(0,a.jsx)("span",{children:g.has(e._id)?"Preparing...":"Study Now"})]})]})]})]})},e._id)})})]})]})}var V=r(55687);r(18413);var B=r(9165);function q(){let e=(0,i.useSearchParams)(),t=e.get("tab");e.get("new");let[r,o]=(0,s.useState)(t||"library");return(0,s.useEffect)(()=>{t&&o(t)},[t]),(0,a.jsx)(l.default,{children:(0,a.jsxs)("div",{className:"min-h-full bg-gray-50 dark:bg-gray-900 pb-20 relative",children:[(0,a.jsx)("div",{className:"sticky top-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur z-30 pt-4 px-4 shadow-sm",children:(0,a.jsx)("div",{className:"flex space-x-1 overflow-x-auto pb-4 scrollbar-hide",children:[{id:"library",label:"My Courses"},{id:"explore",label:"Explore"},{id:"premium",label:"Premium"},{id:"flashcards",label:"Flashcards"},{id:"quizzes",label:"Quizzes"}].map(e=>(0,a.jsx)("button",{onClick:()=>o(e.id),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${r===e.id?"bg-blue-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:e.label},e.id))})}),(0,a.jsxs)("div",{className:"px-4 py-4",children:["library"===r&&(0,a.jsx)(T,{setActiveContent:o}),"explore"===r&&(0,a.jsx)(B.default,{}),"premium"===r&&(0,a.jsx)(_,{}),"flashcards"===r&&(0,a.jsx)(H,{setActiveContent:o}),"quizzes"===r&&(0,a.jsx)(V.default,{})]})]})})}}},e=>{e.O(0,[3930,293,6609,8500,24,8894,6238,7805,2424,6788,8126,9776,5011,2261,8413,5687,8441,3794,7358],()=>e(e.s=89808)),_N_E=e.O()}]);