"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5687],{55687:(e,r,a)=>{a.d(r,{default:()=>u});var t=a(95155),l=a(12115);a(50807);var s=a(86277),d=a(98500),i=a.n(d),o=a(92622),n=a(48368),g=a(84980),c=a(66609),x=a(99776),b=a(5669);let u=({setHideNavs:e})=>{let r,a,d,u,[m,h]=(0,l.useState)([]),[y,p]=(0,l.useState)(!0),[f,v]=(0,l.useState)(null),[k,j]=(0,l.useState)(1),[N,w]=(0,l.useState)(null);(0,l.useEffect)(()=>{e&&e(!!N)},[N,e]);let[z,S]=(0,l.useState)(!1),[A,$]=(0,l.useState)("all"),[C,q]=(0,l.useState)("all"),[_,D]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{(async()=>{try{let e=await (0,b.Ud)("/api/quizzes");if(e.ok){let r=await e.json();h(r);let a=r.length,t=0,l=0,s=0;r.forEach(e=>{if(e.performances&&e.performances.length>0){s++,t+=e.performances.length;let r={};e.performances.forEach(e=>{let a=e.userId.toString();(!r[a]||e.percentage>r[a])&&(r[a]=e.percentage)}),l+=Object.values(r).reduce((e,r)=>e+r,0)}});let d=s>0?Math.round(l/s):0;v({totalTests:a,completedTests:s,totalAttempts:t,averageScore:d})}else c.toast.error("Failed to fetch quizzes")}catch(e){c.toast.error("An error occurred while fetching quizzes")}finally{p(!1),S(!0)}})()},[]),N)?(0,t.jsx)(x.A,{quizData:N,topic:N.course,onBack:()=>w(null)}):(0,t.jsxs)("div",{className:"p-4 sm:p-8 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen",children:[(0,t.jsxs)("header",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold tracking-tight flex items-center",children:"Test Your Knowledge"}),(0,t.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400 mt-2",children:"Challenge yourself with quizzes on various topics."})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[{label:"Tests",value:m.length,bg:"bg-blue-50/50 dark:bg-blue-900/10",border:"border-blue-100 dark:border-blue-800/50",text:"text-blue-600 dark:text-blue-400"},{label:"Pending",value:m.length,bg:"bg-yellow-50/50 dark:bg-yellow-900/10",border:"border-yellow-100 dark:border-yellow-800/50",text:"text-yellow-600 dark:text-yellow-400"},{label:"Done",value:f?.completedTests||0,bg:"bg-green-50/50 dark:bg-green-900/10",border:"border-green-100 dark:border-green-800/50",text:"text-green-600 dark:text-green-400"},{label:"Avg Score",value:`${f?.averageScore||0}%`,bg:"bg-purple-50/50 dark:bg-purple-900/10",border:"border-purple-100 dark:border-purple-800/50",text:"text-purple-600 dark:text-purple-400"}].map((e,r)=>(0,t.jsxs)("div",{className:`relative ${e.bg} ${e.border} border rounded-xl p-5 flex flex-col items-center justify-center text-center transition-all duration-500 ${z?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[(0,t.jsx)("div",{className:`text-2xl font-black ${e.text} leading-none mb-1.5`,children:y?"...":e.value}),(0,t.jsx)("div",{className:"text-[10px] font-black text-gray-500 dark:text-gray-400",children:e.label})]},r))}),(0,t.jsxs)("div",{className:`bg-indigo-50 dark:bg-gray-800 p-6 rounded-lg border border-indigo-200 dark:border-gray-700 transition-opacity duration-500 ${z?"opacity-100":"opacity-0"}`,children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Available Quizzes"}),(0,t.jsxs)(s.$,{variant:"outline",onClick:()=>D(!_),className:"mt-2 sm:mt-0",children:[(0,t.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),_&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Difficulty"}),(0,t.jsxs)("select",{value:A,onChange:e=>$(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[(0,t.jsx)("option",{value:"all",children:"All Difficulties"}),(0,t.jsx)("option",{value:"beginner",children:"Beginner"}),(0,t.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,t.jsx)("option",{value:"advanced",children:"Advanced"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,t.jsxs)("select",{value:C,onChange:e=>q(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[(0,t.jsx)("option",{value:"all",children:"All Tests"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"completed",children:"Completed"})]})]})]}),("all"!==A||"all"!==C)&&(0,t.jsx)("div",{className:"mt-4 flex gap-2",children:(0,t.jsx)(s.$,{variant:"outline",size:"sm",onClick:()=>{$("all"),q("all")},children:"Clear Filters"})})]}),y?(0,t.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"Loading quizzes..."}):0===m.length?(0,t.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[(0,t.jsx)("p",{className:"mb-2",children:"No quizzes available yet."}),(0,t.jsxs)("p",{children:["Go to the"," ",(0,t.jsx)(i(),{href:"/dashboard?tab=generate",className:"text-blue-500 hover:underline",children:"Generate"})," ","page to create one."]})]}):(0,t.jsx)("div",{className:"space-y-4",children:(a=Math.ceil((r=m.filter(e=>{if("all"!==A&&e.difficulty!==A)return!1;if("all"!==C){let r=`quiz_completed_${e._id}`,a=localStorage.getItem(r);if("completed"===C&&!a||"pending"===C&&a)return!1}return!0})).length/6),d=(k-1)*6,u=r.slice(d,d+6),(0,t.jsxs)(t.Fragment,{children:[u.map(e=>{let r,a,l={easy:"bg-blue-50 dark:bg-gray-800 border-blue-200 dark:border-gray-700",medium:"bg-orange-50 dark:bg-gray-800 border-orange-200 dark:border-gray-700",hard:"bg-purple-50 dark:bg-gray-800 border-purple-200 dark:border-gray-700"}[e.difficulty]||"bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700";return(0,t.jsxs)("div",{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors ${l}`,children:[(0,t.jsxs)("div",{className:"mb-4 sm:mb-0",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.course}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(n.A,{className:"w-3 h-3 mr-1"}),e.questions.length," questions"]}),e.createdAt&&(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(g.A,{className:"w-3 h-3 mr-1"}),new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(s.$,{variant:"default",onClick:()=>w(e),className:`w-full px-6 py-4 rounded-sm font-bold text-sm transition-all duration-300 hover:scale-[1.03] active:scale-95 shadow-md hover:shadow-lg flex items-center gap-2 ${"easy"===e.difficulty?"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-blue-500/20":"medium"===e.difficulty?"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-orange-500/20":"hard"===e.difficulty?"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white shadow-purple-500/20":"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white shadow-gray-500/20"}`,children:(r=`quiz_completed_${e._id}`,a=localStorage.getItem(r),(0,t.jsx)(t.Fragment,{children:a?"Review Analysis":"Take Assessment"}))})})]},e._id)}),a>1&&(0,t.jsxs)("div",{className:"flex justify-center mt-6 space-x-2",children:[(0,t.jsx)("button",{onClick:()=>j(e=>Math.max(e-1,1)),disabled:1===k,className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300 dark:hover:bg-gray-600",children:"Previous"}),Array.from({length:a},(e,r)=>r+1).map(e=>(0,t.jsx)("button",{onClick:()=>j(e),className:`px-3 py-1 text-sm rounded ${k===e?"bg-indigo-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:e},e)),(0,t.jsx)("button",{onClick:()=>j(e=>Math.min(e+1,a)),disabled:k===a,className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300 dark:hover:bg-gray-600",children:"Next"})]})]}))})]})]})}}}]);