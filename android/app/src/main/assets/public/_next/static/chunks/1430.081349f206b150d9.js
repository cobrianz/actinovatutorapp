"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1430],{1430:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(95155),i=a(12115),n=a(78340);let c=(0,n.A)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),l=(0,n.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var s=a(6296),d=a(6962);function o({billingHistory:e,theme:t}){let[n,o]=(0,i.useState)(null),[h,p]=(0,i.useState)(null),[m,x]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([Promise.all([a.e(4792),a.e(8247),a.e(9788),a.e(1746),a.e(9380),a.e(477)]).then(a.bind(a,50550)),Promise.all([a.e(4792),a.e(8247),a.e(9788),a.e(1746),a.e(9380),a.e(2135)]).then(a.bind(a,78235))]);o(()=>e.PDFDownloadLink),p(()=>t.default),x(!0)}catch(e){console.error("Error loading PDF components:",e)}})()},[]),e&&0!==e.length)?(0,r.jsx)("div",{className:"space-y-3",children:e.sort((e,t)=>new Date(t.paidAt)-new Date(e.paidAt)).map((e,i)=>(0,r.jsxs)("div",{className:`p-4 rounded-2xl border ${"dark"===t?"bg-gray-800 border-gray-700 hover:bg-gray-700/50":"bg-white border-gray-100 hover:bg-gray-50"} flex items-center justify-between transition-colors`,children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${"dark"===t?"bg-gray-700 text-indigo-400":"bg-indigo-50 text-indigo-600"}`,children:(0,r.jsx)(l,{size:18})}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsxs)("div",{className:"text-sm font-bold tracking-tight uppercase",children:[e.plan," ",e.billingCycle]}),(0,r.jsx)("div",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mt-0.5",children:new Date(e.paidAt||e.date).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm font-black text-indigo-600 dark:text-indigo-400",children:new Intl.NumberFormat("en-US",{style:"currency",currency:e.currency||"USD"}).format(e.amount)}),(0,r.jsx)("div",{className:"text-[9px] font-bold text-emerald-500 uppercase tracking-widest mt-0.5",children:"Success"})]}),m&&h&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"hidden md:block",children:n&&(0,r.jsx)(n,{document:(0,r.jsx)(h,{transaction:e}),fileName:`receipt-${e.reference}.pdf`,className:`p-2 rounded-xl transition-all active:scale-95 flex items-center justify-center ${"dark"===t?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,children:({loading:e})=>e?(0,r.jsx)(s.A,{size:18,className:"animate-spin opacity-50"}):(0,r.jsx)(d.A,{size:18})})}),(0,r.jsx)("button",{onClick:async()=>{try{let{pdf:t}=await Promise.all([a.e(4792),a.e(8247),a.e(9788),a.e(1746),a.e(9380),a.e(477)]).then(a.bind(a,50550)),i=await t((0,r.jsx)(h,{transaction:e})).toBlob(),n=new FileReader;n.readAsDataURL(i),n.onloadend=async()=>{let t=n.result.split(",")[1];try{if(!(window.Capacitor?.isNative||"capacitor:"===window.location.protocol)){let t=window.URL.createObjectURL(i),a=document.createElement("a");a.href=t,a.download=`receipt-${e.reference}.pdf`,a.click(),window.URL.revokeObjectURL(t);return}let{Filesystem:r,Directory:n}=await Promise.all([a.e(7805),a.e(8276)]).then(a.bind(a,78276)).catch(()=>({})),{Share:c}=await Promise.all([a.e(7805),a.e(8493)]).then(a.bind(a,98493)).catch(()=>({})),{LocalNotifications:l}=await Promise.all([a.e(7805),a.e(9968)]).then(a.bind(a,59968)).catch(()=>({})),s=`receipt-${e.reference}.pdf`,d=await r.writeFile({path:s,data:t,directory:n.Cache});l&&await l.schedule({notifications:[{title:"Receipt Downloaded",body:`Receipt for ${e.plan} has been saved.`,id:Math.floor(1e5*Math.random()),schedule:{at:new Date(Date.now()+100)},sound:null,attachments:null,actionTypeId:"",extra:null}]}),await c.share({title:"Receipt Download",text:`Receipt for ${e.plan}`,url:d.uri,dialogTitle:"Open Receipt"})}catch(r){console.error("Native save error",r);let t=window.URL.createObjectURL(i),a=document.createElement("a");a.href=t,a.download=`receipt-${e.reference}.pdf`,a.click(),window.URL.revokeObjectURL(t)}}}catch(e){console.error("Download handling error",e)}},className:"md:hidden flex items-center p-2 rounded-xl bg-indigo-600 text-white active:scale-95 transition-all",title:"Download Receipt",children:(0,r.jsx)(d.A,{size:18})})]})]})]},e.reference||i))}):(0,r.jsxs)("div",{className:`p-8 rounded-2xl border border-dashed text-center ${"dark"===t?"bg-gray-800/20 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[(0,r.jsx)(c,{size:32,className:"mx-auto mb-3 opacity-20"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-tighter",children:"No transactions found"})]})}},6296:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(78340).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6962:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(78340).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}}]);