"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9286],{69286:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var t=a(95155),r=a(12115),i=a(73321),l=a(42869),n=a(439),c=a(89363),d=a(79372),o=a(2318);a(33210);var u=a(31069),g=a(94290),m=a(21362),x=a(41313),b=a(28393),p=a(71552),h=a(66609),f=a(5669);let y=(0,a(37206).default)(()=>a.e(1430).then(a.bind(a,1430)),{loadableGenerated:{webpack:()=>[1430]},ssr:!1}),j={difficulty:"adaptive",studyGoal:"balanced",sessionLength:25,breakLength:5};function w(){let e=(0,i.useRouter)(),{user:s,refreshToken:a,logout:w}=(0,b.h)(),{theme:N}=(0,p.D)(),[v,k]=(0,r.useState)("my-profile"),[S,P]=(0,r.useState)(!0),[C,$]=(0,r.useState)(!1),[A,R]=(0,r.useState)(null),[z,F]=(0,r.useState)(null),[U,E]=(0,r.useState)(!1),[L,M]=(0,r.useState)({firstName:"",lastName:""}),[q,O]=(0,r.useState)({current:"",new:"",confirm:""}),[B,G]=(0,r.useState)([]),[T,D]=(0,r.useState)({current:!1,new:!1,confirm:!1}),[H,_]=(0,r.useState)(null),[I,J]=(0,r.useState)({...j,emailNotifications:!0}),[V,W]=(0,r.useState)({subject:"",category:"general",message:""}),[Z,K]=(0,r.useState)(!1);(0,r.useEffect)(()=>{Q()},[]),(0,r.useEffect)(()=>{if(z?.user?.settings){let{preferences:e,notifications:s}=z.user.settings;J(a=>({...a,difficulty:e?.difficulty||j.difficulty,sessionLength:e?.dailyGoal||j.sessionLength,theme:e?.theme||"system",language:e?.language||"en",emailNotifications:s?.email??!0,marketingEmails:s?.marketing??!0,studyReminders:s?.courseUpdates??!0}))}},[z]);let Q=async()=>{try{P(!0),P(!0);let e=await (0,f.Ud)("/api/profile");if(e.ok){let s=await e.json();F(s)}else R("Failed to load profile")}catch(e){console.error("Profile fetch error:",e)}finally{P(!1)}},X=async()=>{var e;let s;if(q.new!==q.confirm){G(["Passwords do not match"]),h.oR.error("Passwords do not match");return}let a=(e=q.new,s=[],e.length<8&&s.push("Must be at least 8 characters"),/[A-Z]/.test(e)||s.push("Must contain an uppercase letter"),/[a-z]/.test(e)||s.push("Must contain a lowercase letter"),/[0-9]/.test(e)||s.push("Must contain a number"),/[@$!%*?&]/.test(e)||s.push("Must contain a special character (@$!%*?&)"),e.toLowerCase().includes("password")&&s.push("Cannot contain the word 'password'"),s);if(a.length){G(a),h.oR.error(a.join("; "));return}try{$(!0);let e=await (0,f.Ud)("/api/change-password",{method:"POST",body:JSON.stringify({currentPassword:q.current,newPassword:q.new,confirmPassword:q.confirm})});if(e.ok)O({current:"",new:"",confirm:""}),G([]),h.oR.success("Password changed successfully!");else{let s=await e.json().catch(()=>({})),a=Array.isArray(s?.details)?s.details.map(e=>e.message).filter(Boolean):[],t=a.length?a:[s.error||"Failed to change password"];G(t),h.oR.error(t.join("; "))}}catch(e){h.oR.error("Failed to change password"),console.error("Password change error:",e)}finally{$(!1)}},Y=async()=>{try{w(),h.oR.success("Successfully logged out"),e.push("/")}catch(s){console.error("Logout error:",s),w(),e.push("/")}},ee=[{id:"my-profile",label:"Overview",icon:l.A},{id:"password",label:"Security",icon:n.A},{id:"settings",label:"Preferences",icon:c.A},{id:"billing",label:"Billing & Plan",icon:d.A},{id:"support",label:"Contact Support",icon:o.A}],es=async e=>{if(e.preventDefault(),!V.subject.trim()||!V.message.trim())return void h.oR.error("Subject and message are required");try{K(!0);let e=await (0,f.Ud)("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:`${s?.firstName||""} ${s?.lastName||""}`.trim()||s?.name,email:s?.email,...V})});if(e.ok)h.oR.success("Message sent successfully! We'll get back to you soon."),W({subject:"",category:"general",message:""});else{let s=await e.json();h.oR.error(s.error||"Failed to send message")}}catch(e){console.error("Contact error:",e),h.oR.error("Failed to send message. Please try again.")}finally{K(!1)}},ea=async()=>{try{$(!0);let e={notifications:{email:!!I.emailNotifications,marketing:!!I.marketingEmails,courseUpdates:!!I.studyReminders,push:!1},preferences:{theme:I.theme||"system",language:I.language||"en",difficulty:I.difficulty||"adaptive",dailyGoal:Number(I.sessionLength)||25},privacy:{profileVisible:!0,progressVisible:!1,achievementsVisible:!1}},s=await (0,f.Ud)("/api/settings/update",{method:"POST",body:JSON.stringify(e)});if(s.ok){let e=await s.json();h.oR.success(e.message||"Settings saved successfully")}else{let e=await s.json().catch(()=>({}));h.oR.error(e.error||"Failed to save settings")}}catch(e){console.error("Save settings error:",e),h.oR.error("Failed to save settings")}finally{$(!1)}};return(0,t.jsx)("div",{className:`min-h-screen pb-24 ${"dark"===N?"bg-gray-950 text-white":"bg-gray-50 text-gray-900"}`,children:(0,t.jsxs)("main",{className:"max-w-2xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:`p-6 rounded-[2.5rem] relative overflow-hidden transition-all duration-500 hover:shadow-indigo-500/20 ${"dark"===N?"bg-gray-900 border border-gray-800":"bg-white border border-gray-100"}`,children:[(0,t.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,t.jsx)("div",{className:`w-24 h-24 rounded-[2rem] flex items-center justify-center p-1 transform rotate-3 transition-transform hover:rotate-0 ${"dark"===N?"bg-indigo-900/40":"bg-indigo-50"}`,children:(0,t.jsx)("div",{className:"w-full h-full rounded-[1.8rem] flex items-center justify-center text-white text-3xl font-black bg-gradient-to-br from-indigo-600 to-purple-600 overflow-hidden",children:z?.usage?.isPremium&&s?.image?(0,t.jsx)("img",{src:s.image,alt:"Avatar",className:"w-full h-full object-cover"}):z?.usage?.isPremium?(0,t.jsx)(u.A,{size:36,className:"text-white drop-shadow-lg"}):(0,t.jsx)(l.A,{size:36,className:"text-white"})})}),(0,t.jsx)("h1",{className:"text-2xl font-black mb-1",children:z?.user?.firstName?`${z.user.firstName} ${z.user.lastName}`:s?.name||"Actinova User"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:z?.user?.email||s?.email}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)("span",{className:`px-4 py-1.5 rounded-2xl text-[10px] font-bold uppercase tracking-wider flex items-center gap-1.5 ${z?.usage?.isPremium?"bg-amber-100 text-amber-700 border border-amber-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:[z?.usage?.isPremium?(0,t.jsx)(u.A,{size:12}):(0,t.jsx)(g.A,{size:12}),z?.usage?.isPremium?"Pro Member":"Free Explorer"]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-8 pt-8 border-t border-gray-100 dark:border-gray-800",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xl font-black",children:z?.usage?.details?.courses?.used||0}),(0,t.jsx)("div",{className:"text-[10px] uppercase text-gray-500 font-bold tracking-widest",children:"Courses"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xl font-black",children:z?.usage?.details?.flashcards?.used||0}),(0,t.jsx)("div",{className:"text-[10px] uppercase text-gray-500 font-bold tracking-widest",children:"Cards"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3 mt-10",children:[ee.map(e=>{let s=e.icon,a=v===e.id;return(0,t.jsxs)("button",{onClick:()=>k(e.id),className:`w-full flex items-center justify-between p-3.5 rounded-2xl transition-all ${a?"bg-indigo-600 text-white":"dark"===N?"bg-gray-900 border border-gray-800 text-gray-300":"bg-white border border-gray-100 text-gray-700"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${a?"bg-white/20":"dark"===N?"bg-gray-800":"bg-gray-50"}`,children:(0,t.jsx)(s,{size:20,className:a?"text-white":"text-indigo-600"})}),(0,t.jsx)("span",{className:"font-bold text-sm tracking-tight",children:e.label})]}),(0,t.jsx)(m.A,{size:18,className:a?"text-white/50":"text-gray-400"})]},e.id)}),(0,t.jsxs)("button",{onClick:Y,className:`w-full flex items-center justify-between p-3.5 rounded-2xl transition-all ${"dark"===N?"bg-red-900/10 border border-red-900/20 text-red-400":"bg-red-50 border border-red-100 text-red-600"} mt-6`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${"dark"===N?"bg-red-950/40":"bg-red-100/50"}`,children:(0,t.jsx)(x.A,{size:20})}),(0,t.jsx)("span",{className:"font-bold text-sm tracking-tight",children:"Sign Out"})]}),(0,t.jsx)(m.A,{size:18,className:"opacity-40"})]})]}),(0,t.jsxs)("div",{className:`mt-8 p-6 rounded-3xl ${"dark"===N?"bg-gray-900 border border-gray-800":"bg-white border border-gray-100"}`,children:["my-profile"===v&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-lg font-black uppercase tracking-widest mb-4",children:"Account Usage"}),(0,t.jsx)("div",{className:"space-y-5",children:[{label:"Learning Courses",used:z?.usage?.details?.courses?.used,limit:z?.usage?.details?.courses?.limit,color:"bg-blue-500"},{label:"Flashcards",used:z?.usage?.details?.flashcards?.used,limit:z?.usage?.details?.flashcards?.limit,color:"bg-purple-500"},{label:"Assessments",used:z?.usage?.details?.quizzes?.used,limit:z?.usage?.details?.quizzes?.limit,color:"bg-emerald-500"}].map((e,s)=>{let a=e.limit?e.used/e.limit*100:100;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs font-bold",children:[(0,t.jsx)("span",{className:"text-gray-500 uppercase",children:e.label}),(0,t.jsxs)("span",{children:[e.used," / ",e.limit||"∞"]})]}),(0,t.jsx)("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full ${e.color} transition-all duration-1000`,style:{width:`${a}%`}})})]},s)})}),(0,t.jsx)("div",{className:"mt-8 p-4 rounded-2xl bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/50",children:(0,t.jsxs)("p",{className:"text-[10px] text-indigo-700 dark:text-indigo-300 font-bold uppercase tracking-widest text-center",children:["Reset: ",z?.usage?.resetDate||"1st of month"]})})]}),"password"===v&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-lg font-black uppercase tracking-widest mb-4",children:"Security"}),(0,t.jsxs)("div",{className:"space-y-4",children:[["current","new","confirm"].map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-[10px] font-bold uppercase text-gray-500 mb-1.5 ml-1",children:[e," Password"]}),(0,t.jsx)("input",{type:"password",value:q[e],onChange:s=>O({...q,[e]:s.target.value}),className:`w-full px-4 py-3 rounded-2xl border text-sm focus:ring-2 focus:ring-indigo-500 outline-none transition-all ${"dark"===N?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-100"}`,placeholder:"••••••••"})]},e)),(0,t.jsx)("button",{onClick:X,disabled:C,className:"w-full py-3 bg-indigo-600 text-white rounded-2xl font-black text-sm uppercase tracking-widest active:scale-[0.98] transition-all",children:C?"Updating...":"Update Security"})]})]}),"settings"===v&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("h2",{className:"text-lg font-black uppercase tracking-widest mb-4",children:"Preferences"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold uppercase text-gray-500 mb-1.5 ml-1",children:"Learning Difficulty"}),(0,t.jsxs)("select",{value:I.difficulty,onChange:e=>J({...I,difficulty:e.target.value}),className:`w-full px-4 py-3 rounded-2xl border text-sm ${"dark"===N?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-100"}`,children:[(0,t.jsx)("option",{value:"beginner",children:"Beginner"}),(0,t.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,t.jsx)("option",{value:"adaptive",children:"Adaptive"})]})]}),(0,t.jsxs)("div",{className:`p-4 rounded-2xl flex items-center justify-between ${"dark"===N?"bg-gray-800":"bg-gray-50"}`,children:[(0,t.jsx)("span",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Email Notifications"}),(0,t.jsx)("input",{type:"checkbox",checked:I.emailNotifications,onChange:e=>J({...I,emailNotifications:e.target.checked}),className:"w-6 h-6 rounded-lg accent-indigo-600"})]}),(0,t.jsx)("button",{onClick:ea,disabled:C,className:"w-full py-3 bg-indigo-600 text-white rounded-2xl font-black text-sm uppercase tracking-widest active:scale-[0.98] transition-all",children:"Save Settings"})]})]}),"support"===v&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("h2",{className:"text-lg font-black uppercase tracking-widest mb-4",children:"Contact Support"}),(0,t.jsxs)("form",{onSubmit:es,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold uppercase text-gray-500 mb-1.5 ml-1",children:"Category"}),(0,t.jsxs)("select",{value:V.category,onChange:e=>W({...V,category:e.target.value}),className:`w-full px-4 py-3 rounded-2xl border text-sm ${"dark"===N?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-100"}`,children:[(0,t.jsx)("option",{value:"general",children:"General Inquiry"}),(0,t.jsx)("option",{value:"technical",children:"Technical Support"}),(0,t.jsx)("option",{value:"billing",children:"Billing Issue"}),(0,t.jsx)("option",{value:"feature",children:"Feature Request"}),(0,t.jsx)("option",{value:"feedback",children:"Feedback"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold uppercase text-gray-500 mb-1.5 ml-1",children:"Subject"}),(0,t.jsx)("input",{type:"text",value:V.subject,onChange:e=>W({...V,subject:e.target.value}),placeholder:"Brief summary of your inquiry",className:`w-full px-4 py-3 rounded-2xl border text-sm focus:ring-2 focus:ring-indigo-500 outline-none transition-all ${"dark"===N?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-100"}`,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold uppercase text-gray-500 mb-1.5 ml-1",children:"Message"}),(0,t.jsx)("textarea",{value:V.message,onChange:e=>W({...V,message:e.target.value}),placeholder:"How can we help you today?",rows:5,className:`w-full px-4 py-3 rounded-2xl border text-sm focus:ring-2 focus:ring-indigo-500 outline-none transition-all resize-none ${"dark"===N?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-100"}`,required:!0})]}),(0,t.jsx)("button",{type:"submit",disabled:Z,className:"w-full py-3 bg-indigo-600 text-white rounded-2xl font-black text-sm uppercase tracking-widest active:scale-[0.98] transition-all disabled:opacity-70 disabled:cursor-not-allowed",children:Z?"Sending...":"Send Message"})]})]}),"billing"===v&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-lg font-black uppercase tracking-widest mb-4 text-center",children:"Subscription"}),(0,t.jsx)("div",{className:"p-8 rounded-3xl relative overflow-hidden bg-indigo-600 text-white mb-8",children:(0,t.jsxs)("div",{className:"relative z-10 text-center",children:[(0,t.jsx)("span",{className:"px-3 py-1 bg-white/20 rounded-full text-[10px] font-bold uppercase tracking-widest",children:"Active Plan"}),(0,t.jsx)("h3",{className:"text-3xl font-black mt-4 uppercase",children:z?.usage?.isPremium?"Pro Elite":"Free Starter"}),!z?.usage?.isPremium&&(0,t.jsx)("button",{onClick:()=>e.push("/dashboard?tab=upgrade"),className:"mt-6 px-6 py-2.5 bg-white text-indigo-600 rounded-2xl font-black text-xs uppercase tracking-widest",children:"Go Pro Now"})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-sm font-black uppercase tracking-widest text-gray-500 ml-1",children:"Billing History"}),(0,t.jsx)(y,{billingHistory:z?.user?.billingHistory,theme:N})]})]})]})]})})}}}]);