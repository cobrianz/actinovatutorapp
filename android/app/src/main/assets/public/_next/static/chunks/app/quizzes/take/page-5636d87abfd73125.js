(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5586],{5669:(e,r,t)=>{"use strict";t.d(r,{Ud:()=>d,e9:()=>n});var a=t(41463);let s=!!window.Capacitor||"capacitor:"===window.location.protocol||"localhost"===window.location.hostname&&"3000"!==window.location.port&&"3001"!==window.location.port;console.log("[Actinova] Environment:",{origin:window.origin,isCapacitor:s,protocol:window.location.protocol,host:window.location.host});let i=a.env.NEXT_PUBLIC_API_URL||"https://actinovatutorapp.vercel.app";function n(e){if(!e)return i;if(e.startsWith("http://")||e.startsWith("https://"))return e;let r=e.startsWith("/")?e:`/${e}`;return s?`${i}${r}`:r}async function d(e,r={}){let t=n(e),a={"Content-Type":"application/json",...r.headers};if(s){let e=localStorage.getItem("auth_token");return e&&(a.Authorization=`Bearer ${e}`),fetch(t,{...r,headers:a,credentials:"omit"})}return fetch(t,{...r,headers:a,credentials:"include"})}console.log("[Actinova] API_BASE_URL configured as:",i)},11212:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var a=t(95155),s=t(12115),i=t(86277),n=t(50807),d=t(46424),o=t(14858),c=t(54045),l=t(66609),u=t(80723),h=t(52484),x=t(62791),m=t(98500),g=t.n(m),p=t(73321),b=t(5669);let f=()=>{let e=(0,p.useSearchParams)().get("id"),[r,t]=(0,s.useState)(null),[m,f]=(0,s.useState)(!0),[v,y]=(0,s.useState)({}),[j,k]=(0,s.useState)(!1),[w,N]=(0,s.useState)(0);(0,s.useEffect)(()=>{(async()=>{try{if(!e)return;let r=await fetch((0,b.e9)(`/api/quizzes/${e}`));if(r.ok){let e=await r.json();t(e)}else l.toast.error("Failed to load quiz.")}catch(e){l.toast.error("An error occurred while fetching the quiz.")}finally{f(!1)}})()},[e]);let _=(e,r)=>{y(t=>({...t,[e]:r}))};if(m)return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading quiz..."})});if(!r)return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsx)("p",{className:"text-red-500",children:"Could not load the quiz."})});let z=r.questions.reduce((e,r)=>e+r.points,0);return(0,a.jsx)("div",{className:"p-4 sm:p-8 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)(g(),{href:"/dashboard?tab=quizzes",className:"flex items-center text-sm text-blue-500 hover:underline mb-4",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-1"}),"Back to Quizzes"]}),(0,a.jsxs)(n.Zp,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-lg",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{className:"text-3xl font-bold",children:r.title}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-500 dark:text-gray-400 mt-2",children:[(0,a.jsx)("span",{children:r.course}),(0,a.jsxs)("span",{children:["Total Marks: ",z]})]})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"space-y-8",children:r.questions.map((e,r)=>(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:[r+1,". ",e.text," ",(0,a.jsxs)("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",e.points," points)"]})]}),"multiple-choice"===e.type&&(0,a.jsx)(d.z,{onValueChange:r=>_(e._id,r),disabled:j,children:e.options.map(r=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 my-2 p-3 rounded-lg border border-gray-200 dark:border-gray-600 has-[:checked]:bg-blue-50 has-[:checked]:dark:bg-blue-900/20 has-[:checked]:border-blue-500",children:[(0,a.jsx)(d.C,{value:r,id:`${e._id}-${r}`}),(0,a.jsx)(c.J,{htmlFor:`${e._id}-${r}`,className:"flex-1 cursor-pointer",children:r})]},r))}),"true-false"===e.type&&(0,a.jsx)(d.z,{onValueChange:r=>_(e._id,r),disabled:j,children:e.options.map(r=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 my-2 p-3 rounded-lg border border-gray-200 dark:border-gray-600 has-[:checked]:bg-blue-50 has-[:checked]:dark:bg-blue-900/20 has-[:checked]:border-blue-500",children:[(0,a.jsx)(d.C,{value:r,id:`${e._id}-${r}`}),(0,a.jsx)(c.J,{htmlFor:`${e._id}-${r}`,className:"flex-1 cursor-pointer",children:r})]},r))}),"multiple-select"===e.type&&(0,a.jsx)("div",{className:"space-y-2",children:e.options.map(r=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 my-2 p-3 rounded-lg border border-gray-200 dark:border-gray-600 has-[:checked]:bg-blue-50 has-[:checked]:dark:bg-blue-900/20 has-[:checked]:border-blue-500",children:[(0,a.jsx)(o.S,{id:`${e._id}-${r}`,onCheckedChange:t=>{let a=v[e._id]||[],s=t?[...a,r]:a.filter(e=>e!==r);_(e._id,s)},disabled:j}),(0,a.jsx)(c.J,{htmlFor:`${e._id}-${r}`,className:"flex-1 cursor-pointer",children:r})]},r))}),j&&(0,a.jsx)("div",{className:"mt-4 p-3 rounded-lg text-sm",children:JSON.stringify(v[e._id])===JSON.stringify(e.correctAnswer)?(0,a.jsxs)("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 mr-2"}),"Correct!"]}):(0,a.jsxs)("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[(0,a.jsx)(x.A,{className:"w-5 h-5 mr-2"}),"Incorrect. Correct answer:"," ",Array.isArray(e.correctAnswer)?e.correctAnswer.join(", "):e.correctAnswer]})})]},e._id))}),j?(0,a.jsxs)("div",{className:"mt-8 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Quiz Complete!"}),(0,a.jsxs)("p",{className:"text-xl mt-2",children:["Your score:"," ",(0,a.jsx)("span",{className:"font-bold text-blue-500",children:w})," /"," ",z]}),(0,a.jsx)(i.$,{onClick:()=>window.location.reload(),className:"mt-6",children:"Try Again"})]}):(0,a.jsxs)("div",{className:"mt-8 flex justify-end space-x-4",children:[(0,a.jsx)(g(),{href:"/dashboard?tab=quizzes",children:(0,a.jsx)(i.$,{variant:"outline",children:"Cancel"})}),(0,a.jsx)(i.$,{onClick:()=>{let e=0;r.questions.forEach(r=>{JSON.stringify(v[r._id])===JSON.stringify(r.correctAnswer)&&(e+=r.points)}),N(e),k(!0),l.toast.success(`Quiz submitted! Your score is ${e}.`)},children:"Submit Quiz"})]})]})]})]})})},v=()=>(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{className:"p-8 text-center",children:"Loading quiz..."}),children:(0,a.jsx)(f,{})})},14858:(e,r,t)=>{"use strict";t.d(r,{S:()=>d});var a=t(95155);t(12115);var s=t(47279),i=t(94514),n=t(68310);function d({className:e,...r}){return(0,a.jsx)(s.bL,{"data-slot":"checkbox",className:(0,n.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,a.jsx)(s.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,a.jsx)(i.A,{className:"size-3.5"})})})}},46424:(e,r,t)=>{"use strict";t.d(r,{C:()=>o,z:()=>d});var a=t(95155);t(12115);var s=t(31620),i=t(16950),n=t(68310);function d({className:e,...r}){return(0,a.jsx)(s.bL,{"data-slot":"radio-group",className:(0,n.cn)("grid gap-3",e),...r})}function o({className:e,...r}){return(0,a.jsx)(s.q7,{"data-slot":"radio-group-item",className:(0,n.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,a.jsx)(s.C1,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}},50807:(e,r,t)=>{"use strict";t.d(r,{Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n});var a=t(95155);t(12115);var s=t(68310);function i({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function n({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function d({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...r})}function o({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...r})}},54045:(e,r,t)=>{"use strict";t.d(r,{J:()=>n});var a=t(95155);t(12115);var s=t(91760),i=t(68310);function n({className:e,...r}){return(0,a.jsx)(s.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}},64546:(e,r,t)=>{Promise.resolve().then(t.bind(t,11212))},68310:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var a=t(29722),s=t(622);function i(...e){return(0,s.QP)((0,a.$)(e))}},73321:(e,r,t)=>{"use strict";var a=t(74645);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},78340:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var a=t(12115);let s=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},i=(...e)=>e.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:d="",children:o,iconNode:c,...l},u)=>(0,a.createElement)("svg",{ref:u,...n,width:r,height:r,stroke:e,strokeWidth:s?24*Number(t)/Number(r):t,className:i("lucide",d),...!o&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(l)&&{"aria-hidden":"true"},...l},[...c.map(([e,r])=>(0,a.createElement)(e,r)),...Array.isArray(o)?o:[o]])),o=(e,r)=>{let t=(0,a.forwardRef)(({className:t,...n},o)=>(0,a.createElement)(d,{ref:o,iconNode:r,className:i(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,t),...n}));return t.displayName=s(e),t}},86277:(e,r,t)=>{"use strict";t.d(r,{$:()=>o});var a=t(95155);t(12115);var s=t(42442),i=t(18460),n=t(68310);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o({className:e,variant:r,size:t,asChild:i=!1,...o}){let c=i?s.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,n.cn)(d({variant:r,size:t,className:e})),...o})}}},e=>{e.O(0,[6609,8500,8894,8441,3794,7358],()=>e(e.s=64546)),_N_E=e.O()}]);