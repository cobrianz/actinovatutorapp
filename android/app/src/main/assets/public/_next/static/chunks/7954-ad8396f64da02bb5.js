"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7954],{79372:(e,s,a)=>{a.d(s,{A:()=>t});let t=(0,a(78340).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},94290:(e,s,a)=>{a.d(s,{A:()=>t});let t=(0,a(78340).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},97954:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var t=a(95155),r=a(12115),i=a(73321),l=a(42869),n=a(78340);let d=(0,n.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),c=(0,n.A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var o=a(79372);a(33210);var u=a(31069),g=a(94290),m=a(21362),x=a(41313),h=a(28393),p=a(71552),b=a(66609),f=a(5669);let y=(0,a(37206).default)(()=>a.e(1430).then(a.bind(a,1430)),{loadableGenerated:{webpack:()=>[1430]},ssr:!1}),w={difficulty:"adaptive",studyGoal:"balanced",sessionLength:25,breakLength:5};function j(){let e=(0,i.useRouter)(),{user:s,refreshToken:a,logout:n}=(0,h.h)(),{theme:j}=(0,p.D)(),[N,v]=(0,r.useState)("my-profile"),[k,S]=(0,r.useState)(!0),[P,A]=(0,r.useState)(!1),[z,$]=(0,r.useState)(null),[C,R]=(0,r.useState)(null),[L,E]=(0,r.useState)(!1),[M,U]=(0,r.useState)({firstName:"",lastName:""}),[F,O]=(0,r.useState)({current:"",new:"",confirm:""}),[V,G]=(0,r.useState)([]),[B,_]=(0,r.useState)({current:!1,new:!1,confirm:!1}),[q,D]=(0,r.useState)(null),[H,J]=(0,r.useState)({...w,emailNotifications:!0});(0,r.useEffect)(()=>{T()},[]),(0,r.useEffect)(()=>{if(C?.user?.settings){let{preferences:e,notifications:s}=C.user.settings;J(a=>({...a,difficulty:e?.difficulty||w.difficulty,sessionLength:e?.dailyGoal||w.sessionLength,theme:e?.theme||"system",language:e?.language||"en",emailNotifications:s?.email??!0,marketingEmails:s?.marketing??!0,studyReminders:s?.courseUpdates??!0}))}},[C]);let T=async()=>{try{S(!0),S(!0);let e=await (0,f.Ud)("/api/profile");if(e.ok){let s=await e.json();R(s)}else $("Failed to load profile")}catch(e){console.error("Profile fetch error:",e)}finally{S(!1)}},I=async()=>{var e;let s;if(F.new!==F.confirm){G(["Passwords do not match"]),b.oR.error("Passwords do not match");return}let a=(e=F.new,s=[],e.length<8&&s.push("Must be at least 8 characters"),/[A-Z]/.test(e)||s.push("Must contain an uppercase letter"),/[a-z]/.test(e)||s.push("Must contain a lowercase letter"),/[0-9]/.test(e)||s.push("Must contain a number"),/[@$!%*?&]/.test(e)||s.push("Must contain a special character (@$!%*?&)"),e.toLowerCase().includes("password")&&s.push("Cannot contain the word 'password'"),s);if(a.length){G(a),b.oR.error(a.join("; "));return}try{A(!0);let e=await (0,f.Ud)("/api/change-password",{method:"POST",body:JSON.stringify({currentPassword:F.current,newPassword:F.new,confirmPassword:F.confirm})});if(e.ok)O({current:"",new:"",confirm:""}),G([]),b.oR.success("Password changed successfully!");else{let s=await e.json().catch(()=>({})),a=Array.isArray(s?.details)?s.details.map(e=>e.message).filter(Boolean):[],t=a.length?a:[s.error||"Failed to change password"];G(t),b.oR.error(t.join("; "))}}catch(e){b.oR.error("Failed to change password"),console.error("Password change error:",e)}finally{A(!1)}},Z=async()=>{try{n(),b.oR.success("Successfully logged out"),e.push("/")}catch(s){console.error("Logout error:",s),n(),e.push("/")}},K=[{id:"my-profile",label:"Overview",icon:l.A},{id:"password",label:"Security",icon:d},{id:"settings",label:"Preferences",icon:c},{id:"billing",label:"Billing & Plan",icon:o.A}],Q=async()=>{try{A(!0);let e={notifications:{email:!!H.emailNotifications,marketing:!!H.marketingEmails,courseUpdates:!!H.studyReminders,push:!1},preferences:{theme:H.theme||"system",language:H.language||"en",difficulty:H.difficulty||"adaptive",dailyGoal:Number(H.sessionLength)||25},privacy:{profileVisible:!0,progressVisible:!1,achievementsVisible:!1}},s=await (0,f.Ud)("/api/settings/update",{method:"POST",body:JSON.stringify(e)});if(s.ok){let e=await s.json();b.oR.success(e.message||"Settings saved successfully")}else{let e=await s.json().catch(()=>({}));b.oR.error(e.error||"Failed to save settings")}}catch(e){console.error("Save settings error:",e),b.oR.error("Failed to save settings")}finally{A(!1)}};return(0,t.jsx)("div",{className:`min-h-screen pb-24 ${"dark"===j?"bg-gray-950 text-white":"bg-gray-50 text-gray-900"}`,children:(0,t.jsxs)("main",{className:"max-w-2xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:`p-6 rounded-[2.5rem] relative overflow-hidden transition-all duration-500 hover:shadow-indigo-500/20 ${"dark"===j?"bg-gray-900 border border-gray-800":"bg-white border border-gray-100"}`,children:[(0,t.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,t.jsx)("div",{className:`w-24 h-24 rounded-[2rem] flex items-center justify-center p-1 transform rotate-3 transition-transform hover:rotate-0 ${"dark"===j?"bg-indigo-900/40":"bg-indigo-50"}`,children:(0,t.jsx)("div",{className:"w-full h-full rounded-[1.8rem] flex items-center justify-center text-white text-3xl font-black bg-gradient-to-br from-indigo-600 to-purple-600 overflow-hidden",children:C?.usage?.isPremium&&s?.image?(0,t.jsx)("img",{src:s.image,alt:"Avatar",className:"w-full h-full object-cover"}):C?.usage?.isPremium?(0,t.jsx)(u.A,{size:36,className:"text-white drop-shadow-lg"}):(0,t.jsx)(l.A,{size:36,className:"text-white"})})}),(0,t.jsx)("h1",{className:"text-2xl font-black mb-1",children:C?.user?.firstName?`${C.user.firstName} ${C.user.lastName}`:s?.name||"Actinova User"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:C?.user?.email||s?.email}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)("span",{className:`px-4 py-1.5 rounded-2xl text-[10px] font-bold uppercase tracking-wider flex items-center gap-1.5 ${C?.usage?.isPremium?"bg-amber-100 text-amber-700 border border-amber-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:[C?.usage?.isPremium?(0,t.jsx)(u.A,{size:12}):(0,t.jsx)(g.A,{size:12}),C?.usage?.isPremium?"Pro Member":"Free Explorer"]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-8 pt-8 border-t border-gray-100 dark:border-gray-800",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xl font-black",children:C?.usage?.details?.courses?.used||0}),(0,t.jsx)("div",{className:"text-[10px] uppercase text-gray-500 font-bold tracking-widest",children:"Courses"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xl font-black",children:C?.usage?.details?.flashcards?.used||0}),(0,t.jsx)("div",{className:"text-[10px] uppercase text-gray-500 font-bold tracking-widest",children:"Cards"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3 mt-10",children:[K.map(e=>{let s=e.icon,a=N===e.id;return(0,t.jsxs)("button",{onClick:()=>v(e.id),className:`w-full flex items-center justify-between p-3.5 rounded-2xl transition-all ${a?"bg-indigo-600 text-white":"dark"===j?"bg-gray-900 border border-gray-800 text-gray-300":"bg-white border border-gray-100 text-gray-700"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${a?"bg-white/20":"dark"===j?"bg-gray-800":"bg-gray-50"}`,children:(0,t.jsx)(s,{size:20,className:a?"text-white":"text-indigo-600"})}),(0,t.jsx)("span",{className:"font-bold text-sm tracking-tight",children:e.label})]}),(0,t.jsx)(m.A,{size:18,className:a?"text-white/50":"text-gray-400"})]},e.id)}),(0,t.jsxs)("button",{onClick:Z,className:`w-full flex items-center justify-between p-3.5 rounded-2xl transition-all ${"dark"===j?"bg-red-900/10 border border-red-900/20 text-red-400":"bg-red-50 border border-red-100 text-red-600"} mt-6`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${"dark"===j?"bg-red-950/40":"bg-red-100/50"}`,children:(0,t.jsx)(x.A,{size:20})}),(0,t.jsx)("span",{className:"font-bold text-sm tracking-tight",children:"Sign Out"})]}),(0,t.jsx)(m.A,{size:18,className:"opacity-40"})]})]}),(0,t.jsxs)("div",{className:`mt-8 p-6 rounded-3xl ${"dark"===j?"bg-gray-900 border border-gray-800":"bg-white border border-gray-100"}`,children:["my-profile"===N&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-lg font-black uppercase tracking-widest mb-4",children:"Account Usage"}),(0,t.jsx)("div",{className:"space-y-5",children:[{label:"Learning Courses",used:C?.usage?.details?.courses?.used,limit:C?.usage?.details?.courses?.limit,color:"bg-blue-500"},{label:"Flashcards",used:C?.usage?.details?.flashcards?.used,limit:C?.usage?.details?.flashcards?.limit,color:"bg-purple-500"},{label:"Assessments",used:C?.usage?.details?.quizzes?.used,limit:C?.usage?.details?.quizzes?.limit,color:"bg-emerald-500"}].map((e,s)=>{let a=e.limit?e.used/e.limit*100:100;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs font-bold",children:[(0,t.jsx)("span",{className:"text-gray-500 uppercase",children:e.label}),(0,t.jsxs)("span",{children:[e.used," / ",e.limit||"∞"]})]}),(0,t.jsx)("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full ${e.color} transition-all duration-1000`,style:{width:`${a}%`}})})]},s)})}),(0,t.jsx)("div",{className:"mt-8 p-4 rounded-2xl bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/50",children:(0,t.jsxs)("p",{className:"text-[10px] text-indigo-700 dark:text-indigo-300 font-bold uppercase tracking-widest text-center",children:["Reset: ",C?.usage?.resetDate||"1st of month"]})})]}),"password"===N&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-lg font-black uppercase tracking-widest mb-4",children:"Security"}),(0,t.jsxs)("div",{className:"space-y-4",children:[["current","new","confirm"].map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-[10px] font-bold uppercase text-gray-500 mb-1.5 ml-1",children:[e," Password"]}),(0,t.jsx)("input",{type:"password",value:F[e],onChange:s=>O({...F,[e]:s.target.value}),className:`w-full px-4 py-3 rounded-2xl border text-sm focus:ring-2 focus:ring-indigo-500 outline-none transition-all ${"dark"===j?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-100"}`,placeholder:"••••••••"})]},e)),(0,t.jsx)("button",{onClick:I,disabled:P,className:"w-full py-3 bg-indigo-600 text-white rounded-2xl font-black text-sm uppercase tracking-widest active:scale-[0.98] transition-all",children:P?"Updating...":"Update Security"})]})]}),"settings"===N&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("h2",{className:"text-lg font-black uppercase tracking-widest mb-4",children:"Preferences"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold uppercase text-gray-500 mb-1.5 ml-1",children:"Learning Difficulty"}),(0,t.jsxs)("select",{value:H.difficulty,onChange:e=>J({...H,difficulty:e.target.value}),className:`w-full px-4 py-3 rounded-2xl border text-sm ${"dark"===j?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-100"}`,children:[(0,t.jsx)("option",{value:"beginner",children:"Beginner"}),(0,t.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,t.jsx)("option",{value:"adaptive",children:"Adaptive"})]})]}),(0,t.jsxs)("div",{className:`p-4 rounded-2xl flex items-center justify-between ${"dark"===j?"bg-gray-800":"bg-gray-50"}`,children:[(0,t.jsx)("span",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Email Notifications"}),(0,t.jsx)("input",{type:"checkbox",checked:H.emailNotifications,onChange:e=>J({...H,emailNotifications:e.target.checked}),className:"w-6 h-6 rounded-lg accent-indigo-600"})]}),(0,t.jsx)("button",{onClick:Q,disabled:P,className:"w-full py-3 bg-indigo-600 text-white rounded-2xl font-black text-sm uppercase tracking-widest active:scale-[0.98] transition-all",children:"Save Settings"})]})]}),"billing"===N&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-lg font-black uppercase tracking-widest mb-4 text-center",children:"Subscription"}),(0,t.jsx)("div",{className:"p-8 rounded-3xl relative overflow-hidden bg-indigo-600 text-white mb-8",children:(0,t.jsxs)("div",{className:"relative z-10 text-center",children:[(0,t.jsx)("span",{className:"px-3 py-1 bg-white/20 rounded-full text-[10px] font-bold uppercase tracking-widest",children:"Active Plan"}),(0,t.jsx)("h3",{className:"text-3xl font-black mt-4 uppercase",children:C?.usage?.isPremium?"Pro Elite":"Free Starter"}),!C?.usage?.isPremium&&(0,t.jsx)("button",{onClick:()=>e.push("/dashboard?tab=upgrade"),className:"mt-6 px-6 py-2.5 bg-white text-indigo-600 rounded-2xl font-black text-xs uppercase tracking-widest",children:"Go Pro Now"})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-sm font-black uppercase tracking-widest text-gray-500 ml-1",children:"Billing History"}),(0,t.jsx)(y,{billingHistory:C?.user?.billingHistory,theme:j})]})]})]})]})})}}}]);