"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9776],{14858:(e,s,t)=>{t.d(s,{S:()=>d});var a=t(95155);t(12115);var r=t(47279),i=t(94514),l=t(68310);function d({className:e,...s}){return(0,a.jsx)(r.bL,{"data-slot":"checkbox",className:(0,l.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:(0,a.jsx)(r.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,a.jsx)(i.A,{className:"size-3.5"})})})}},46424:(e,s,t)=>{t.d(s,{C:()=>n,z:()=>d});var a=t(95155);t(12115);var r=t(31620),i=t(16950),l=t(68310);function d({className:e,...s}){return(0,a.jsx)(r.bL,{"data-slot":"radio-group",className:(0,l.cn)("grid gap-3",e),...s})}function n({className:e,...s}){return(0,a.jsx)(r.q7,{"data-slot":"radio-group-item",className:(0,l.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:(0,a.jsx)(r.C1,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}},50807:(e,s,t)=>{t.d(s,{Wu:()=>n,ZB:()=>d,Zp:()=>i,aR:()=>l});var a=t(95155);t(12115);var r=t(68310);function i({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function l({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function d({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...s})}},54045:(e,s,t)=>{t.d(s,{J:()=>l});var a=t(95155);t(12115);var r=t(91760),i=t(68310);function l({className:e,...s}){return(0,a.jsx)(r.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}},68310:(e,s,t)=>{t.d(s,{cn:()=>i});var a=t(29722),r=t(622);function i(...e){return(0,r.QP)((0,a.$)(e))}},86277:(e,s,t)=>{t.d(s,{$:()=>n});var a=t(95155);t(12115);var r=t(42442),i=t(18460),l=t(68310);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function n({className:e,variant:s,size:t,asChild:i=!1,...n}){let o=i?r.DX:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,l.cn)(d({variant:s,size:t,className:e})),...n})}},99776:(e,s,t)=>{t.d(s,{A:()=>j});var a=t(95155),r=t(12115),i=t(86277),l=t(50807),d=t(46424),n=t(14858),o=t(54045),c=t(66609),x=t(80723),m=t(52484),u=t(62791),g=t(6962),h=t(7915),b=t(98500),p=t.n(b);t(28393);var f=t(30913),v=t(5669);let j=({quizData:e,topic:s,onBack:t,existingQuizId:b})=>{let j,y,N,k,[w,$]=(0,r.useState)({}),[S,_]=(0,r.useState)(!1),[C,z]=(0,r.useState)(0),[q,A]=(0,r.useState)(!1),[I,E]=(0,r.useState)(!1),[J,O]=(0,r.useState)(1),[T,M]=(0,r.useState)([]),[P,F]=(0,r.useState)(10),[D,L]=(0,r.useState)(!1),[Q,R]=(0,r.useState)(0),[B,V]=(0,r.useState)(!1),[Z,W]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let s=b||e._id;if(s){let e=`quiz_completed_${s}`,t=localStorage.getItem(e);t&&(z(parseInt(t)),_(!0),A(!0))}E(!0)},[e._id,b]),(0,r.useEffect)(()=>{e.questions&&e.questions.length>0&&(M(e.questions.slice(0,10)),F(e.questions.length),R(2*e.questions.length*60),V(!0))},[e.questions]),(0,r.useEffect)(()=>{let e;return B&&Q>0&&!S&&(e=setInterval(()=>{R(e=>e<=1?(X(),0):e-1)},1e3)),()=>clearInterval(e)},[B,Q,S]),(0,r.useEffect)(()=>{if(T.length>0){W(!1);let e=setTimeout(()=>W(!0),50);return()=>clearTimeout(e)}},[T]);let Y=(e,s)=>{$(t=>({...t,[e]:s}))},H=async s=>{let t=Math.min((s-1)*10+10,P);if(!(T.length>=t)&&e.questions&&e.questions.length>=t){L(!0),await new Promise(e=>setTimeout(e,800));let s=e.questions.slice(T.length,t);M(e=>[...e,...s]),L(!1)}},U=e=>{O(e),H(e)},X=async()=>{let s=0;T.forEach(e=>{JSON.stringify(w[e._id])===JSON.stringify(e.correctAnswer)&&(s+=e.points)}),z(s),_(!0),A(!0),V(!1);let t=b||e._id;if(t){let e=`quiz_completed_${t}`;localStorage.setItem(e,s.toString())}t&&"string"==typeof t&&t.length>0&&/^[a-f\d]{24}$/i.test(t)?(console.log("Saving performance for quiz ID:",t),(0,v.Ud)(`/api/quizzes/${t}/performance`,{method:"POST",body:JSON.stringify({score:s,totalMarks:T.reduce((e,s)=>e+s.points,0),answers:w})}).then(async e=>{if(e.ok)console.log("Performance data saved successfully");else{let s=await e.json().catch(()=>({}));console.error("Failed to save performance data:",e.status,e.statusText,s)}}).catch(e=>{console.error("Error saving performance:",e)})):console.warn("Quiz ID not available or invalid, skipping performance save"),c.toast.success(`Test completed! Your score is ${s}.`)};if(!e||!e.questions)return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading test..."})});let G=e.questions.reduce((e,s)=>e+s.points,0);return(0,a.jsx)("div",{className:`p-4 sm:p-8 lg:p-12 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen transition-opacity duration-700 pb-32 pb-safe-bottom pt-safe-top ${I?"opacity-100":"opacity-0"}`,children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[t?(0,a.jsxs)("button",{onClick:t,className:"flex items-center text-sm text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-6",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-1"}),"Back"]}):(0,a.jsxs)(p(),{href:"/dashboard?tab=quizzes",className:"flex items-center text-sm text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-6",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-1"}),"Back"]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:e.title}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center",children:[(0,a.jsx)("span",{className:"text-xs font-semibold text-gray-400 tracking-wider mb-1",children:"Questions"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[T.length,(0,a.jsxs)("span",{className:"text-gray-400 text-sm font-normal",children:["/",P]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center",children:[(0,a.jsx)("span",{className:"text-xs font-semibold text-gray-400 tracking-wider mb-1",children:"Points"}),(0,a.jsx)("div",{className:"text-xl font-bold text-indigo-600 dark:text-indigo-400",children:T.reduce((e,s)=>e+s.points,0)})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center",children:[(0,a.jsx)("span",{className:"text-xs font-semibold text-gray-400 tracking-wider mb-1",children:"Answered"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:[Object.keys(w).length,(0,a.jsxs)("span",{className:"text-gray-400 text-sm font-normal",children:["/",T.length]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center",children:[(0,a.jsx)("span",{className:"text-xs font-semibold text-gray-400 tracking-wider mb-1",children:"Time Left"}),(0,a.jsx)("div",{className:`text-xl font-bold font-mono ${Q<300?"text-red-500 animate-pulse":"text-gray-900 dark:text-white"}`,children:(j=Math.floor(Q/3600),y=Math.floor(Q%3600/60),N=Q%60,j>0?`${j}:${y.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`:`${y}:${N.toString().padStart(2,"0")}`)})]})]}),(0,a.jsxs)("div",{className:"w-full my-10",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400 mb-3",children:[(0,a.jsxs)("span",{className:"font-bold",children:["Progress (Page ",J,"/",Math.ceil(P/10),")"]}),(0,a.jsxs)("span",{className:"font-bold",children:[Math.round(Object.keys(w).length/T.length*100),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full transition-all duration-300",style:{width:`${Object.keys(w).length/T.length*100}%`}})})]})]}),(0,a.jsx)(l.Zp,{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-sm",children:(0,a.jsxs)(l.Wu,{className:"space-y-12",children:[(0,a.jsx)("div",{className:"space-y-10",children:(k=(J-1)*10,T.slice(k,k+10)).map((e,s)=>{let t=(J-1)*10+s;return(0,a.jsxs)("div",{className:`sm:p-4 bg-white dark:bg-gray-800/50 transition-opacity duration-500 ${Z?"opacity-100":"opacity-0"}`,children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 w-fit flex items-center justify-center text-white font-bold",children:[t+1,"."]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-md font-normal text-slate-800 dark:text-slate-100 leading-relaxed mb-2 select-none",children:e.text}),(0,a.jsx)("div",{className:"flex items-center space-x-2 text-sm text-slate-500 dark:text-slate-400",children:(0,a.jsxs)("span",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-700 rounded-full font-medium",children:[e.points," point",1!==e.points?"s":""]})})]})]}),"multiple-choice"===e.type?(0,a.jsx)(d.z,{onValueChange:s=>Y(e._id,s),disabled:S,className:"space-y-3",children:e.options.map((s,t)=>(0,a.jsxs)("div",{className:"text-sm flex items-center space-x-2 p-2 rounded-sm border-1 border-slate-200 dark:border-slate-600 hover:border-blue-300 dark:hover:border-blue-500 transition-all duration-200 group cursor-pointer",children:[(0,a.jsx)(d.C,{value:s,id:`${e._id}-${s}`,className:"w-5 h-5 text-blue-600"}),(0,a.jsxs)(o.J,{htmlFor:`${e._id}-${s}`,className:"flex-1 cursor-pointer text-slate-700 dark:text-slate-300 text-[14px] leading-relaxed group-hover:text-slate-900 dark:group-hover:text-slate-100 select-none px-2",children:[(0,a.jsxs)("span",{className:"font-bold mr-2 text-slate-500 dark:text-slate-400",children:[String.fromCharCode(65+t),"."]}),s]})]},s))}):"true-false"===e.type?(0,a.jsx)(d.z,{onValueChange:s=>Y(e._id,s),disabled:S,className:"space-y-3",children:e.options.map((s,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-xl border-2 border-slate-200 dark:border-slate-600 hover:border-green-300 dark:hover:border-green-500 transition-all duration-200 group cursor-pointer",children:[(0,a.jsx)(d.C,{value:s,id:`${e._id}-${s}`,className:"w-5 h-5 text-green-600"}),(0,a.jsxs)(o.J,{htmlFor:`${e._id}-${s}`,className:"flex-1 cursor-pointer text-slate-700 dark:text-slate-300 text-[14px] leading-relaxed group-hover:text-slate-900 dark:group-hover:text-slate-100 select-none px-2",children:[(0,a.jsxs)("span",{className:"font-bold mr-2 text-slate-500 dark:text-slate-400",children:[String.fromCharCode(65+t),"."]}),s]})]},s))}):(0,a.jsx)("div",{className:"space-y-3",children:e.options.map((s,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-xl border-2 border-slate-200 dark:border-slate-600 hover:border-purple-300 dark:hover:border-purple-500 transition-all duration-200 group cursor-pointer",children:[(0,a.jsx)(n.S,{id:`${e._id}-${s}`,onCheckedChange:t=>{let a=w[e._id]||[],r=t?[...a,s]:a.filter(e=>e!==s);Y(e._id,r)},disabled:S,className:"w-5 h-5 text-purple-600"}),(0,a.jsxs)(o.J,{htmlFor:`${e._id}-${s}`,className:"flex-1 cursor-pointer text-slate-700 dark:text-slate-300 text-[14px] leading-relaxed group-hover:text-slate-900 dark:group-hover:text-slate-100 select-none px-2",children:[(0,a.jsxs)("span",{className:"font-bold mr-2 text-slate-500 dark:text-slate-400",children:[String.fromCharCode(65+t),"."]}),s]})]},s))}),S&&q&&(0,a.jsx)("div",{className:"mt-4 px-2",children:JSON.stringify(w[e._id])===JSON.stringify(e.correctAnswer)?(0,a.jsxs)("div",{className:"flex items-center text-green-600 dark:text-green-400 space-x-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-bold",children:"Correct!"})]}):(0,a.jsxs)("div",{className:"flex items-start text-red-600 dark:text-red-400 space-x-2",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-bold",children:"Incorrect."}),(0,a.jsxs)("div",{className:"text-gray-500 dark:text-gray-400 mt-1 text-xs",children:["Correct answer:"," ",(0,a.jsx)("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:Array.isArray(e.correctAnswer)?e.correctAnswer.join(", "):e.correctAnswer})]})]})]})})]},`question-${t}`)})}),S?(0,a.jsxs)("div",{className:"mt-8 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Test Complete!"}),(0,a.jsxs)("p",{className:"text-xl mt-2",children:["Your score:"," ",(0,a.jsx)("span",{className:"font-bold text-blue-500",children:C})," /"," ",G]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap gap-4 justify-center mt-10",children:[(0,a.jsx)(i.$,{onClick:()=>{if($({}),_(!1),A(!1),z(0),O(1),M(e.questions.slice(0,10)),F(e.questions.length),R(2*e.questions.length*60),V(!0),e._id){let s=`quiz_completed_${e._id}`;localStorage.removeItem(s)}},variant:"outline",className:"flex-1 min-w-[140px] px-4 py-2 rounded-sm border-2 border-slate-200 font-bold hover:bg-slate-50 transition-all active:scale-95",children:"Retake Test"}),(0,a.jsxs)(i.$,{onClick:()=>(0,f.Iu)(e),variant:"secondary",className:"flex-1 min-w-[140px] px-4 py-2 rounded-sm bg-indigo-600 hover:bg-indigo-700 text-white border-none transition-all shadow-md hover:shadow-lg active:scale-95 flex items-center justify-center gap-2",children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),"Download Exam"]}),(0,a.jsxs)(i.$,{onClick:()=>A(!q),variant:"default",className:"flex-1 min-w-[140px] px-4 py-2 rounded-sm bg-slate-900 dark:bg-slate-800 text-white hover:bg-slate-800 dark:hover:bg-slate-700 transition-all active:scale-95 flex items-center justify-center gap-2",children:[q?(0,a.jsx)(u.A,{className:"w-4 h-4"}):(0,a.jsx)(h.A,{className:"w-4 h-4"}),q?"Hide Review":"Review Answers"]})]})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-4",children:[(0,a.jsx)(i.$,{onClick:()=>U(J-1),disabled:1===J||D,variant:"outline",size:"sm",children:"Previous"}),(0,a.jsx)("div",{className:"flex space-x-2",children:Array.from({length:Math.ceil(P/10)},(e,s)=>s+1).map(e=>(0,a.jsx)(i.$,{onClick:()=>U(e),variant:J===e?"default":"outline",size:"sm",disabled:D,className:"w-10 h-10",children:e},e))}),(0,a.jsx)(i.$,{onClick:()=>U(J+1),disabled:J===Math.ceil(P/10)||D,variant:"outline",size:"sm",children:"Next"})]}),D&&(0,a.jsx)("div",{className:"space-y-10",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"p-8 bg-white dark:bg-gray-800/50 rounded-2xl border border-slate-200/50 dark:border-gray-700 animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4 mb-6",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-xl"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"h-5 bg-gray-300 dark:bg-gray-600 rounded mb-3"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-6 w-16 bg-gray-300 dark:bg-gray-600 rounded-full"}),(0,a.jsx)("div",{className:"h-6 w-20 bg-gray-300 dark:bg-gray-600 rounded-full"})]})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-xl border-2 border-slate-200 dark:border-slate-600",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-gray-300 dark:bg-gray-600 rounded"}),(0,a.jsx)("div",{className:"flex-1 h-4 bg-gray-300 dark:bg-gray-600 rounded"})]},s))})]},`skeleton-${s}`))}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 sm:gap-6 mt-12 pb-8",children:[(0,a.jsx)(i.$,{onClick:t||(()=>window.history.back()),variant:"outline",size:"lg",className:"w-full sm:w-auto px-12 py-2 text-lg border-2 border-slate-200 hover:border-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all duration-200 rounded-xl font-bold text-slate-600 active:scale-95",children:"Cancel Quiz"}),(0,a.jsx)(i.$,{onClick:X,size:"lg",className:"w-full sm:w-auto px-12 py-2 text-lg bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white hover:shadow-xl transition-all duration-200 rounded-xl font-bold active:scale-95 shadow-lg shadow-blue-500/20",children:"Submit Assessment"})]})]})]})})]})})}}}]);