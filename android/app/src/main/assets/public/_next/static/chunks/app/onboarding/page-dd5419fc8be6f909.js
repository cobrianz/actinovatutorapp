(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{5669:(e,t,r)=>{"use strict";r.d(t,{Ud:()=>o,e9:()=>s});var a=r(41463);let i=!!window.Capacitor||"capacitor:"===window.location.protocol||"localhost"===window.location.hostname&&"3000"!==window.location.port&&"3001"!==window.location.port,l=a.env.NEXT_PUBLIC_API_URL||"https://actinovatutorapp.vercel.app";function s(e){if(!e)return l;if(e.startsWith("http://")||e.startsWith("https://"))return e;let t=e.startsWith("/")?e:`/${e}`;return i?`${l}${t}`:t}async function o(e,t={}){let r=s(e),a={"Content-Type":"application/json",...t.headers};if(i){let e=localStorage.getItem("auth_token");return e&&(a.Authorization=`Bearer ${e}`),fetch(r,{...t,headers:a,credentials:"omit"})}return fetch(r,{...t,headers:a,credentials:"include"})}},7810:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},11771:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var a=r(95155),i=r(12115),l=r(47936),s=r(78340);let o=(0,s.A)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),n=(0,s.A)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]),c=(0,s.A)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),d=(0,s.A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var u=r(44071),g=r(90718);let h=(0,s.A)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),y=(0,s.A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),p=(0,s.A)("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);var b=r(97810),m=r(96035);let f=(0,s.A)("flask-round",[["path",{d:"M10 2v6.292a7 7 0 1 0 4 0V2",key:"1s42pc"}],["path",{d:"M5 15h14",key:"m0yey3"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]),k=(0,s.A)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);var v=r(84980);let x=(0,s.A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),w=(0,s.A)("chef-hat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);var A=r(42869),j=r(7810);let S=(0,s.A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);var M=r(31885),N=r(94514),C=r(21362),E=r(73321),H=r(66609),P=r(5669),T=r(28393);let L=[{id:"interests",title:"What are you interested in learning?",description:"Select all topics that interest you. We'll personalize your learning experience.",icon:o,fields:[{id:"programming",label:"Programming & Development",icon:n,category:"Technology"},{id:"design",label:"Design & Creative Arts",icon:c,category:"Design"},{id:"business",label:"Business & Entrepreneurship",icon:d,category:"Business"},{id:"data-science",label:"Data Science & Analytics",icon:u.A,category:"Data Science"},{id:"ai-ml",label:"AI & Machine Learning",icon:g.A,category:"AI & ML"},{id:"music",label:"Music & Audio",icon:h,category:"Creative"},{id:"photography",label:"Photography & Videography",icon:y,category:"Creative"},{id:"gaming",label:"Game Development",icon:p,category:"Technology"},{id:"writing",label:"Writing & Literature",icon:b.A,category:"Humanities"},{id:"languages",label:"Foreign Languages",icon:m.A,category:"Languages"},{id:"science",label:"Natural Sciences",icon:f,category:"Science"},{id:"math",label:"Mathematics",icon:k,category:"Mathematics"},{id:"history",label:"History & Social Studies",icon:v.A,category:"Humanities"},{id:"health",label:"Health & Wellness",icon:o,category:"Health"},{id:"finance",label:"Finance & Investing",icon:x,category:"Business"},{id:"cooking",label:"Cooking & Culinary Arts",icon:w,category:"Lifestyle"},{id:"fitness",label:"Fitness & Exercise",icon:o,category:"Health"},{id:"meditation",label:"Meditation & Mindfulness",icon:g.A,category:"Health"},{id:"gardening",label:"Gardening & Horticulture",icon:b.A,category:"Lifestyle"},{id:"crafts",label:"Arts & Crafts",icon:c,category:"Creative"},{id:"psychology",label:"Psychology & Mental Health",icon:g.A,category:"Health"},{id:"philosophy",label:"Philosophy & Ethics",icon:b.A,category:"Humanities"},{id:"economics",label:"Economics & Finance",icon:x,category:"Business"},{id:"marketing",label:"Marketing & Advertising",icon:u.A,category:"Business"},{id:"project-management",label:"Project Management",icon:d,category:"Business"},{id:"leadership",label:"Leadership & Management",icon:A.A,category:"Business"},{id:"public-speaking",label:"Public Speaking & Communication",icon:m.A,category:"Business"},{id:"entrepreneurship",label:"Entrepreneurship & Startups",icon:d,category:"Business"},{id:"real-estate",label:"Real Estate & Property",icon:x,category:"Business"},{id:"investing",label:"Investing & Trading",icon:x,category:"Business"},{id:"accounting",label:"Accounting & Bookkeeping",icon:k,category:"Business"},{id:"law",label:"Law & Legal Studies",icon:b.A,category:"Humanities"},{id:"politics",label:"Politics & Government",icon:b.A,category:"Humanities"},{id:"sociology",label:"Sociology & Anthropology",icon:j.A,category:"Humanities"},{id:"geography",label:"Geography & Travel",icon:b.A,category:"Humanities"},{id:"religion",label:"Religion & Theology",icon:b.A,category:"Humanities"},{id:"art-history",label:"Art History & Appreciation",icon:c,category:"Creative"},{id:"dance",label:"Dance & Movement",icon:h,category:"Creative"},{id:"theater",label:"Theater & Acting",icon:j.A,category:"Creative"},{id:"fashion",label:"Fashion & Style",icon:c,category:"Creative"},{id:"interior-design",label:"Interior Design",icon:c,category:"Design"},{id:"architecture",label:"Architecture",icon:d,category:"Design"},{id:"engineering",label:"Engineering",icon:f,category:"Science"},{id:"medicine",label:"Medicine & Healthcare",icon:o,category:"Health"},{id:"nursing",label:"Nursing & Caregiving",icon:o,category:"Health"},{id:"nutrition",label:"Nutrition & Dietetics",icon:o,category:"Health"},{id:"veterinary",label:"Veterinary Science",icon:o,category:"Health"},{id:"astronomy",label:"Astronomy & Space",icon:f,category:"Science"},{id:"geology",label:"Geology & Earth Sciences",icon:f,category:"Science"},{id:"environmental",label:"Environmental Science",icon:f,category:"Science"},{id:"agriculture",label:"Agriculture & Farming",icon:b.A,category:"Science"},{id:"aviation",label:"Aviation & Piloting",icon:u.A,category:"Technology"},{id:"automotive",label:"Automotive & Mechanics",icon:d,category:"Technology"},{id:"construction",label:"Construction & Trades",icon:d,category:"Technology"},{id:"electrician",label:"Electrical Work",icon:d,category:"Technology"},{id:"plumbing",label:"Plumbing & HVAC",icon:d,category:"Technology"},{id:"welding",label:"Welding & Metalwork",icon:d,category:"Technology"},{id:"woodworking",label:"Woodworking & Carpentry",icon:d,category:"Technology"}]},{id:"age-group",title:"What's your age group?",description:"This helps us tailor content appropriate for your age and experience level.",icon:A.A,fields:[{id:"under-18",label:"Under 18",description:"Student or young learner"},{id:"18-24",label:"18-24",description:"Young adult, college student"},{id:"25-34",label:"25-34",description:"Early career professional"},{id:"35-44",label:"35-44",description:"Mid-career professional"},{id:"45-54",label:"45-54",description:"Experienced professional"},{id:"55+",label:"55+",description:"Senior learner"}]},{id:"education-level",title:"What's your current education level?",description:"Help us recommend courses that match your background knowledge.",icon:S,fields:[{id:"high-school",label:"High School",description:"Currently in high school or equivalent"},{id:"some-college",label:"Some College",description:"Started college but didn't complete"},{id:"associates",label:"Associate's Degree",description:"2-year degree completed"},{id:"bachelors",label:"Bachelor's Degree",description:"4-year degree completed"},{id:"masters",label:"Master's Degree",description:"Graduate degree completed"},{id:"phd",label:"PhD or Higher",description:"Doctorate or advanced degree"},{id:"self-taught",label:"Self-Taught",description:"Learned through personal projects"}]},{id:"skill-level",title:"What's your current skill level?",description:"Help us recommend courses at the right difficulty for you.",icon:u.A,fields:[{id:"beginner",label:"Beginner",description:"Just starting out"},{id:"intermediate",label:"Intermediate",description:"Some experience"},{id:"advanced",label:"Advanced",description:"Looking to master skills"}]},{id:"goals",title:"What are your learning goals?",description:"Select what you want to achieve (you can choose multiple).",icon:b.A,fields:[{id:"career-change",label:"Career Change",description:"Switch to a new field"},{id:"skill-upgrade",label:"Skill Upgrade",description:"Advance in current role"},{id:"personal-project",label:"Personal Project",description:"Build something new"},{id:"certification",label:"Get Certified",description:"Earn credentials"},{id:"hobby",label:"Hobby & Fun",description:"Learn for enjoyment"},{id:"startup",label:"Start a Business",description:"Entrepreneurship goals"},{id:"teaching",label:"Teach Others",description:"Share knowledge with others"},{id:"research",label:"Academic Research",description:"Conduct research or studies"}]},{id:"learning-style",title:"What's your preferred learning style?",description:"Different people learn best in different ways. Tell us how you prefer to learn.",icon:M.A,fields:[{id:"visual",label:"Visual",description:"Diagrams, videos, images"},{id:"auditory",label:"Auditory",description:"Lectures, discussions, podcasts"},{id:"reading",label:"Reading/Writing",description:"Books, articles, notes"},{id:"kinesthetic",label:"Hands-on",description:"Practice, projects, experiments"},{id:"mixed",label:"Mixed",description:"Combination of different styles"}]},{id:"time-commitment",title:"How much time can you commit?",description:"This helps us suggest courses that fit your schedule.",icon:v.A,fields:[{id:"1-3",label:"1-3 hours/week",description:"Light learning"},{id:"4-7",label:"4-7 hours/week",description:"Moderate pace"},{id:"8-15",label:"8-15 hours/week",description:"Intensive learning"},{id:"15+",label:"15+ hours/week",description:"Full-time commitment"}]}];function O({onComplete:e}){let t=(0,E.useRouter)(),{setUserData:r}=(0,T.h)(),[s,o]=(0,i.useState)(0),[n,c]=(0,i.useState)([]),[d,u]=(0,i.useState)(""),[g,h]=(0,i.useState)(""),[y,p]=(0,i.useState)(""),[b,m]=(0,i.useState)([]),[f,k]=(0,i.useState)(""),[v,x]=(0,i.useState)(""),[w,A]=(0,i.useState)(!1),j=L[s],S=s===L.length-1,M=()=>{switch(j.id){case"interests":return n.length>0;case"age-group":return""!==d;case"education-level":return""!==g;case"skill-level":return""!==y;case"goals":return b.length>0;case"learning-style":return""!==f;case"time-commitment":return""!==v;default:return!1}},O=async()=>{A(!0);try{let a=(e=>{if("undefined"==typeof document)return null;let t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length?t.pop().split(";").shift():null})("csrfToken"),i=L.find(e=>"interests"===e.id),l=n.map(e=>{let t=i?.fields.find(t=>t.id===e);return t?.category}).filter(Boolean),s={interests:n,interestCategories:[...new Set(l)],ageGroup:d,educationLevel:g,skillLevel:y,goals:b,learningStyle:f,timeCommitment:v,onboardingCompleted:!0},o=await (0,P.Ud)("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":a||""},body:JSON.stringify(s)});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||"Failed to save profile")}let c=await o.json();r(c.user),H.toast.success("Profile saved! Let's start learning!"),e?e():t.push("/dashboard")}catch(e){console.error("[Onboarding] Error saving profile:",e),H.toast.error(e.message||"Failed to save profile. Please try again.")}finally{A(!1)}},B=j.icon;return(0,a.jsxs)("div",{className:"relative flex items-center justify-center min-h-screen p-4 overflow-hidden pt-safe-top pb-safe-bottom",children:[(0,a.jsx)("div",{className:"absolute top-10 left-10 w-16 h-16 bg-blue-500/10 dark:bg-blue-400/10 rounded-full blur-xl"}),(0,a.jsx)("div",{className:"absolute top-32 right-20 w-20 h-20 bg-purple-500/10 dark:bg-purple-400/10 rounded-full blur-xl"}),(0,a.jsx)("div",{className:"absolute bottom-20 left-32 w-24 h-24 bg-pink-500/10 dark:bg-pink-400/10 rounded-full blur-xl"}),(0,a.jsx)("div",{className:"absolute bottom-32 right-16 w-16 h-16 bg-indigo-500/10 dark:bg-indigo-400/10 rounded-full blur-xl"}),(0,a.jsx)("div",{className:"absolute top-1/4 left-1/4 w-12 h-12 bg-blue-400/20 dark:bg-blue-300/20 rounded-full blur-md"}),(0,a.jsx)("div",{className:"absolute top-1/3 right-1/3 w-10 h-10 bg-purple-400/20 dark:bg-purple-300/20 rounded-full blur-md"}),(0,a.jsx)("div",{className:"absolute bottom-1/4 left-1/3 w-14 h-14 bg-pink-400/20 dark:bg-pink-300/20 rounded-full blur-md"}),(0,a.jsx)("div",{className:"absolute top-20 right-1/4 w-6 h-6 bg-blue-300/30 dark:bg-blue-200/30 rounded-full blur-sm"}),(0,a.jsx)("div",{className:"absolute top-1/2 left-20 w-8 h-8 bg-purple-300/30 dark:bg-purple-200/30 rounded-full blur-sm"}),(0,a.jsx)("div",{className:"absolute bottom-1/3 right-1/4 w-5 h-5 bg-indigo-300/30 dark:bg-indigo-200/30 rounded-full blur-sm"}),(0,a.jsx)("div",{className:"absolute top-40 left-1/2 w-7 h-7 bg-pink-300/30 dark:bg-pink-200/30 rounded-full blur-sm"}),(0,a.jsx)("div",{className:"absolute bottom-40 right-1/3 w-6 h-6 bg-purple-300/30 dark:bg-purple-200/30 rounded-full blur-sm"}),(0,a.jsxs)(l.P.div,{className:"bg-transparent dark:bg-gray-800 rounded-2xl max-w-5xl w-full max-h-[90vh] relative z-10 flex flex-col overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsxs)("div",{className:"bg-transparent dark:bg-gray-800 p-6 rounded-t-2xl flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center mb-4 text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center mb-3",children:(0,a.jsx)(B,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:j.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Step ",s+1," of ",L.length]})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,a.jsx)(l.P.div,{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full",initial:{width:0},animate:{width:`${(s+1)/L.length*100}%`},transition:{duration:.3}})})]}),(0,a.jsxs)("div",{className:"p-6 overflow-y-auto flex-1 hide-scrollbar",children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-center",children:j.description}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 justify-center items-center",children:j.fields.map((e,t)=>{let r="interests"===j.id?n.includes(e.id):"goals"===j.id?b.includes(e.id):"age-group"===j.id?d===e.id:"education-level"===j.id?g===e.id:"skill-level"===j.id?y===e.id:"learning-style"===j.id?f===e.id:v===e.id,i=e.icon;return(0,a.jsx)(l.P.button,{onClick:()=>{if("interests"===j.id||"goals"===j.id){var t=e.id;switch(j.id){case"interests":c(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);break;case"goals":m(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])}}else{var r=e.id;switch(j.id){case"age-group":u(r);break;case"education-level":h(r);break;case"skill-level":p(r);break;case"learning-style":k(r);break;case"time-commitment":x(r)}}},whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-4 rounded-full border-2 transition-all text-center ${r?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[i&&(0,a.jsx)("div",{className:`p-2 rounded-full ${r?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:(0,a.jsx)(i,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("h3",{className:`font-semibold ${r?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100"}`,children:e.label}),r&&(0,a.jsx)(N.A,{className:"w-5 h-5 text-blue-600"})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 text-center",children:e.description})]})]})},e.id)})})]}),(0,a.jsxs)("div",{className:"bg-transparent dark:bg-gray-800 p-6 flex items-center justify-between rounded-b-2xl flex-shrink-0",children:[(0,a.jsx)("button",{onClick:()=>{s>0&&o(e=>e-1)},disabled:0===s,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Back"}),(0,a.jsxs)("button",{onClick:()=>{M()?S?O():o(e=>e+1):H.toast.error("Please make a selection to continue")},disabled:!M()||w,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[(0,a.jsx)("span",{children:S?w?"Saving...":"Complete":"Next"}),!S&&(0,a.jsx)(C.A,{className:"w-4 h-4"})]})]})]})]})}function B(){let e=(0,E.useRouter)(),{user:t,loading:r}=(0,T.h)();return((0,i.useEffect)(()=>{if(!r){if(!t)return void e.push("/auth/login");if(t.onboardingCompleted)return void e.push("/dashboard")}},[t,r,e]),r)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsx)(O,{onComplete:()=>{e.push("/dashboard")}})}):null}},21362:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},28393:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>u,h:()=>g});var a=r(95155),i=r(12115),l=r(73321),s=r(37206),o=r(5669);let n=!!window.Capacitor||"capacitor:"===window.location.protocol||"localhost"===window.location.hostname&&"3000"!==window.location.port&&"3001"!==window.location.port,c=(0,s.default)(()=>Promise.all([r.e(6609),r.e(2209)]).then(r.bind(r,2209)),{loadableGenerated:{webpack:()=>[2209]},ssr:!1}),d=(0,i.createContext)();function u({children:e}){let[t,r]=(0,i.useState)(null),[s,u]=(0,i.useState)(!0),[g,h]=(0,i.useState)(null),y=(0,l.useRouter)(),p=(0,l.usePathname)(),b=(0,i.useRef)(null);(0,i.useEffect)(()=>{},[]);let m=(0,i.useCallback)(async()=>(b.current||(b.current=(async()=>{try{if(!(await (0,o.Ud)("/api/auth/refresh",{method:"POST"})).ok)return!1;try{let e=await (0,o.Ud)("/api/me");if(e.ok){let t=await e.json();r(t.user)}}catch(e){console.error("Failed to re-fetch profile after refresh:",e)}return!0}catch(e){return console.error("Token refresh failed:",e),!1}finally{b.current=null}})()),b.current),[]),f=(0,i.useCallback)(async()=>{try{h(null);let e=await (0,o.Ud)("/api/me"),t=null;if(e.ok){let a=await e.text();try{return t=JSON.parse(a),r(t.user),u(!1),t.user}catch(e){throw console.error(`[Actinova] Failed to parse /api/me JSON. Response text: ${a.substring(0,100)}...`),Error("Invalid server response format")}}if(401===e.status&&await m()){let e=await (0,o.Ud)("/api/me");if(e.ok)return t=await e.json(),r(t.user),u(!1),t.user}return r(null),null}catch(e){console.error("Failed to fetch user:",e),h(e.message)}finally{u(!1)}},[m]);(0,i.useEffect)(()=>{f()},[f]),(0,i.useEffect)(()=>{if(!t)return;let e=async()=>{"visible"===document.visibilityState&&await m()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[t,m]),(0,i.useEffect)(()=>{!s&&t&&p.startsWith("/auth")&&"/auth/verify-email"!==p&&(!1===t.onboardingCompleted?y.replace("/onboarding"):y.replace("/dashboard"))},[t,s,p,y]),(0,i.useEffect)(()=>{f()},[f]),(0,i.useEffect)(()=>{if(!t)return;let e=async()=>{"visible"===document.visibilityState&&await m()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[t,m]),(0,i.useEffect)(()=>{!s&&t&&p.startsWith("/auth")&&"/auth/verify-email"!==p&&(!1===t.onboardingCompleted?y.replace("/onboarding"):y.replace("/dashboard"))},[t,s,p,y]);let k=async e=>{try{h(null),u(!0);let t=await fetch((0,o.e9)("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:n?"omit":"include",body:JSON.stringify(e)}),r=null,a=await t.text();try{r=JSON.parse(a)}catch(e){throw console.error("[Actinova] Failed to parse login response:",a.substring(0,100)),Error("Invalid server response format (expected JSON)")}if(!t.ok){if(console.error("[Actinova] Login failed status:",t.status,"data:",r),r.requiresVerification)return{success:!1,error:r.error||"Please verify your email first",requiresVerification:!0,email:r.email};throw Error(r.error||"Login failed")}n&&r.token&&localStorage.setItem("auth_token",r.token);let i=await f();return{success:!0,user:i}}catch(e){return console.error("[Actinova] Login exception:",e),h(e.message),{success:!1,error:e.message}}finally{u(!1)}},v=async e=>{try{h(null),u(!0);let t=await (0,o.Ud)("/api/auth/signup",{method:"POST",body:JSON.stringify(e)}),r=null,a=await t.text();try{r=JSON.parse(a)}catch(e){throw console.error("[Actinova] Failed to parse signup response:",a.substring(0,100)),Error("Invalid server response format (expected JSON)")}if(!t.ok)throw Error(r.error||"Signup failed");return{success:!0,message:r.message,requiresVerification:r.requiresVerification}}catch(e){return h(e.message),{success:!1,error:e.message}}finally{u(!1)}},x=async()=>{try{h(null),await (0,o.Ud)("/api/auth/logout",{method:"POST",headers:{"X-CSRF-Token":function(){if("undefined"==typeof document)return null;let e=document.cookie.match(/csrfToken=([^;]+)/);return e?e[1]:null}()}}),n&&localStorage.removeItem("auth_token")}catch(e){console.error("Logout failed:",e)}finally{r(null),h(null),y.push("/")}},w=async e=>{try{h(null);let t=await (0,o.Ud)("/api/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})}),r=await t.json();if(!t.ok)throw Error(r.error||"Failed to send reset email");return{success:!0,message:r.message}}catch(e){return h(e.message),{success:!1,error:e.message}}},A=async(e,t,r)=>{try{h(null);let a=await (0,o.Ud)("/api/auth/reset-password",{method:"POST",body:JSON.stringify({token:e,password:t,confirmPassword:r})}),i=await a.json();if(!a.ok)throw Error(i.error||"Failed to reset password");return{success:!0,message:i.message}}catch(e){return h(e.message),{success:!1,error:e.message}}},j=async e=>{try{h(null);let t=await (0,o.Ud)("/api/auth/verify-email",{method:"POST",body:JSON.stringify({token:e})}),r=await t.json();if(!t.ok)throw Error(r.error||"Failed to verify email");return{success:!0,message:r.message}}catch(e){return h(e.message),{success:!1,error:e.message}}};return(0,a.jsx)(d.Provider,{value:{user:t,loading:s,error:g,login:k,signup:v,logout:x,forgotPassword:w,resetPassword:A,verifyEmail:j,refreshToken:m,setUserData:e=>{r(e),u(!1),h(null)},fetchUser:f,clearError:()=>h(null)},children:(0,a.jsxs)(a.Fragment,{children:[e,(0,a.jsx)(c,{})]})})}let g=()=>{let e=(0,i.useContext)(d);return e||{user:null,loading:!1,error:null,showInactivityModal:!1,timeRemaining:0,login:async()=>({success:!1}),signup:async()=>({success:!1}),logout:async()=>{},forgotPassword:async()=>({success:!1}),resetPassword:async()=>({success:!1}),verifyEmail:async()=>({success:!1}),refreshToken:async()=>!1,setUserData:()=>{},fetchUser:async()=>null,clearError:()=>{}}}},31885:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},38941:(e,t,r)=>{Promise.resolve().then(r.bind(r,11771))},42869:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},44071:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},84980:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},90718:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]])},94514:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},96035:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},97810:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])}},e=>{e.O(0,[6609,24,8441,3794,7358],()=>e(e.s=38941)),_N_E=e.O()}]);