(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{4272:(e,t,r)=>{Promise.resolve().then(r.bind(r,22784))},6296:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7810:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},22784:(e,t,r)=>{"use strict";r.d(t,{default:()=>ey});var a=r(95155),s=r(12115),l=r(73321),i=r(78590),n=r(39092),o=r.n(n),d=r(31885),c=r(97810),x=r(48368),m=r(94961),g=r(66088),u=r(78340);let h=(0,u.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var p=r(86901),b=r(66609),y=r(5669),f=r(28393),j=r(75238),v=r(99776);function w({setActiveContent:e}){let[t,r]=(0,s.useState)(""),[i,n]=(0,s.useState)(""),[o,u]=(0,s.useState)("course"),[w,N]=(0,s.useState)("beginner"),[C,A]=(0,s.useState)(10),[S,P]=(0,s.useState)(!1),[E,$]=(0,s.useState)(null),[z,R]=(0,s.useState)(!1),M=(0,l.useRouter)(),{user:T,loading:U,refreshToken:F}=(0,f.h)();s.useEffect(()=>()=>{if(S){console.log("Generate cleanup: clearing showLoader on unmount");try{P(!1)}catch(e){console.warn("Failed to clear showLoader during cleanup",e)}}},[]);let D=(0,l.usePathname)();s.useEffect(()=>{P(!1)},[D]),s.useEffect(()=>{let e=()=>{S&&(console.log("Generate: received actinova:loading-done, clearing showLoader"),P(!1))};return window.addEventListener("actinova:loading-done",e),()=>{window.removeEventListener("actinova:loading-done",e)}},[S]);let I=(T?.subscription?.plan==="pro"||T?.subscription?.plan==="enterprise")&&T?.subscription?.status==="active"||!!T?.isPremium,L=!!(T?.usage?.isAtLimit||!I&&T?.usage?.remaining===0),_=!U&&T&&(T.firstName||T.name.split(" ")[0])||"",O=async(a=0)=>{if(!t.trim()||z)return;R(!0);let s=t.trim(),l=`generated_${s}_${o}_${w}`;try{if(localStorage.getItem(l))return void M.push(`/learn/content?topic=${encodeURIComponent(s)}&format=${o}&difficulty=${w}`)}catch{}if("flashcards"===o){console.log("Generate: showing loader for flashcard generation"),P(!0),R(!0);try{let t=await (0,y.Ud)("/api/generate-flashcards",{method:"POST",body:JSON.stringify({topic:s,difficulty:w})});if(!t.ok){let e={};try{e=await t.json()}catch(e){throw Error(`Server Error (${t.status}): Request failed`)}if(429===t.status)return void b.oR.error("Monthly limit reached. Upgrade to Pro for more!");throw Error(e.error||"Failed to generate flashcards")}await t.json(),window.dispatchEvent(new Event("usageUpdated")),b.oR.success("Flashcards generated successfully!"),e("flashcards")}catch(e){console.error("Flashcard generation failed:",e),b.oR.error(e.message||"Failed to generate flashcards")}finally{P(!1),R(!1)}return}if("quiz"===o){console.log("Generate: showing loader for quiz generation"),P(!0);try{let e=await (0,y.Ud)("/api/generate-course",{method:"POST",body:JSON.stringify({topic:s,difficulty:w,format:"quiz",questions:C})});if(!e.ok){let t={};try{t=await e.json()}catch(t){throw Error(`Server Error (${e.status}): Request failed`)}if(429===e.status)return void b.oR.error("Monthly limit reached. Upgrade to Pro for more!");throw Error(t.error||"Failed to generate quiz")}let t=await e.json();$({_id:t.quizId,...t.content}),b.oR.success("Quiz generated successfully!"),window.dispatchEvent(new Event("usageUpdated")),r(""),n("")}catch(e){console.error("Quiz generation failed:",e),b.oR.error(e.message||"Failed to generate quiz")}finally{console.log("Generate: hiding loader (quiz flow)"),P(!1),R(!1)}return}M.push(`/learn/content?topic=${encodeURIComponent(s)}&format=${o}&difficulty=${w}`)};return(s.useEffect(()=>{E&&e("quizzes")},[E,e]),E)?(0,a.jsx)(v.A,{quizData:E,topic:E.course,onBack:()=>$(null),existingQuizId:E._id}):(0,a.jsxs)("div",{children:[S&&(0,a.jsx)("div",{"data-actinova-loader-overlay":"true",className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-xs",children:(0,a.jsx)(j.A,{text:o})}),(0,a.jsxs)("div",{className:"mb-10 text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:_?`Welcome back, ${_}`:"Welcome to Actinova AI Tutor"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Ready to test your knowledge? Create comprehensive tests to challenge yourself and track your progress."})]}),(0,a.jsxs)("div",{className:"p-8 mb-10",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"What can I help you learn today?"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter a topic below to generate a personalized content"}),!I&&L&&(0,a.jsx)("div",{className:"mt-4 mx-auto max-w-md p-3 rounded-lg border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-200 text-sm",children:"You hit free limits. Upgrade to get more generations."})]}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-left px-1",children:"What can I help you learn?"}),(0,a.jsx)("textarea",{value:i,onChange:e=>{let t=e.target.value;n(t),r(t),e.target.style.height="auto",e.target.style.height=Math.min(e.target.scrollHeight,200)+"px"},className:"w-full px-3 sm:px-4 py-3 sm:py-4 text-base sm:text-lg border border-blue-300 dark:border-gray-600 rounded-lg sm:rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-none min-h-[100px] sm:min-h-[120px] max-h-[200px]",onKeyDown:e=>{"Enter"===e.key&&e.ctrlKey&&(e.preventDefault(),O())},autoFocus:!0,rows:4,maxLength:500,dir:"ltr",style:{direction:"ltr",unicodeBidi:"plaintext"}}),(0,a.jsxs)("div",{className:"mt-2 flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 px-1",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 mr-1"}),"Tip: Press Ctrl + Enter to generate your course"]}),(0,a.jsxs)("span",{className:i.length>450?"text-orange-500":"",children:[i.length,"/500"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 sm:mb-3 text-left px-1",children:"Choose the format"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 sm:gap-4",children:[(0,a.jsxs)("button",{onClick:()=>u("course"),className:`p-3 sm:p-4 rounded-lg border-2 transition-colors flex flex-col items-center justify-center ${"course"===o?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)(c.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mb-1 sm:mb-2 text-gray-700 dark:text-gray-300"}),(0,a.jsx)("span",{className:"font-medium text-xs sm:text-sm",children:"Course"})]}),(0,a.jsxs)("button",{onClick:()=>u("flashcards"),className:`p-3 sm:p-4 rounded-lg border-2 transition-colors flex flex-col items-center justify-center ${"flashcards"===o?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)(x.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mb-1 sm:mb-2 text-gray-700 dark:text-gray-300"}),(0,a.jsx)("span",{className:"font-medium text-xs sm:text-sm",children:"Flashcards"})]}),(0,a.jsxs)("button",{onClick:()=>u("quiz"),className:`p-3 sm:p-4 rounded-lg border-2 transition-colors flex flex-col items-center justify-center ${"quiz"===o?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)(m.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mb-1 sm:mb-2 text-gray-700 dark:text-gray-300"}),(0,a.jsx)("span",{className:"font-medium text-xs sm:text-sm",children:"Test Yourself"})]})]})]}),"quiz"===o&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-left",children:"Number of questions (up to 50)"}),(0,a.jsx)("input",{type:"number",value:C,onChange:e=>A(Math.min(50,parseInt(e.target.value,10)||10)),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400",max:"50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-left px-1",children:["Choose difficulty level",!I&&(0,a.jsx)("span",{className:"ml-2 text-xs text-orange-600 dark:text-orange-400",children:"(Free users: Beginner only)"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:w,onChange:t=>{let r=t.target.value;if(!I&&"beginner"!==r){b.oR.error("Intermediate and Advanced levels require Pro subscription. Please upgrade to continue."),e("upgrade");return}N(r)},className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 appearance-none pr-10",disabled:!I&&L,children:[(0,a.jsxs)("option",{value:"beginner",children:["Beginner"," ",I?"":"(Free)"]}),(0,a.jsxs)("option",{value:"intermediate",disabled:!I,children:["Intermediate"," ",I?"(Pro)":"(Pro Only)"]}),(0,a.jsxs)("option",{value:"advanced",disabled:!I,children:["Advanced"," ",I?"(Pro)":"(Pro Only)"]})]}),(0,a.jsx)(g.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),!I&&"beginner"!==w&&(0,a.jsx)("div",{className:"mt-2 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-orange-800 dark:text-orange-200 flex items-start",children:[(0,a.jsx)(h,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),"Intermediate and Advanced levels require a Pro subscription.",(0,a.jsx)("button",{onClick:()=>e("upgrade"),className:"ml-1 font-semibold underline hover:text-orange-900 dark:hover:text-orange-100",children:"Upgrade to Pro"})]})})]}),(0,a.jsxs)("button",{onClick:O,disabled:!t.trim()||!!T&&!I&&L,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2.5 sm:py-3 px-4 rounded-lg font-medium text-sm sm:text-base hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,a.jsx)("span",{children:!I&&L?"You hit free limits â€” upgrade to get more generations":"Generate"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3 sm:mb-4 px-1",children:"Popular Learning Tracks"}),(0,a.jsx)(k,{setTopic:r,setLocalTopic:n})]})]})}function k({setTopic:e,setLocalTopic:t}){let[r,l]=s.useState([]),[i,n]=s.useState(!0);return(s.useEffect(()=>{!async function(){try{let e=await (0,y.Ud)("/api/popular-topics"),t=await e.json();l(t.topics||[])}catch(e){l(["Artificial Intelligence","Frontend Development","Backend Development","Data Science","Machine Learning","Web Development","Mobile Development","DevOps"])}finally{n(!1)}}()},[]),i)?(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3",children:[...Array(8)].map((e,t)=>(0,a.jsx)("div",{className:"p-3 sm:p-4 bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg animate-pulse",children:(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4"})},t))}):(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3",children:r.map(r=>(0,a.jsx)("button",{onClick:()=>{e(r),t(r)},className:"p-3 sm:p-4 text-left bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-md transition-all",children:(0,a.jsx)("span",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-gray-100 line-clamp-2",children:r})},r))})}var N=r(9165),C=r(9673);let A=(0,u.A)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var S=r(94290);let P=(0,u.A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var E=r(44071),$=r(47149);let z=(0,u.A)("scroll",[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),R=(0,u.A)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),M=(0,u.A)("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);var T=r(61878),U=r(21362),F=r(31069);let D=(0,u.A)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);var I=r(53961),L=r(6962);let _=(0,u.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var O=r(41641),q=r(98500),H=r.n(q),G=r(33210);function V({isOpen:e,onClose:t,onConfirm:r,title:s="Confirm Action",message:l="Are you sure you want to proceed?",confirmText:i="Confirm",cancelText:n="Cancel",confirmColor:o="red"}){return e?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,a.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full mx-4 p-6 z-10",children:[(0,a.jsx)("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,a.jsx)(G.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"pr-8",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:s}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:l})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:n}),(0,a.jsx)("button",{onClick:()=>{r(),t()},className:`px-4 py-2 text-white rounded-lg transition-colors ${"red"===o?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:i})]})]})]}):null}var J=r(98126);let Y=[{name:"All",icon:"Grid",color:"gray"},{name:"Technology",topics:["Programming & Development","AI & Machine Learning","Game Development","Web Development","Mobile Apps","Cloud Computing","Cybersecurity","Blockchain"],icon:"code",color:"blue"},{name:"Design",topics:["UI/UX Design","Graphic Design","Design Systems","Figma","Adobe Creative","3D Modeling","Animation","Branding"],icon:"palette",color:"purple"},{name:"Business",topics:["Entrepreneurship","Marketing","Finance","Management","Strategy","Sales","Project Management","Leadership","E-commerce"],icon:"briefcase",color:"orange"},{name:"Data Science",topics:["Data Analysis","Machine Learning","Statistics","Python","R","SQL","Visualization","Big Data","AI Ethics"],icon:"chart",color:"green"},{name:"AI & ML",topics:["Neural Networks","Deep Learning","Computer Vision","NLP","Reinforcement Learning","AutoML","AI Ethics","Model Deployment"],icon:"brain",color:"indigo"},{name:"Creative",topics:["Photography","Videography","Music Production","Digital Art","Animation","Content Creation","Video Editing","Sound Design"],icon:"camera",color:"pink"},{name:"Humanities",topics:["Writing","Literature","History","Philosophy","Psychology","Sociology","Cultural Studies","Ethics","Critical Thinking"],icon:"book",color:"red"},{name:"Languages",topics:["Spanish","French","German","Japanese","Chinese","Portuguese","Italian","Korean","Arabic","Russian"],icon:"globe",color:"cyan"},{name:"Science",topics:["Physics","Chemistry","Biology","Astronomy","Geology","Environmental Science","Neuroscience","Engineering","Research Methods"],icon:"microscope",color:"teal"},{name:"Mathematics",topics:["Calculus","Statistics","Algebra","Geometry","Discrete Math","Linear Algebra","Probability","Number Theory"],icon:"calculator",color:"yellow"},{name:"Health",topics:["Nutrition","Fitness","Mental Health","Medicine","Nursing","Public Health","Yoga","Meditation"],icon:"heart",color:"rose"}];function B({setActiveContent:e,setHideNavs:t}){let r=(0,l.useRouter)();(0,s.useEffect)(()=>{if(t)return t(!0),()=>t(!1)},[t]);let[i,n]=(0,s.useState)("grid"),[o,d]=(0,s.useState)("all"),[m,g]=(0,s.useState)("All"),[u,h]=(0,s.useState)(""),[j,v]=(0,s.useState)([]),[w,k]=(0,s.useState)([]),[N,q]=(0,s.useState)([]),[G,B]=(0,s.useState)(!0),[W,K]=(0,s.useState)(!0),[Q,Z]=(0,s.useState)(!0),[X,ee]=(0,s.useState)(1),[et,er]=(0,s.useState)({}),[ea,es]=(0,s.useState)({}),[el,ei]=(0,s.useState)(!1),[en,eo]=(0,s.useState)(null),[ed,ec]=(0,s.useState)(new Set),[ex,em]=(0,s.useState)(null),{user:eg,loading:eu,refreshToken:eh}=(0,f.h)(),ep=async(e=!0)=>{if(!eg)return void B(!1);try{B(!0);let t=new URLSearchParams({page:X.toString(),limit:"12",type:"course",search:u}),r=await (0,y.Ud)(`/api/library?${t}`);if(!r.ok){if(401===r.status&&e){if(console.log("Token expired, attempting to refresh..."),await eh())return ep(!1);b.oR.error("Session expired. Please log in again.")}else 401===r.status?b.oR.error("Session expired. Please log in again."):b.oR.error("Failed to load library");B(!1);return}let a=await r.json(),s=(a.items||[]).map(e=>({id:e.id,_id:e.id.split("_")[1]||e.id,title:e.title,topic:e.topic,difficulty:e.difficulty,progress:e.progress||0,totalLessons:e.totalLessons||e.totalCards||0,completedLessons:Math.round(e.progress/100*(e.totalLessons||e.totalCards||0)),isPinned:e.pinned||!1,pinned:e.pinned||!1,createdAt:e.createdAt,lastAccessed:e.lastAccessed||"Just now",description:e.description||`Learn ${e.topic||e.title}`,instructor:e.instructor||"AI Tutor",rating:e.rating||4.8,estimatedTime:e.estimatedTime||"2-4 hours",format:"questions"===e.type?"questions":"flashcards"===e.type?"flashcards":"course",courseData:{topic:e.topic,format:"questions"===e.type?"questions":"flashcards"===e.type?"flashcards":"course",difficulty:e.difficulty},isGenerated:!0}));v(s),er(a.pagination||{}),es(a.stats||{})}catch(e){console.error("Error fetching library:",e),b.oR.error("Network error. Please try again.")}finally{B(!1)}},eb=async()=>{try{K(!0);let e=!!(eg?.subscription?.plan==="pro"||eg?.isPremium),t=await (0,y.Ud)(e?"/api/premium-courses/personalized":"/api/premium-courses/trending",{method:e?"POST":"GET"});if(t.ok){let e=await t.json();k(e.courses||[])}}catch(e){console.error("Error fetching premium data:",e)}finally{K(!1)}},ey=async()=>{try{Z(!0);let e=await (0,y.Ud)("/api/premium-courses/trending");if(e.ok){let t=await e.json();q(t.courses||[])}}catch(e){console.error("Error fetching explore data:",e)}finally{Z(!1)}};(0,s.useEffect)(()=>{!eu&&eg?(ep(),eb(),ey()):eu||eg||(B(!1),K(!1),Z(!1))},[X,u,o,eg,eu]),(0,s.useEffect)(()=>{ee(1)},[o]),(0,s.useEffect)(()=>{j.length>0&&ec(new Set(j.filter(e=>e.isPinned).map(e=>e.id)))},[j]);let ef=async(e,t=!0)=>{let r=j.find(t=>t.id===e);if(!r)return;let a=!r.isPinned,s=ea.pinned||0;if(a&&s>=3)return void b.oR.error("You can only pin up to 3 courses. Unpin one first.");v(t=>t.map(t=>t.id===e?{...t,isPinned:a,pinned:a}:t)),es(e=>({...e,pinned:a?s+1:s-1}));try{let r=await (0,y.Ud)("/api/library",{method:"POST",body:JSON.stringify({action:"pin",itemId:e})});if(401===r.status&&t&&await eh())return ef(e,!1);if(!r.ok)throw Error("Failed to update pin");b.oR.success(a?"Course pinned":"Course unpinned")}catch(t){v(t=>t.map(t=>t.id===e?{...t,isPinned:!a,pinned:!a}:t)),es(e=>({...e,pinned:s})),b.oR.error("Failed to update pin status")}},ej=async(e=!0)=>{if(en){v(e=>e.filter(e=>e.id!==en.id));try{let t=await (0,y.Ud)("/api/library",{method:"POST",body:JSON.stringify({action:"delete",itemId:en.id})});if(401===t.status&&e&&await eh())return ej(!1);if(t.ok)b.oR.success("Course deleted from library");else throw Error("Delete failed")}catch(e){b.oR.error("Failed to delete course"),ep()}finally{ei(!1),eo(null)}}},ev=async e=>{if(!ex){em(e.title),b.oR.loading(`Generating course: ${e.title}...`,{id:"generating"});try{let t=(e.difficulty||"beginner").toLowerCase();["beginner","intermediate","advanced"].includes(t)||(t="beginner"),eg?.subscription?.plan==="pro"||eg?.isPremium||(t="beginner");let a=await (0,y.Ud)("/api/generate-course",{method:"POST",body:JSON.stringify({topic:e.title,format:"course",difficulty:t})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||"Failed to generate course")}let s=await a.json();if(b.oR.success(`Course "${e.title}" generated successfully!`,{id:"generating"}),s.courseId||s.success){let a=e.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");r.push(`/learn/content?topic=${encodeURIComponent(a)}&format=course&difficulty=${t}&originalTopic=${encodeURIComponent(e.title)}`)}}catch(e){console.error("Error generating course:",e),b.oR.error(e.message||"Failed to generate course",{id:"generating"})}finally{em(null)}}},ew=!!(eg?.subscription&&("pro"===eg.subscription.plan||"enterprise"===eg.subscription.plan)&&"active"===eg.subscription.status)||!!eg?.isPremium,ek=async e=>{if(!ew)return void b.oR.error("PDF downloads are a Pro feature. Please upgrade to download courses.");let t=b.oR.loading(`Preparing PDF for ${e.title}...`);try{let r=await (0,y.Ud)(`/api/library?id=${e.id}`);if(!r.ok)throw Error("Failed to fetch full course data");let a=await r.json();if(!a.item)throw Error("Course data not found");await (0,J.O)(a.item,e.format),b.oR.success("Download started!",{id:t})}catch(e){console.error("Library download error:",e),b.oR.error("Failed to generate PDF. Please try again.",{id:t})}},eN=({name:e,...t})=>{let r={Grid:A,code:c.A,palette:S.A,briefcase:P,brain:p.A,microscope:x.A,chart:E.A,globe:p.A,calculator:x.A,heart:$.A,camera:p.A,book:z}[e]||A;return(0,a.jsx)(r,{...t})};return eu?(0,a.jsx)("div",{className:"flex justify-center py-20",children:(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 rounded-full border-t-transparent"})}):eg?(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8 space-y-12 no-scrollbar",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 pb-4",children:[{label:"Courses",value:ea.courses||0,icon:c.A,color:"blue",gradient:"from-blue-500/30 to-indigo-500/30",text:"text-blue-600 dark:text-blue-400"},{label:"Done",value:ea.completedCourses||0,icon:R,color:"green",gradient:"from-emerald-500/30 to-teal-500/30",text:"text-emerald-600 dark:text-emerald-400"},{label:"Pinned",value:ea.pinnedCourses||0,icon:M,color:"yellow",gradient:"from-orange-500/30 to-amber-500/30",text:"text-orange-600 dark:text-orange-400"},{label:"Progress",value:`${j.length>0?Math.round(j.reduce((e,t)=>e+(t.progress||0),0)/j.length):0}%`,icon:E.A,color:"purple",gradient:"from-purple-500/30 to-fuchsia-500/30",text:"text-purple-600 dark:text-purple-400"}].map((e,t)=>(0,a.jsxs)(C.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"relative bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl p-2.5 rounded-sm border border-gray-100 dark:border-gray-700/50 overflow-hidden",children:[(0,a.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br ${e.gradient} opacity-80`}),(0,a.jsxs)("div",{className:"relative z-10 flex items-center gap-2",children:[(0,a.jsx)("div",{className:`p-1 ${e.text}`,children:(0,a.jsx)(e.icon,{size:12,className:"stroke-[2.5]"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-1.5 min-w-0",children:[(0,a.jsx)("div",{className:"text-xs font-black text-gray-900 dark:text-white leading-none truncate",children:e.value}),(0,a.jsx)("div",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-300 truncate",children:e.label})]})]})]},t))}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-black uppercase tracking-tight text-gray-900 dark:text-white",children:"Discovery Hub"}),(0,a.jsxs)("div",{className:"relative group min-w-[300px]",children:[(0,a.jsx)(T.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-indigo-600 transition-colors"}),(0,a.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Search disciplines...",className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border-2 border-purple-100 dark:border-purple-900/30 rounded-2xl focus:ring-2 focus:ring-purple-500/20 outline-none transition-all placeholder:text-gray-400 placeholder:font-medium font-medium text-sm"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Categories"}),(0,a.jsxs)(H(),{href:"/explore",className:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest hover:underline flex items-center gap-1",children:["Explore ",(0,a.jsx)(U.A,{size:12})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide no-scrollbar scroll-smooth",children:[Y.map(e=>(0,a.jsxs)("button",{onClick:()=>{var t;g(t=e.name),"All"===t?h(""):h(t)},className:`flex-shrink-0 flex items-center gap-2 px-5 py-3 rounded-2xl font-bold text-sm transition-all active:scale-95 ${m===e.name?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[(0,a.jsx)(eN,{name:e.icon,size:16}),(0,a.jsx)("span",{children:e.name})]},e.name)),(0,a.jsxs)(H(),{href:"/explore",className:"flex-shrink-0 flex items-center gap-2 px-5 py-3 rounded-2xl font-bold text-sm transition-all active:scale-95 bg-white dark:bg-gray-800 text-indigo-600 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[(0,a.jsx)(A,{size:16}),(0,a.jsx)("span",{children:"View More"})]})]})]}),w.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Premium Spotlight"}),(0,a.jsx)("button",{onClick:()=>e("staff-picks"),className:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest hover:underline",children:"View All"})]}),(0,a.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide no-scrollbar scroll-smooth",children:w.map((e,t)=>(0,a.jsxs)(C.P.div,{whileHover:{y:-4},className:"flex-shrink-0 w-[280px] bg-gradient-to-br from-indigo-600 to-purple-700 rounded-3xl p-5 text-white shadow-xl shadow-indigo-500/10 relative overflow-hidden group cursor-pointer",onClick:()=>ev(e),children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 blur-2xl group-hover:scale-110 transition-transform"}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,a.jsx)(F.A,{size:18,className:"text-yellow-300"})}),e.badge&&(0,a.jsx)("span",{className:"px-2 py-1 bg-white/20 rounded-full text-[9px] font-black uppercase tracking-widest",children:e.badge})]}),(0,a.jsx)("h4",{className:"font-black text-lg leading-tight mb-2 line-clamp-2",children:e.title}),(0,a.jsx)("p",{className:"text-white/70 text-xs font-medium line-clamp-2 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"mt-auto flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex -space-x-2",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-white/20 border-2 border-indigo-600 flex items-center justify-center text-[8px] font-bold",children:e},e))}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-80",children:"Join 1k+ students"})]})]})]},e.id||t))})]}),N.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Featured Discovery"}),(0,a.jsx)("button",{onClick:()=>e("explore"),className:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest hover:underline",children:"View All"})]}),(0,a.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide no-scrollbar scroll-smooth",children:N.map((e,t)=>(0,a.jsxs)(C.P.div,{whileHover:{y:-4},className:"flex-shrink-0 w-[260px] bg-white dark:bg-gray-800 rounded-3xl p-5 border border-gray-100 dark:border-gray-700/50 shadow-sm relative overflow-hidden group cursor-pointer",onClick:()=>ev(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-gray-50 dark:bg-gray-700/50 flex items-center justify-center text-gray-400 group-hover:text-indigo-500 transition-colors",children:(0,a.jsx)(p.A,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-sm text-gray-900 dark:text-white line-clamp-1",children:e.title}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:e.level||"Modern"})]})]}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs line-clamp-2 mb-4 h-8",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-50 dark:border-gray-700 pt-3",children:[(0,a.jsx)("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"Discovery"}),(0,a.jsx)(U.A,{size:14,className:"text-gray-300 group-hover:text-indigo-500 group-hover:translate-x-1 transition-all"})]})]},t))})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Your Collection"}),(0,a.jsxs)("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1 opacity-0 pointer-events-none hidden",children:[(0,a.jsx)("button",{onClick:()=>n("grid"),className:`p-1.5 rounded-lg transition-all ${"grid"===i?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-400"}`,children:(0,a.jsx)(A,{size:14})}),(0,a.jsx)("button",{onClick:()=>n("list"),className:`p-1.5 rounded-lg transition-all ${"list"===i?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-400"}`,children:(0,a.jsx)(D,{size:14})})]})]}),G?(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 border rounded-3xl p-6 animate-pulse h-40"},t))}):0===j.length?(0,a.jsxs)(C.P.div,{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/20 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",initial:{opacity:0},animate:{opacity:1},children:[(0,a.jsx)(c.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:u?"No matches found":"Your space is empty"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:u?`Couldn't find anything for "${u}"`:"Start your journey by exploring new topics!"}),(0,a.jsx)("button",{onClick:()=>e("explore"),className:"px-6 py-3 bg-indigo-600 text-white rounded-2xl font-bold text-sm shadow-lg shadow-indigo-500/20 active:scale-95 transition-all",children:"Explore Discovery"})]}):(0,a.jsx)(C.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 pb-20",children:[...j].sort((e,t)=>!!ed.has(t.id)-!!ed.has(e.id)).map((e,t)=>{let s=["from-blue-500 to-indigo-600","from-purple-500 to-fuchsia-600","from-emerald-500 to-teal-600","from-orange-500 to-amber-600","from-rose-500 to-pink-600","from-sky-500 to-blue-600"],l=s[t%s.length];return(0,a.jsxs)(C.P.div,{layoutId:e.id,onClick:()=>{let t=e.topic.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");r.push(`/learn/${encodeURIComponent(t)}?format=${e.format}&difficulty=${e.difficulty||"beginner"}&originalTopic=${encodeURIComponent(e.topic)}`)},className:`w-full bg-gradient-to-br ${l} rounded-2xl p-6 relative overflow-hidden group cursor-pointer transition-all hover:scale-[1.01] shadow-xl shadow-gray-200/20 dark:shadow-none`,children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 blur-2xl"}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-white/20 backdrop-blur-md rounded-2xl border border-white/20",children:"questions"===e.format?(0,a.jsx)(A,{size:20,className:"text-white"}):"flashcards"===e.format?(0,a.jsx)(I.A,{size:20,className:"text-white"}):(0,a.jsx)(c.A,{size:20,className:"text-white"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),ek(e)},className:"p-2.5 rounded-full bg-white/10 text-white hover:bg-white/20 transition-all",title:"Download PDF",children:(0,a.jsx)(L.A,{size:14})}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),eo(e),ei(!0)},className:"p-2.5 rounded-full bg-white/10 text-white hover:bg-red-500 transition-all",title:"Delete Course",children:(0,a.jsx)(_,{size:14})}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),ef(e.id)},className:`p-2.5 rounded-full transition-all ${e.isPinned?"bg-white text-indigo-600":"bg-white/10 text-white hover:bg-white/20"}`,title:e.isPinned?"Unpin":"Pin",children:(0,a.jsx)(M,{size:14,className:e.isPinned?"fill-current":""})})]})]}),(0,a.jsx)("h4",{className:"font-black text-xl leading-snug mb-4 line-clamp-2 text-white",children:e.title}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-bold text-white/90",children:[(0,a.jsxs)("span",{children:[e.progress,"% Completed"]}),(0,a.jsx)("span",{children:e.difficulty})]}),(0,a.jsx)("div",{className:"h-2 w-full bg-white/20 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-white rounded-full transition-all duration-700",style:{width:`${e.progress}%`}})}),(0,a.jsx)("button",{className:"w-full mt-2 py-4 bg-white text-gray-900 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] hover:translate-y-[-2px] transition-all active:scale-95 shadow-none",children:"Continue Learning"})]})]})]},e.id)})},o),et.totalPages>1&&(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-10",children:[(0,a.jsx)("button",{onClick:()=>ee(X-1),disabled:1===X,className:"p-2 border border-gray-200 dark:border-gray-700 rounded-xl disabled:opacity-30 transition-opacity",children:(0,a.jsx)(O.A,{className:"w-5 h-5"})}),[...Array(et.totalPages)].map((e,t)=>(0,a.jsx)("button",{onClick:()=>ee(t+1),className:`w-9 h-9 rounded-xl font-bold text-sm transition-all ${X===t+1?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"border border-gray-200 dark:border-gray-700 text-gray-500"}`,children:t+1},t+1)),(0,a.jsx)("button",{onClick:()=>ee(X+1),disabled:X===et.totalPages,className:"p-2 border border-gray-200 dark:border-gray-700 rounded-xl disabled:opacity-30 transition-opacity",children:(0,a.jsx)(U.A,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("button",{onClick:()=>r.push("/dashboard?tab=generate"),className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white shadow-xl shadow-blue-500/30 hover:scale-110 transition-transform z-50 md:hidden",children:(0,a.jsx)(p.A,{size:24})}),(0,a.jsx)(V,{isOpen:el,onClose:()=>{ei(!1),eo(null)},onConfirm:ej,title:"Remove Course",message:`Are you sure you want to remove "${en?.title}"? This will permanently delete your progress.`,confirmText:"Remove",cancelText:"Keep",confirmColor:"red"})]}):(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)(c.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Please log in"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be signed in to view your library."}),(0,a.jsx)(H(),{href:"/auth/login",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Log In"})]})}var W=r(11951),K=r(84980),Q=r(7810),Z=r(99799);function X(){let e=(0,l.useRouter)(),{user:t,authLoading:r}=(0,Z.w)();if(r)return(0,a.jsx)(j.A,{});if(!t)return null;let[i,n]=(0,s.useState)([]),[o,d]=(0,s.useState)([]),[x,m]=(0,s.useState)(null),[g,u]=(0,s.useState)(!0),[h,f]=(0,s.useState)(1),[v,w]=(0,s.useState)(""),[k,N]=(0,s.useState)(null),[A,P]=(0,s.useState)([]),[$,z]=(0,s.useState)(!1),[R,M]=(0,s.useState)(null),D=t&&(t.subscription&&("pro"===t.subscription.plan||"enterprise"===t.subscription.plan)&&"active"===t.subscription.status||t.isPremium);(0,s.useEffect)(()=>{D?q():L(),_()},[D]),(0,s.useEffect)(()=>{x||g||(A.length>0?m(A.find(e=>e.featured)||A[0]):i.length>0?m(i.find(e=>e.featured)||i[0]):o.length>0&&m(o[0]))},[x,g,A,i,o]);let L=async()=>{try{let e=await (0,y.Ud)("/api/premium-courses");if(e.ok){let t=await e.json();n(t.courses);let r=t.courses.find(e=>e.featured);r&&m(r)}}catch(e){console.error("Error fetching premium courses:",e)}finally{u(!1)}},_=async()=>{try{let e=await (0,y.Ud)("/api/premium-courses/trending",{headers:{"x-user-id":t?._id||t?.id||""}});if(e.ok){let t=await e.json();d(t.courses||[]),t.courses&&t.courses.length>0&&!x&&m(t.courses[0])}else 403===e.status&&(d([]),x||m(null))}catch(e){console.error("Error fetching trending courses:",e),d([]),x||m(null)}},q=async()=>{try{z(!0);let e=localStorage.getItem("personalizedPremiumCourses");if(e){let t=JSON.parse(e);if(t.generatedAt&&new Date-new Date(t.generatedAt)<864e5){P(t.courses),u(!1),z(!1);return}}let t=await (0,y.Ud)("/api/premium-courses/personalized",{method:"POST",headers:{"Content-Type":"application/json"}});if(t.ok){let e=await t.json();e.localStorage&&localStorage.setItem("personalizedPremiumCourses",JSON.stringify(e.localStorage)),P(e.courses);let r=e.courses.find(e=>e.featured);r&&!x&&m(r),b.oR.success("Your personalized premium courses are ready!")}else throw Error("Failed to generate personalized courses")}catch(e){console.error("Error fetching personalized courses:",e),b.oR.error("Failed to load personalized courses. Using default courses."),L()}finally{u(!1),z(!1)}},G=async t=>{if(t.personalized||A.some(e=>e.id===t.id)){M(t.id),setTimeout(()=>{let r=t.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");e.push(`/learn/content?topic=${encodeURIComponent(r)}&format=course&difficulty=${t.difficulty||"intermediate"}&personalized=true&originalTopic=${encodeURIComponent(t.title)}`)},1500);return}if(!k){N(t.id),b.oR.loading(`Generating course: ${t.title}...`,{id:"generating"});try{let r=await (0,y.Ud)("/api/generate-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:t.title,format:"course",difficulty:t.difficulty||"beginner"})});if(!r.ok){let e=await r.json().catch(()=>({}));if(429===r.status){b.oR.dismiss("generating"),b.oR.error(`Monthly limit reached (${e.used||0}/${e.limit||2}). Please try again next month.`,{id:"generating"});return}throw Error(e.error||"Failed to generate course")}try{await (0,y.Ud)("/api/profile/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({generatedPremiumCourse:{courseId:t.id,courseTitle:t.title,generatedAt:new Date().toISOString()}})})}catch(e){console.error("Error tracking generated course:",e)}let a=await r.json();if(b.oR.success(`Course "${t.title}" generated successfully!`,{id:"generating"}),a.courseId){let r=t.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");e.push(`/learn/content?topic=${encodeURIComponent(r)}&format=course&difficulty=${t.difficulty||"beginner"}&originalTopic=${encodeURIComponent(t.title)}`)}}catch(e){console.error("Error generating course:",e),b.oR.error(e.message||"Failed to generate course",{id:"generating"})}finally{N(null)}}},V=async e=>{try{let t=await (0,y.Ud)("/api/billing/create-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:e})});if(!t.ok){let e=await t.json().catch(()=>({}));401===t.status&&(b.oR.error("Please log in to upgrade."),setTimeout(()=>{window.location.href="/auth/login"},800));let r=e.message||e.details||e.error;throw Error(r||"Failed to create checkout session")}let r=await t.json();if(r.sessionUrl)window.location.href=r.sessionUrl;else throw Error("No payment URL received")}catch(e){b.oR.error(e.message||"Failed to start upgrade process. Please try again.")}},J=async t=>{M(t.id),setTimeout(()=>{let r=t.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");e.push(`/learn/content?topic=${encodeURIComponent(r)}&format=course&difficulty=${t.difficulty||"intermediate"}&originalTopic=${encodeURIComponent(t.title)}`)},1500)},Y=(D&&A.length>0?A:i).filter(e=>e.title.toLowerCase().includes(v.toLowerCase())||e.description.toLowerCase().includes(v.toLowerCase())),B=Math.ceil(Y.length/6),X=(h-1)*6,ee=Y.slice(X,X+6),et={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,a.jsxs)(C.P.div,{className:"text-center mb-12",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[(0,a.jsx)(S.A,{className:"w-8 h-8 text-blue-500"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Premium Courses"})]}),(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"High-quality courses with advanced features, expert instruction, and comprehensive learning materials."})]}),(0,a.jsxs)(C.P.div,{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(T.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:v,onChange:e=>w(e.target.value),placeholder:"Search premium courses...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:(0,a.jsx)(F.A,{className:"w-5 h-5 text-white"})})})]}),!D&&(0,a.jsxs)(C.P.div,{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl p-8 mb-12 text-white text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,a.jsx)(F.A,{className:"w-12 h-12 mx-auto mb-4 text-yellow-300"}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Unlock Premium Trending Courses"}),(0,a.jsx)("p",{className:"text-orange-100 mb-6 max-w-2xl mx-auto",children:"Get access to the latest trending courses generated by AI, personalized to your interests. Upgrade to Pro to discover cutting-edge topics and stay ahead in your learning journey."}),(0,a.jsx)("button",{onClick:()=>V("pro"),className:"bg-white text-orange-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors cursor-pointer",children:"Upgrade to Pro"})]}),D&&o.length>1&&(0,a.jsxs)(C.P.div,{className:"mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,a.jsx)(E.A,{className:"w-6 h-6 text-orange-500"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Latest Trending Courses"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.slice(1).map((e,t)=>(0,a.jsxs)(C.P.div,{whileHover:{y:-5},className:"bg-blue-50/70 dark:bg-blue-900/20 backdrop-blur-sm border border-gray-200 dark:border-slate-700/50 rounded-2xl overflow-hidden hover:border-gray-300 dark:hover:border-slate-600/70 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-full h-48 bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center",children:(0,a.jsx)(c.A,{className:"w-16 h-16 text-white opacity-80"})}),(0,a.jsxs)("div",{className:"absolute top-3 left-3 bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center space-x-1",children:[(0,a.jsx)(E.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Trending"})]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:e.description}),e.whyTrending&&(0,a.jsx)("div",{className:"mb-3 p-2 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:[(0,a.jsx)("span",{className:"font-semibold",children:"\uD83D\uDD25 Trending:"})," ",e.whyTrending]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(K.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.estimatedDuration||"6 weeks"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(c.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.category||"General"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-4 flex-wrap gap-2",children:e.tags?.slice(0,3).map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded-full",children:e},t))}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Premium"})})}),(0,a.jsx)("button",{onClick:()=>G(e),disabled:k===e.id||R===e.id,className:"w-full bg-gradient-to-r from-orange-600 to-red-600 text-white py-2 px-4 rounded-lg hover:from-orange-700 hover:to-red-700 transition-colors text-xs font-normal disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center space-x-2",children:k===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Generating..."})]}):R===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Preparing your course..."})]}):e.personalized||A.some(t=>t.id===e.id)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Start Learning"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Generate Course"})]})})]})]},e.id||t))})]}),x&&(0,a.jsxs)(C.P.div,{className:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 rounded-3xl p-8 mb-12 text-white shadow-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[(0,a.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white rounded-full -translate-y-48 translate-x-48"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-blue-400 rounded-full translate-y-32 -translate-x-32"})]}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-xl",children:(0,a.jsx)(F.A,{className:"w-6 h-6 text-blue-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent font-bold text-sm uppercase tracking-wider",children:"Featured Course"}),(0,a.jsx)("p",{className:"text-slate-300 text-sm",children:D?"Premium Exclusive":"Upgrade to Access"})]})]}),(0,a.jsx)("div",{className:"hidden md:flex items-center space-x-2",children:(0,a.jsx)("span",{className:"text-slate-300 text-sm",children:"10k+ enrolled"})})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-3 leading-tight",children:x.title}),(0,a.jsx)("p",{className:"text-slate-300 mb-4 text-base leading-relaxed",children:x.description}),(0,a.jsx)("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 mb-4",children:(0,a.jsx)("p",{className:"text-blue-300 text-xs leading-relaxed",children:"This course is personalized based on your goals and interests. New courses will appear after 1 month."})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-slate-300",children:[(0,a.jsx)(K.A,{className:"w-4 h-4 text-blue-400"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:x.duration})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2 text-slate-300",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(S.A,{className:"w-3 h-3 text-blue-400 fill-blue-400"},t)),(0,a.jsx)("span",{className:"ml-1 font-medium text-sm",children:x.rating})]})})]}),!D&&(0,a.jsxs)("div",{className:"flex items-baseline space-x-2 mb-4",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-white",children:x.price}),x.originalPrice&&(0,a.jsx)("span",{className:"text-lg text-slate-400 line-through",children:x.originalPrice})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("div",{className:"w-fit rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(F.A,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-200 italic text-sm leading-relaxed",children:x.premiumNote||x.staffNote}),(0,a.jsx)("p",{className:"text-slate-400 text-xs mt-1",children:"- Premium Team"})]})]})})}),(0,a.jsx)("div",{className:"flex justify-end",children:D?(0,a.jsx)("button",{onClick:()=>J(x),disabled:R===x.id,className:"px-6 py-3 bg-white text-slate-900 font-normal rounded-lg hover:bg-slate-100 transition-all duration-200 transform hover:-translate-y-0.5 text-base disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center space-x-2",children:R===x.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-900"}),(0,a.jsx)("span",{children:"Preparing your course..."})]}):(0,a.jsx)("span",{children:"Start Learning"})}):(0,a.jsx)("button",{onClick:()=>V("premium-course"),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 text-sm cursor-pointer",children:"Get Premium Access"})})]})]})]})]}),g||$?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:$?"Creating your personalized premium courses...":"Loading premium courses..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ee.map((e,t)=>(0,a.jsxs)(C.P.div,{variants:et,whileHover:{y:-8,scale:1.02},className:"group relative bg-blue-50/70 dark:bg-blue-900/20 backdrop-blur-sm border border-gray-200 dark:border-slate-700/50 rounded-2xl overflow-hidden hover:border-gray-300 dark:hover:border-slate-600/70 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"absolute inset-0 opacity-3 dark:opacity-10",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/20 to-purple-600/20 dark:from-blue-500/40 dark:to-purple-600/40 rounded-full -translate-y-16 translate-x-16"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-br from-purple-400/20 to-pink-600/20 dark:from-purple-500/40 dark:to-pink-600/40 rounded-full translate-y-12 -translate-x-12"})]}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-xl",children:(0,a.jsx)(F.A,{className:"w-4 h-4 text-blue-500"})}),(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent text-xs font-bold uppercase tracking-wider",children:"Premium"})]}),e.badge&&(0,a.jsxs)("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${(e=>{switch(e){case"Trending":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"Expert Level":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"Industry Favorite":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"Creative Choice":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";case"High Demand":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"Visual Excellence":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}})(e.badge)}`,children:[(e=>{switch(e){case"Trending":return(0,a.jsx)(E.A,{className:"w-3 h-3"});case"Expert Level":return(0,a.jsx)(F.A,{className:"w-3 h-3"});case"Industry Favorite":return(0,a.jsx)(W.A,{className:"w-3 h-3"});case"Creative Choice":case"Visual Excellence":default:return(0,a.jsx)(S.A,{className:"w-3 h-3"});case"High Demand":return(0,a.jsx)(I.A,{className:"w-3 h-3"})}})(e.badge),(0,a.jsx)("span",{children:e.badge})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-300 transition-colors",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-slate-200 text-sm leading-relaxed mb-2",children:e.description}),(0,a.jsxs)("p",{className:"text-gray-500 dark:text-slate-300 text-xs",children:["by ",e.instructor]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-slate-400",children:[(0,a.jsx)(Q.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:["5k","10k","15k","20k","25k","30k","35k","40k"][Math.floor(8*Math.random())]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-slate-400",children:[(0,a.jsx)(K.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.duration})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(S.A,{className:"w-4 h-4 text-blue-400 fill-blue-400"}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-slate-100 font-medium text-sm",children:e.rating})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-4",children:(()=>{let{daysLeft:t,progress:r}=(e=>{if(!e)return{daysLeft:30,progress:100};let t=new Date(e),r=Math.max(0,30-Math.floor((new Date-t)/864e5)),a=Math.max(0,r/30*100);return{daysLeft:r,progress:a}})(e.createdAt);return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[(0,a.jsx)("span",{children:"Course Access"}),(0,a.jsxs)("span",{children:["Expires in ",t," days"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})})]})})()}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.price}),e.originalPrice&&(0,a.jsx)("span",{className:"text-lg text-gray-400 dark:text-slate-400 line-through",children:e.originalPrice})]}),D?(0,a.jsx)("button",{onClick:()=>J(e),disabled:R===e.id,className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-normal rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-200 transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center space-x-2 text-xs",children:R===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Preparing your course..."})]}):(0,a.jsx)("span",{children:"Start Learning"})}):(0,a.jsx)("button",{onClick:()=>V("premium-course"),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 cursor-pointer",children:"Get Premium"})]})]})]},e.id||t))}),B>1&&(0,a.jsxs)(C.P.div,{className:"flex items-center justify-center space-x-2 mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[(0,a.jsx)("button",{onClick:()=>f(e=>Math.max(e-1,1)),disabled:1===h,className:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:(0,a.jsx)(O.A,{className:"w-4 h-4"})}),Array.from({length:B},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>f(e),className:`px-3 py-2 rounded-lg text-sm font-medium cursor-pointer ${h===e?"bg-blue-600 text-white":"border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:e},e)),(0,a.jsx)("button",{onClick:()=>f(e=>Math.min(e+1,B)),disabled:h===B,className:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:(0,a.jsx)(U.A,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(C.P.div,{className:"text-center mt-16 bg-gray-50 dark:bg-gray-800 rounded-2xl p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Want to see your course featured?"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create exceptional learning experiences and get noticed by our education team."}),(0,a.jsx)(H(),{href:"/contact",className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors cursor-pointer",children:(0,a.jsx)("span",{children:"Contact Our Team"})})]})]})}var ee=r(79372);let et=(0,u.A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var er=r(94514);function ea(){let{user:e,loading:t}=(0,f.h)(),[r,l]=(0,s.useState)("premium"),[i,n]=(0,s.useState)("card"),[o,d]=(0,s.useState)(!1),[c,x]=(0,s.useState)({used:0,limit:5,percentage:0,isPremium:!1,remaining:5}),[m,g]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let t=async()=>{try{let e=await (0,y.Ud)("/api/user/usage");if(e.ok){let t=await e.json();x(t)}}catch(e){console.error("Failed to fetch usage:",e)}},r=async()=>{try{let e=await (0,y.Ud)("/api/plans");if(e.ok){let t=await e.json();g(t.plans||[])}}catch(e){console.error("Failed to fetch plans:",e),b.oR.error("Failed to load plans")}finally{h(!1)}};e&&t(),r()},[e]);let j=e?.subscription?.plan==="enterprise"&&e?.subscription?.status==="active"?"enterprise":e?.subscription?.plan==="pro"&&e?.subscription?.status==="active"||e?.isPremium?"premium":"basic",v=async e=>{d(!0);try{let t=await (0,y.Ud)("/api/billing/create-session",{method:"POST",body:JSON.stringify({plan:"premium"===e?"pro":e,paymentMethod:i})});if(!t.ok){let e=await t.json().catch(()=>({}));401===t.status&&(b.oR.error("Please log in to upgrade."),setTimeout(()=>{window.location.href="/auth/login"},800));let r=e.message||e.details||e.error;throw Error(r||"Failed to create checkout session")}let r=await t.json();if(r.sessionUrl)window.location.href=r.sessionUrl;else throw Error("No payment URL received")}catch(e){b.oR.error(e.message||"Failed to start upgrade process. Please try again.")}finally{d(!1)}};return u?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)(C.P.div,{className:"text-center mb-12",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",children:"Upgrade Your Learning Experience"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Choose the perfect plan for your learning journey (or your organization)."})]}),(0,a.jsxs)(C.P.div,{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 uppercase",children:["Current Plan: ",j]}),(0,a.jsxs)("p",{className:"text-blue-700 dark:text-blue-300",children:["You're using ",c.used," out of ",-1===c.limit?"Unlimited":c.limit," monthly course generations"]})]}),-1!==c.limit&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[c.percentage,"%"]}),(0,a.jsx)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Usage this month"})]})]}),-1!==c.limit&&(0,a.jsx)("div",{className:"mt-4 w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c.percentage}%`}})})]}),(0,a.jsxs)(C.P.div,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.25},children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Select Payment Method"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>n("card"),className:`flex items-center space-x-3 p-4 border-2 rounded-lg transition-all ${"card"===i?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)(ee.A,{className:`w-5 h-5 ${"card"===i?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:`font-medium ${"card"===i?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"}`,children:"Credit/Debit Card"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Visa, Mastercard, etc."})]})]}),(0,a.jsxs)("button",{onClick:()=>n("mobile_money"),className:`flex items-center space-x-3 p-4 border-2 rounded-lg transition-all ${"mobile_money"===i?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)(et,{className:`w-5 h-5 ${"mobile_money"===i?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:`font-medium ${"mobile_money"===i?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"}`,children:"Mobile Money"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"M-Pesa, MTN, etc."})]})]})]})]}),(0,a.jsx)(C.P.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:m.map(e=>{let t=(e=>{switch(e){case"basic":default:return p.A;case"premium":return I.A;case"enterprise":return F.A}})(e.id),r=e.id===j,s=e.popular;return(0,a.jsxs)(C.P.div,{className:`relative bg-white dark:bg-gray-800 rounded-2xl shadow-lg border-2 transition-all duration-300 hover:shadow-xl ${s?"border-blue-500 scale-105 z-10":r?"border-green-500":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,whileHover:{y:-5},children:[s&&(0,a.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 w-full text-center",children:(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-1 rounded-full text-sm font-medium shadow-sm",children:"Most Popular"})}),r&&(0,a.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 w-full text-center",children:(0,a.jsx)("span",{className:"bg-green-600 text-white px-4 py-1 rounded-full text-sm font-medium shadow-sm",children:"Current Plan"})}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${s?"bg-gradient-to-r from-blue-600 to-purple-600":`bg-${e.color}-100 dark:bg-${e.color}-900`}`,children:(0,a.jsx)(t,{className:`w-6 h-6 ${s?"text-white":`text-${e.color}-600 dark:text-${e.color}-400`}`})}),(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.name})})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-baseline",children:[(0,a.jsxs)("span",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:["$",e.price]}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"/month"})]})}),(0,a.jsxs)("ul",{className:"space-y-3 mb-8",children:[e.features.slice(0,8).map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start space-x-3",children:[(0,a.jsx)(er.A,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-300 text-sm",children:e})]},t)),e.features.length>8&&(0,a.jsxs)("li",{className:"text-xs text-gray-500 italic",children:["+ ",e.features.length-8," more features"]})]}),(0,a.jsx)(C.P.button,{onClick:()=>!r&&v(e.id),disabled:r||o,whileHover:{scale:r?1:1.02},whileTap:{scale:r?1:.98},className:`w-full py-3 px-4 rounded-lg font-medium transition-all ${r?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed":s?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:r?"Current Plan":o?"Processing...":`Upgrade to ${e.name}`})]})]},e.id)})})]})})}var es=r(51914),el=r(6296),ei=r(96035),en=r(49619),eo=r(56204),ed=r(71552);function ec({topic:e,setHideNavs:t}){let r=(0,l.useSearchParams)().get("topic"),{theme:i}=(0,ed.D)(),{user:n,authLoading:o}=(0,Z.w)(),[d,c]=(0,s.useState)(()=>e||(r?decodeURIComponent(r):null)),[x,m]=(0,s.useState)(d?"chat":"history");(0,s.useEffect)(()=>{t&&t("chat"===x)},[x,t]);let[g,u]=(0,s.useState)(""),[h,f]=(0,s.useState)(!e&&!r),j=(0,s.useRef)(null);if(o||!n)return null;let v=async e=>{if(!e||!n)return[];try{let t=await (0,y.Ud)(`/api/chat/history?topic=${encodeURIComponent(e)}`);if(t.ok)return(await t.json()).messages||[]}catch(e){console.error("Error loading chat history:",e)}return[]},w=async(e,t)=>{if(t&&n&&0!==e.length)try{await (0,y.Ud)("/api/chat/history",{method:"POST",body:JSON.stringify({topic:t,messages:e})})}catch(e){console.error("Error saving chat history:",e)}},[k,N]=(0,s.useState)([]),[C,A]=(0,s.useState)(""),[S,P]=(0,s.useState)(!1),[E,$]=(0,s.useState)(!1),[z,R]=(0,s.useState)([]),[M,T]=(0,s.useState)(!1),[U,F]=(0,s.useState)(!0),[D,I]=(0,s.useState)(!1),[L,q]=(0,s.useState)(!1),[H,G]=(0,s.useState)(!1),[J,Y]=(0,s.useState)(null),B=async()=>{if(n){T(!0);try{let e=await (0,y.Ud)("/api/chat/history?action=topics");if(e.ok){let t=await e.json();R(t.topics||[])}}catch(e){console.error("Error loading chat topics:",e)}finally{T(!1)}}};(0,s.useEffect)(()=>{d&&n?($(!0),N([]),v(d).then(e=>{N(e),$(!1)})):N([])},[d,n]),(0,s.useEffect)(()=>{n&&B()},[n]),(0,s.useEffect)(()=>{k.length>0&&n&&B()},[k.length,n]),(0,s.useEffect)(()=>{if(k.length>0&&d&&n){let e=setTimeout(()=>{w(k,d)},1e3);return()=>clearTimeout(e)}},[k,d,n]),(0,s.useEffect)(()=>{j.current?.scrollIntoView({behavior:"smooth"})},[k]);let W=()=>{g.trim()?(c(g.trim()),u(""),f(!1),b.oR.success(`Topic set to: ${g.trim()}`)):b.oR.error("Please enter a topic")},K=async e=>{N([]),$(!0),c(e),f(!1),m("chat"),await new Promise(e=>setTimeout(e,100)),N(await v(e)),$(!1)},Q=async()=>{if(d)try{(await (0,y.Ud)(`/api/chat/history?topic=${encodeURIComponent(d)}`,{method:"DELETE"})).ok&&(N([]),q(!1),b.oR.success("Chat history cleared"),B())}catch(e){console.error("Error clearing chat history:",e)}},X=async()=>{if(J)try{(await (0,y.Ud)(`/api/chat/history?topic=${encodeURIComponent(J)}&action=delete`,{method:"DELETE"})).ok&&(b.oR.success(`Chat "${J}" deleted`),d===J&&(c(null),N([]),f(!0)),B())}catch(e){console.error("Error deleting chat:",e)}finally{G(!1),Y(null)}},ee=n&&(n.subscription&&("pro"===n.subscription.plan||"enterprise"===n.subscription.plan)&&"active"===n.subscription.status||n.isPremium),et=async()=>{if(!C.trim())return;if(!ee)return void b.oR.error("Premium subscription required for AI tutor chat. Please upgrade.");if(!d)return void b.oR.error("Please set a topic first.");let e={role:"user",content:C.trim(),timestamp:new Date().toISOString()},t=[...k,e];N(t),A(""),P(!0);try{let r=k.map(e=>({role:e.role,content:e.content})),a=await (0,y.Ud)("/api/chat",{method:"POST",body:JSON.stringify({message:e.content,conversationHistory:r,topic:d})}),s=await a.json();if(a.ok){let e={role:"assistant",content:s.response,timestamp:s.timestamp},r=[...t,e];N(r),await w(r,d)}else N(e=>e.slice(0,-1)),b.oR.error(s.error||"Failed to get response")}catch(e){console.error("Chat error:",e),N(e=>e.slice(0,-1))}finally{P(!1)}};return(0,a.jsxs)("div",{className:`flex flex-col w-full h-full overflow-hidden relative ${"dark"===i?"bg-gray-950 text-white":"bg-white text-gray-900"}`,children:["history"===x&&(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-6 max-w-2xl mx-auto w-full space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-black uppercase tracking-widest mb-6 px-2",children:"Your Conversations"}),(0,a.jsxs)("button",{onClick:()=>{k.length>0?I(!0):(c(null),N([]),f(!0),A(""),m("chat"))},className:"w-full flex items-center gap-4 p-3 rounded-2xl bg-indigo-600 text-white active:scale-[0.98] transition-all mb-8",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:(0,a.jsx)(es.A,{size:20})}),(0,a.jsx)("div",{className:"text-left",children:(0,a.jsx)("span",{className:"text-base font-bold",children:"New Question"})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-500 mb-2 px-2",children:"Recent Sessions"}),M?(0,a.jsx)("div",{className:"py-12 flex justify-center text-indigo-600",children:(0,a.jsx)(el.A,{className:"animate-spin"})}):0===z.length?(0,a.jsxs)("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-900/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-800",children:[(0,a.jsx)(ei.A,{className:"mx-auto mb-4 opacity-20",size:48}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"No history yet. Ask your first question!"})]}):z.map(e=>(0,a.jsxs)("button",{onClick:()=>K(e.topic),className:"w-full flex items-center justify-between p-3 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 shadow-sm active:scale-[0.98] transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 text-left",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center",children:(0,a.jsx)(ei.A,{className:"text-indigo-600 dark:text-indigo-400",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block font-bold text-xs tracking-tight truncate max-w-[200px]",children:e.topic}),(0,a.jsxs)("span",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-widest",children:[e.messageCount||0," messages"]})]})]}),(0,a.jsx)(O.A,{size:18,className:"text-gray-400 rotate-180"})]},e.id||e.topic))]})]}),"chat"===x&&(0,a.jsxs)("div",{className:"flex-1 flex flex-col relative w-full h-full bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20",children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-[0.05] dark:opacity-[0.03] pointer-events-none",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/cubes.png")',backgroundRepeat:"repeat"}}),(0,a.jsxs)("div",{className:"h-16 flex items-center justify-between px-4 sticky top-0 w-full bg-white/80 dark:bg-[#111b21]/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700/50 z-10 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>m("history"),className:"p-2 -ml-2 text-gray-500 hover:text-gray-900 dark:hover:text-white rounded-lg",children:(0,a.jsx)(O.A,{className:"w-6 h-6"})}),(0,a.jsx)("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/50 rounded-full flex items-center justify-center mx-3 shadow-inner overflow-hidden",children:ee&&n?.image?(0,a.jsx)("img",{src:n.image,alt:"Avatar",className:"w-full h-full object-cover"}):(0,a.jsx)(en.A,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-sm text-gray-900 dark:text-gray-100 tracking-tight truncate max-w-[150px]",children:d||"AI Tutor"}),(0,a.jsx)("p",{className:"text-[10px] text-green-500 dark:text-green-400 font-bold uppercase tracking-widest",children:"online"})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("button",{onClick:()=>{d&&q(!0)},className:"p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:(0,a.jsx)(_,{className:"w-5 h-5"})})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-4 scroll-smooth z-10",children:[h&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] max-w-2xl mx-auto text-center px-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-white dark:bg-gray-800 rounded-3xl flex items-center justify-center mb-6 shadow-xl active:scale-95 transition-all",children:(0,a.jsx)(p.A,{className:"w-10 h-10 text-indigo-600"})}),(0,a.jsx)("h2",{className:"text-3xl font-black uppercase tracking-tighter text-gray-900 dark:text-white mb-2",children:"Ask Anything"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-8 font-medium",children:"Enter a topic to begin your personalized session"}),(0,a.jsxs)("div",{className:"w-full relative shadow-2xl rounded-3xl overflow-hidden border border-gray-100 dark:border-gray-800",children:[(0,a.jsx)("input",{type:"text",value:g,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&W(),placeholder:"Enter a topic...",className:"w-full px-6 py-5 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-0 outline-none text-lg font-bold",autoFocus:!0}),(0,a.jsx)("button",{onClick:W,className:"absolute right-2 top-2 bottom-2 px-8 bg-indigo-600 text-white rounded-2xl font-black uppercase tracking-widest text-xs",children:"Start"})]})]}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-4",children:[k.map((e,t)=>{let r="user"===e.role,s=e.timestamp?new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return(0,a.jsx)("div",{className:`flex ${r?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2 duration-300`,children:(0,a.jsxs)("div",{className:`max-w-[85%] sm:max-w-[75%] px-4 py-3 rounded-2xl shadow-sm text-sm relative ${r?"bg-indigo-600 text-white rounded-tr-none shadow-indigo-500/10":"bg-white dark:bg-[#1c2c33] text-gray-900 dark:text-white rounded-tl-none border border-gray-100 dark:border-gray-800/50"}`,children:[(0,a.jsx)("div",{className:`prose prose-sm max-w-none break-words ${r?"prose-invert text-white":"dark:prose-invert text-gray-800 dark:text-gray-100"}`,dangerouslySetInnerHTML:{__html:(e=>{if(!e)return"";let t=e;return(t=(t=(t=(t=(t=(t=t.replace(/\*\*([^*]+?)\*\*/g,'<strong class="font-bold text-gray-900 dark:text-gray-100">$1</strong>')).replace(/__([^_]+?)__/g,'<strong class="font-bold text-gray-900 dark:text-gray-100">$1</strong>')).replace(/\*([^*\n]+?)\*/g,'<em class="italic text-gray-800 dark:text-gray-200">$1</em>')).replace(/_([^_\n]+?)_/g,'<em class="italic text-gray-800 dark:text-gray-200">$1</em>')).replace(/<u>([^<]+?)<\/u>/g,'<u class="underline decoration-2">$1</u>')).replace(/`([^`]+)`/g,'<code class="bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm font-mono text-red-500 dark:text-red-400 border border-gray-200 dark:border-gray-700">$1</code>')).replace(/\n/g,"<br />")})(e.content)}}),(0,a.jsxs)("div",{className:`text-[9px] font-bold uppercase tracking-widest mt-2 flex justify-end items-center gap-1 opacity-50 ${r?"text-indigo-100":"text-gray-400"}`,children:[(0,a.jsx)("span",{children:s}),r&&(0,a.jsx)(p.A,{size:10,className:"text-white"})]})]})},t)}),S&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-[#1c2c33] px-4 py-2 rounded-2xl rounded-tl-none shadow-sm flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce delay-75"}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-indigo-600 rounded-full animate-bounce delay-150"})]})}),(0,a.jsx)("div",{ref:j,className:"h-32"})]})]}),(0,a.jsx)("div",{className:"p-4 bg-white/80 dark:bg-gray-950/80 backdrop-blur-md z-20 fixed bottom-0 w-full left-0 border-t border-gray-100 dark:border-gray-800",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto flex items-end gap-2",children:[(0,a.jsx)("div",{className:"flex-1 flex items-end bg-gray-50 dark:bg-[#1c2c33] rounded-[1.5rem] border border-gray-200 dark:border-gray-700 px-4 py-1.5 shadow-inner",children:(0,a.jsx)("textarea",{value:C,onChange:e=>A(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),et())},placeholder:"Type a question...",className:"w-full bg-transparent border-none resize-none max-h-32 py-2 text-sm text-gray-900 dark:text-white font-medium outline-none",rows:1,onInput:e=>{e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}})}),(0,a.jsx)("button",{onClick:et,disabled:S||!C.trim(),className:`w-11 h-11 rounded-full flex items-center justify-center transition-all shadow-md active:scale-90 ${C.trim()?"bg-indigo-600 text-white":"bg-gray-200 dark:bg-gray-800 text-gray-400"}`,children:(0,a.jsx)(eo.A,{className:"w-5 h-5"})})]})})]}),(0,a.jsx)(V,{isOpen:D,onClose:()=>I(!1),onConfirm:()=>{c(null),N([]),f(!0),A(""),I(!1),m("chat")},title:"Start New Session",message:"Would you like to start a fresh learning session? Your history will be preserved.",confirmText:"Confirm",cancelText:"Maybe later",confirmColor:"black"}),(0,a.jsx)(V,{isOpen:L,onClose:()=>q(!1),onConfirm:Q,title:"Clear Context",message:"Clear current chat context? This will remove these messages from memory.",confirmText:"Clear",cancelText:"Cancel",confirmColor:"red"}),(0,a.jsx)(V,{isOpen:H,onClose:()=>G(!1),onConfirm:X,title:"Delete Conversation",message:"Are you sure you want to permanently delete this conversation?",confirmText:"Delete",cancelText:"Cancel",confirmColor:"red"})]})}var ex=r(94655),em=r(80723);let eg=(0,u.A)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);function eu({setActiveContent:e,setHideNavs:t}){let[r,l]=(0,s.useState)([]),[i,n]=(0,s.useState)(!0),[o,d]=(0,s.useState)(null),[c,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t&&t(c&&!!o)},[c,o,t]);let[m,g]=(0,s.useState)(new Set),[u,h]=(0,s.useState)(!1),[j,v]=(0,s.useState)(new Set),[w,k]=(0,s.useState)(!1),[N,C]=(0,s.useState)(null),{user:A,refreshToken:S}=(0,f.h)();A&&(A.subscription&&"pro"===A.subscription.plan&&"active"===A.subscription.status||A.isPremium),(0,s.useEffect)(()=>{P();try{let e=localStorage.getItem("bookmarked_flashcards");e&&v(new Set(JSON.parse(e)))}catch{}},[]);let P=async(e=!0)=>{try{let t=await (0,y.Ud)("/api/flashcards",{headers:{"Content-Type":"application/json"}});if(401===t.status&&e){if(console.log("Token expired, attempting to refresh..."),await S())return P(!1);return void b.oR.error("Session expired. Please log in again.")}if(t.ok){let e=await t.json();l(e.cards||[])}else b.oR.error("Failed to load flashcards")}catch(e){console.error("Error fetching flashcards:",e),b.oR.error("Error loading flashcards")}finally{n(!1)}},E=async(e=!0)=>{if(N)try{let t=await (0,y.Ud)(`/api/flashcards/${N._id}`,{method:"DELETE"});if(401===t.status&&e){if(await S())return E(!1);return void b.oR.error("Session expired. Please log in again.")}t.ok?(l(r.filter(e=>e._id!==N._id)),b.oR.success("Flashcard set deleted successfully"),k(!1),C(null)):b.oR.error("Failed to delete flashcard set")}catch(e){console.error("Error deleting flashcard set:",e),b.oR.error("Error deleting flashcard set")}},$=async(e,t=!0)=>{let r=j.has(e),a=new Set(j);r?a.delete(e):a.add(e),v(a);try{localStorage.setItem("bookmarked_flashcards",JSON.stringify([...a]))}catch{}try{let a=await (0,y.Ud)("/api/library",{method:"POST",headers:{"Content-Type":"application/json","x-user-id":A?._id||A?.id||""},body:JSON.stringify({action:"bookmark",itemId:`cards_${e}`})});if(401===a.status&&t&&await S())return $(e,!1);if(a.ok)b.oR.success(r?"Removed from bookmarks":"Added to bookmarks");else{let t=new Set(j);r?t.add(e):t.delete(e),v(t);try{localStorage.setItem("bookmarked_flashcards",JSON.stringify([...t]))}catch{}b.oR.error("Failed to update bookmark")}}catch(a){let t=new Set(j);r?t.add(e):t.delete(e),v(t);try{localStorage.setItem("bookmarked_flashcards",JSON.stringify([...t]))}catch{}console.error("Error bookmarking card:",a),b.oR.error("Failed to update bookmark")}};return i?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-48 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-64"})]}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-40"})]}),(0,a.jsx)("div",{className:"py-12 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl mb-12 border border-gray-200/50 dark:border-slate-700/50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-16 mx-auto mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-24 mx-auto"})]},t))})})}),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-64 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-96"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((e,t)=>(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-300 dark:bg-gray-600 rounded-xl w-12 h-12"}),(0,a.jsx)("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded-full w-20"})]}),(0,a.jsx)("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-6"}),(0,a.jsx)("div",{className:"flex items-center gap-2 mb-6 py-3 border-t border-gray-200 dark:border-slate-700",children:(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-16"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-10"}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded flex-1"})]}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-10"})]}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-full mt-4"})]},t))})]}):c&&o?(0,a.jsxs)("div",{className:`min-h-screen bg-white dark:bg-slate-900 transition-opacity duration-300 ${u?"opacity-0":"opacity-100"}`,children:[(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("button",{onClick:()=>{x(!1),d(null)},className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors","aria-label":"Back to flashcards library",children:[(0,a.jsx)(em.A,{size:20}),(0,a.jsx)("span",{children:"Back"})]})}),(0,a.jsx)(ex.A,{cardData:o})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:"My Flashcards"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2",children:"View and manage your generated flashcard sets"})]}),(0,a.jsxs)("button",{onClick:()=>e("generate"),className:"w-full sm:w-auto bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer",children:[(0,a.jsx)(es.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Create New"})]})]}),0===r.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:(0,a.jsx)(p.A,{className:"w-16 h-16 mx-auto"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No flashcards yet"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first flashcard set to get started"})]}):(0,a.jsxs)(a.Fragment,{children:[(()=>{let e=r.length,t=r.reduce((e,t)=>e+(t.totalCards||0),0),s=0;try{s=r.reduce((e,t)=>{let r=`opened_cards_${t._id}`,a=localStorage.getItem(r);if(!a)return e;try{let t=JSON.parse(a);return e+(Array.isArray(t)?t.length:0)}catch{return e}},0)}catch{}let l=j.size;return(0,a.jsx)("div",{className:"py-8 sm:py-10 mb-12",children:(0,a.jsx)("div",{className:"max-w-full mx-auto px-0 ",children:(0,a.jsxs)("div",{className:"flex flex-wrap justify-between gap-6",children:[(0,a.jsx)("div",{className:"relative overflow-hidden rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 flex-1 min-w-[240px]",children:(0,a.jsxs)("div",{className:"relative p-5 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 flex items-center justify-center font-bold",children:e}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Sets"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Collections you've created"})]})]})}),(0,a.jsx)("div",{className:"relative overflow-hidden rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 flex-1 min-w-[240px]",children:(0,a.jsxs)("div",{className:"relative p-5 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-300 flex items-center justify-center font-bold",children:t}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Cards"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Across all sets"})]})]})}),(0,a.jsx)("div",{className:"relative overflow-hidden rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 flex-1 min-w-[240px]",children:(0,a.jsxs)("div",{className:"relative p-5 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-300 flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Opened Cards"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Across all sets (this device)"})]})]})}),(0,a.jsx)("div",{className:"relative overflow-hidden rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 flex-1 min-w-[240px]",children:(0,a.jsxs)("div",{className:"relative p-3 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-300 flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text:white",children:l})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bookmarked"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Sets saved for quick access"})]})]})})]})})})})(),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 text-balance",children:"Your Flashcards Library"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-balance",children:"Master key concepts with your personalized flashcard collections"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(e=>{let t=(e.difficulty||e.level||"beginner").toLowerCase(),r=t.charAt(0).toUpperCase()+t.slice(1),s="beginner"===t?"bg-green-500/15 text-green-600 border-green-500/30 dark:bg-green-500/20 dark:text-green-300":"intermediate"===t?"bg-yellow-500/15 text-yellow-600 border-yellow-500/30 dark:bg-yellow-500/20 dark:text-yellow-300":"bg-red-500/15 text-red-600 border-red-500/30 dark:bg-red-500/20 dark:text-red-300",l=e.totalCards??(Array.isArray(e.cards)?e.cards.length:0);return(0,a.jsx)("div",{className:"h-full",children:(0,a.jsxs)("div",{className:"relative flex h-full flex-col rounded-xl border border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800 transition-colors hover:border-blue-300 dark:hover:border-blue-500",children:[(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 min-w-0",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 flex items-center justify-center shrink-0",children:(0,a.jsx)(p.A,{size:20})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 text-balance",children:e.title}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400 line-clamp-1",children:e.topic?`Flashcards for ${e.topic}`:"Interactive flashcards to master key concepts."})]})]}),(0,a.jsx)("div",{className:`inline-flex items-center px-3 py-1 rounded-full border text-xs font-semibold ${s}`,children:r})]}),(0,a.jsx)("div",{className:"mt-4 flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)(p.A,{size:14,className:"text-gray-500 dark:text-gray-400"}),(0,a.jsx)("span",{className:"font-medium",children:l}),(0,a.jsx)("span",{children:"cards"})]})})]}),(0,a.jsxs)("div",{className:"mt-auto px-5 pb-5",children:[(0,a.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("button",{onClick:()=>$(e._id),className:`p-2 rounded-lg border transition-colors ${j.has(e._id)?"text-yellow-600 dark:text-yellow-300 border-yellow-300/40 bg-yellow-50 dark:bg-yellow-900/20":"text-gray-600 dark:text-gray-300 border-gray-200 dark:border-slate-700 hover:bg-yellow-50/40 dark:hover:bg-yellow-900/10 hover:text-yellow-600"}`,title:j.has(e._id)?"Remove bookmark":"Bookmark",children:(0,a.jsx)(eg,{size:18,className:j.has(e._id)?"fill-current":""})})})}),(0,a.jsxs)("button",{onClick:async()=>{h(!0),g(t=>new Set(t).add(e._id)),setTimeout(()=>{d(e),x(!0),g(t=>{let r=new Set(t);return r.delete(e._id),r}),h(!1)},300)},disabled:m.has(e._id),className:"w-full mt-4 py-2.5 px-4 rounded-xl bg-blue-600 hover:bg-blue-700 dark:bg-blue-600/90 dark:hover:bg-blue-600 text-white font-semibold text-sm transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(p.A,{size:16}),(0,a.jsx)("span",{children:m.has(e._id)?"Loading...":"Study Flashcards"})]})]})]})},e._id)})})]}),w&&N&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md shadow-2xl border border-gray-200 dark:border-slate-700",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full mx-auto mb-4",children:(0,a.jsx)(_,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Delete Flashcard Set"}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:["Are you sure you want to delete"," ",(0,a.jsxs)("strong",{children:['"',N.title,'"']}),"? This action cannot be undone."]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{k(!1),C(null)},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:E,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})})]})}var eh=r(76645),ep=r(56310);function eb({setHideNavs:e}){let t=(0,l.useRouter)(),r=(0,l.useSearchParams)(),{user:i,loading:n,fetchUser:d}=(0,f.h)(),c=r.get("tab")||"generate";(0,s.useEffect)(()=>{e&&e(!1)},[c,e]),(0,s.useEffect)(()=>{let e=r.get("payment"),a=r.get("plan");"success"===e?(b.oR.success(`ðŸŽ‰ Payment successful! You now have ${a||"Pro"} plan access.`),d&&d(),t.replace("/dashboard")):"failed"===e?(b.oR.error("Payment failed. Please try again."),t.replace("/dashboard")):"error"===e&&(b.oR.error("An error occurred during payment. Please contact support."),t.replace("/dashboard"))},[r,t,d]);let x="chat"===c,m={generate:w,explore:N.default,library:B,flashcards:eu,quizzes:eh.default,"staff-picks":X,upgrade:ea,chat:ec,profile:ep.default},g=m[c]||m.generate;return(0,a.jsx)("div",{className:`relative bg-gray-50 dark:bg-gray-900 ${x?"h-[calc(100vh-64px)] overflow-hidden":""}`,children:(0,a.jsxs)("div",{className:x?"w-full h-full":"max-w-[90rem] w-full mx-auto px-3 sm:px-6 lg:px-8 xl:px-12 py-6 sm:py-8 lg:py-12 scrollbar-hide",style:x?{}:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[!x&&(0,a.jsx)(o(),{id:"8acd18d6d010af34",children:".scrollbar-hide.jsx-8acd18d6d010af34::-webkit-scrollbar{display:none}"}),(0,a.jsx)("div",{className:x?"h-full":"grid grid-cols-1 gap-4 sm:gap-6",children:(0,a.jsx)("div",{className:"w-full h-full",children:g?(0,a.jsx)(g,{setActiveContent:e=>{let a=new URLSearchParams(r);a.set("tab",e),t.push(`/dashboard?${a.toString()}`)},setHideNavs:e},c):(0,a.jsx)("div",{className:"text-center text-gray-600 dark:text-gray-400",children:"Loading content..."})})})]})})}function ey(){let e=(0,l.useSearchParams)(),t=(0,l.useRouter)(),r=e.get("tab")||"generate";return(0,a.jsx)(i.default,{activeContent:r,setActiveContent:r=>{let a=new URLSearchParams(e);a.set("tab",r),t.push(`/dashboard?${a.toString()}`)},children:(0,a.jsx)(eb,{})})}},96035:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])}},e=>{e.O(0,[3930,293,6609,8500,8991,8894,5333,4702,6761,8393,9776,5308,50,2261,6310,6645,8441,3794,7358],()=>e(e.s=4272)),_N_E=e.O()}]);