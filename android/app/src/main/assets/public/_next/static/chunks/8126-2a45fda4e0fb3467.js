"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8126],{98126:(t,e,o)=>{o.d(e,{Iu:()=>c,O5:()=>n});var i=o(18831);let l=[37,99,235],a=[31,41,55],s=[107,114,128],r=[229,231,235],n=async(t,e="course")=>{if(!t)throw Error("No data provided");let n=new i.Ay({orientation:"portrait",unit:"mm",format:"a4"}),c=25,h=(t,e)=>{n.setDrawColor(...r),n.setLineWidth(.2),n.line(20,15,190,15),n.line(20,282,190,282),n.setFont("helvetica","normal"),n.setFontSize(8),n.setTextColor(...s),n.text("Actinova AI Tutor - Personalized Learning",20,287),n.text("Copyright \xa9 Actinova AI Tutor. All rights reserved.",105,287,{align:"center"}),n.text(`Page ${t} of ${e}`,190,287,{align:"right"})},d=t=>c+t>272&&(n.addPage(),c=25,!0);n.setFillColor(255,255,255),n.rect(0,0,210,297,"F"),c=40;try{n.addImage("/logo.png","PNG",85,c,40,40),c+=45}catch(t){c=80}c+=16,n.setTextColor(...a),n.setFont("helvetica","bold"),n.setFontSize(48),n.text("ACTINOVA",105,c,{align:"center"}),c+=12,n.setFontSize(24),n.text("AI TUTOR PLATFORM",105,c,{align:"center"}),c=150;let p=n.splitTextToSize(t.title||"Study Material",150),g=12*p.length;n.setDrawColor(...l),n.setLineWidth(.5),n.roundedRect(15,c-15,180,40+g+20,2,2,"D"),n.setTextColor(...l),n.setFontSize(14),n.text("NOTES"===e.toUpperCase()?"PERSONALIZED STUDY NOTES":"PERSONALIZED COURSE MATERIAL",105,c,{align:"center"}),c+=15,n.setTextColor(...a),n.setFontSize(28),n.text(p,105,c,{align:"center"}),c+=12*p.length+10,n.setFontSize(12),n.setTextColor(...s),n.text(`Generated on ${new Date().toLocaleDateString()}`,105,c,{align:"center"}),n.addPage(),c=30;let x=(t,e,o=11)=>{n.setFontSize(o),n.setFont("helvetica","normal"),n.setTextColor(...a);let i=t.replace(/\*\*\*([^*]+)\*\*\*/g,"$1").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/~~([^~]+)~~/g,"$1").replace(/`([^`]+)`/g,"$1").trim();n.splitTextToSize(i,170-(e-20)).forEach(t=>{d(8),n.text(t,e,c),c+=7})},u=(t,e=null)=>{if(!t)return;let o=t.split("\n"),i=!1,h=!1,p=!0;o.forEach(t=>{let o=t.trim();if(o.startsWith("```")){i=!i,c+=2,p=!1;return}if(i){n.setFont("courier","normal"),n.setFontSize(10),n.setFillColor(245,245,245),n.rect(22,c-4,166,6,"F"),n.text(t,24,c),c+=6,n.setFont("helvetica","normal"),p=!1;return}if(["---","***","___"].includes(o)){d(10),c+=5,n.setDrawColor(...r),n.setLineWidth(.5),n.line(20,c,190,c),c+=8,p=!1;return}if(!o){c+=5,p=!1;return}if(d(12),o.startsWith("# Module: ")||o.startsWith("MODULE: ")||o.startsWith("Module: ")){p=!1;return}if(o.startsWith("## LESSON: ")||o.startsWith("LESSON: ")||o.startsWith("Lesson: ")){c+=5,n.setFont("helvetica","bold"),n.setFontSize(20),n.setTextColor(...l);let t=o.replace(/^##\s*/,"").replace(/^LESSON:\s*/i,"");t=t.toUpperCase();let e=n.splitTextToSize(t,170);n.text(e,20,c),c+=10*e.length;let i=n.getTextWidth(e[e.length-1]);n.setDrawColor(...l),n.setLineWidth(.8),n.line(20,c-2,20+i,c-2),c+=5,p=!1;return}if(p&&!o.startsWith("#")&&!o.startsWith("##")&&!o.startsWith("###")&&!o.startsWith("> ")&&!o.match(/^[-*•]\s/)&&!o.match(/^\d+\.\s/)){c+=5,n.setFont("helvetica","bold"),n.setFontSize(26),n.setTextColor(...l);let t=n.splitTextToSize(o,160);n.text(t,20,c),c+=12*t.length+8,p=!1;return}if(p=!1,o.startsWith("# ")){let t=o.substring(2).replace(/[\*_]/g,"").trim();if(!h&&e&&t.toLowerCase().includes(e.toLowerCase())){h=!0;return}c+=5,n.setFont("helvetica","bold"),n.setFontSize(26),n.setTextColor(...l);let i=n.splitTextToSize(t,170);n.text(i,20,c),c+=12*i.length+8}else if(o.startsWith("## ")){c+=5,n.setFont("helvetica","bold"),n.setFontSize(20),n.setTextColor(...l);let t=o.substring(3).replace(/[\*_]/g,"").trim(),e=n.splitTextToSize(t,170);n.text(e,20,c),c+=10*e.length;let i=n.getTextWidth(e[e.length-1]);n.setDrawColor(...l),n.setLineWidth(.8),n.line(20,c-2,20+i,c-2),c+=5}else if(o.startsWith("### ")){c+=4,n.setFont("helvetica","bold"),n.setFontSize(16),n.setTextColor(...a);let t=o.substring(4).replace(/[\*_]/g,"").trim(),e=n.splitTextToSize(t,170);n.text(e,20,c),c+=9*e.length+4}else if(o.startsWith("#### ")){c+=3,n.setFont("helvetica","bold"),n.setFontSize(14),n.setTextColor(...a);let t=o.substring(5).replace(/[\*_]/g,"").trim(),e=n.splitTextToSize(t,170);n.text(e,20,c),c+=8*e.length+3}else if(o.startsWith("> ")){let t=o.substring(2).trim();n.setFont("helvetica","italic"),n.setTextColor(...s);let e=n.splitTextToSize(t,160);d(6*e.length+4),n.setDrawColor(...r),n.setLineWidth(1),n.line(22,c-4,22,c+6*e.length-4),n.text(e,28,c),c+=6*e.length+4,n.setFont("helvetica","normal")}else if(o.match(/^[-*•]\s/))n.setFont("helvetica","bold"),n.setTextColor(...l),n.text("•",22,c),x(o.replace(/^[-*•]\s/,""),28);else if(o.match(/^\d+\.\s/)){let t=o.match(/^\d+\./)[0];n.setFont("helvetica","bold"),n.setTextColor(...l),n.text(t,20,c),x(o.replace(/^\d+\.\s/,""),30)}else x(o,20)})};if("course"===e){let e=t.modules||t.courseData?.modules||[];n.setFont("helvetica","bold"),n.setFontSize(24),n.setTextColor(...l),n.text("Table of Contents",20,c),c+=15,e.forEach((t,e)=>{d(12),n.setFontSize(12),n.setFont("helvetica","normal"),n.setTextColor(...a),n.text(`Module ${e+1}: ${t.title}`,20,c),c+=8}),e.forEach((t,e)=>{n.addPage(),c=35,t.lessons?.forEach((t,o)=>{d(20),n.setFont("helvetica","bold"),n.setFontSize(16),n.setTextColor(...a),n.text(`${e+1}.${o+1} ${t.title||t}`,20,c),c+=12,t.content&&u(t.content,t.title||t),c+=10})})}else u(t.content,t.title);let T=n.internal.pages.length-1;for(let t=1;t<=T;t++)n.setPage(t),h(t,T);let C=`${t.title?.replace(/\s+/g,"_").toLowerCase()||"actinova_study"}.pdf`;if(window.Capacitor||"capacitor:"===window.location.protocol)try{let e=n.output("datauristring").split(",")[1],{Filesystem:i,Directory:l}=await Promise.all([o.e(7805),o.e(8276)]).then(o.bind(o,78276)).catch(()=>({})),{Share:a}=await Promise.all([o.e(7805),o.e(8493)]).then(o.bind(o,98493)).catch(()=>({})),{LocalNotifications:s}=await Promise.all([o.e(7805),o.e(9968)]).then(o.bind(o,59968)).catch(()=>({}));if(!i||!a||!s)throw Error("Capacitor plugins not available");try{await s.requestPermissions()}catch(t){console.warn("Notification permissions denied",t)}let r=await i.writeFile({path:C,data:e,directory:l.Documents});await s.schedule({notifications:[{title:"Download Complete",body:`${t.title} saved to Documents. Tap to view.`,id:Math.floor(1e5*Math.random()),schedule:{at:new Date(Date.now()+100)},sound:null,attachments:null,actionTypeId:"",extra:null}]}),await a.share({title:"Actinova PDF Download",text:`Personalized material for ${t.title}`,url:r.uri,dialogTitle:"Save or Open PDF"})}catch(t){console.error("Capacitor PDF error:",t),n.save(C)}else n.save(C)},c=async t=>{if(!t||!t.questions)throw Error("No data provided");let e=new i.Ay({orientation:"portrait",unit:"mm",format:"a4"}),n=40,c=(o,i)=>{e.setDrawColor(...r),e.setLineWidth(.2),e.line(20,15,190,15),e.setFontSize(8),e.setTextColor(...s),e.text(`Actinova AI Tutor - Assessment: ${t.title}`,20,12),o&&e.text(`Page ${o} of ${i}`,190,12,{align:"right"})};c(),e.setFont("helvetica","bold"),e.setFontSize(24),e.setTextColor(...l),e.text("ASSESSMENT PAPER",105,n,{align:"center"}),n+=12,e.setFontSize(14),e.setTextColor(...s),e.text(`Subject: ${t.topic||"General Knowledge"}`,105,n,{align:"center"}),n+=20,e.setDrawColor(...l),e.setLineWidth(1),e.line(20,n,190,n),n+=15,t.questions.forEach((t,o)=>{let i=e.splitTextToSize(`${o+1}. ${t.text}`,160),l=8*(t.options?.length||0);n+6*i.length+l+20>267&&(e.addPage(),c(),n=25),e.setFont("helvetica","bold"),e.setFontSize(12),e.setTextColor(...a),e.text(i,20,n),n+=6*i.length+5,t.options?(e.setFont("helvetica","normal"),e.setFontSize(11),t.options.forEach((t,o)=>{e.setTextColor(...s),e.text(String.fromCharCode(65+o)+")",25,n),e.setTextColor(...a),e.text(e.splitTextToSize(t,150),35,n),n+=8})):(e.setDrawColor(...r),e.line(25,n+5,185,n+5),n+=15),n+=10}),e.addPage(),c(),n=30,e.setFont("helvetica","bold"),e.setFontSize(18),e.setTextColor(...l),e.text("ANSWER KEY",20,n),n+=15,e.setFontSize(11),t.questions.forEach((t,o)=>{n>277&&(e.addPage(),c(),n=25),e.setFont("helvetica","bold"),e.setTextColor(...a),e.text(`${o+1}: `,20,n),e.setFont("helvetica","normal"),e.setTextColor(...l),e.text(String(t.correctAnswer),30,n),n+=8});let h=e.internal.pages.length-1;for(let t=1;t<=h;t++)e.setPage(t),c(t,h);let d=window.Capacitor||"capacitor:"===window.location.protocol,p=`assessment_${t.title?.replace(/\s+/g,"_").toLowerCase()||"exam"}.pdf`;if(d)try{let i=e.output("datauristring").split(",")[1],{Filesystem:l,Directory:a}=await Promise.all([o.e(7805),o.e(8276)]).then(o.bind(o,78276)).catch(()=>({})),{Share:s}=await Promise.all([o.e(7805),o.e(8493)]).then(o.bind(o,98493)).catch(()=>({})),{LocalNotifications:r}=await Promise.all([o.e(7805),o.e(9968)]).then(o.bind(o,59968)).catch(()=>({}));if(!l||!s||!r)throw Error("Capacitor plugins not available");try{await r.requestPermissions()}catch(t){console.warn("Notification permissions denied",t)}let n=await l.writeFile({path:p,data:i,directory:a.Documents});await r.schedule({notifications:[{title:"Download Complete",body:`Assessment for ${t.title} saved to Documents.`,id:Math.floor(1e5*Math.random()),schedule:{at:new Date(Date.now()+100)},sound:null,attachments:null,actionTypeId:"",extra:null}]}),await s.share({title:"Actinova Assessment Download",text:`Assessment paper for ${t.title}`,url:n.uri,dialogTitle:"Save or Open PDF"})}catch(t){console.error("Capacitor PDF error:",t),e.save(p)}else e.save(p)}}}]);