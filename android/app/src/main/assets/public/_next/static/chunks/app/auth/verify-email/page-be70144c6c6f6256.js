(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3270],{5214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=r(17828)},13545:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},17828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,r(64054).createAsyncLocalStorage)()},21957:(e,t,r)=>{"use strict";function a({moduleIds:e}){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),r(95155),r(47650),r(5214),r(2451),r(53887)},37206:(e,t,r)=>{"use strict";r.d(t,{default:()=>i.a});var a=r(75707),i=r.n(a)},41112:(e,t,r)=>{"use strict";function a({reason:e,children:t}){return t}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),r(1980)},49946:(e,t,r)=>{Promise.resolve().then(r.bind(r,96924))},64054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={bindSnapshot:function(){return o},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return d}};for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]});let i=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class n{disable(){throw i}getStore(){}run(){throw i}exit(){throw i}enterWith(){throw i}static bind(e){return e}}let s="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return s?new s:new n}function o(e){return s?s.bind(e):n.bind(e)}function d(){return s?s.snapshot():function(e,...t){return e(...t)}}},68635:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=r(95155),i=r(12115),n=r(41112);function s(e){return{default:e&&"default"in e?e.default:e}}r(21957);let l={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},o=function(e){let t={...l,...e},r=(0,i.lazy)(()=>t.loader().then(s)),o=t.loading;function d(e){let s=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,d=l?i.Suspense:i.Fragment,c=t.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(d,{...l?{fallback:s}:{},children:c})}return d.displayName="LoadableComponent",d}},73321:(e,t,r)=>{"use strict";var a=r(74645);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},75707:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let a=r(31836)._(r(68635));function i(e,t){let r={};"function"==typeof e&&(r.loader=e);let i={...r,...t};return(0,a.default)({...i,modules:i.loadableGenerated?.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},78340:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(12115);let i=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:l="",children:o,iconNode:d,...c},u)=>(0,a.createElement)("svg",{ref:u,...s,width:t,height:t,stroke:e,strokeWidth:i?24*Number(r)/Number(t):r,className:n("lucide",l),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...s},o)=>(0,a.createElement)(l,{ref:o,iconNode:t,className:n(`lucide-${i(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...s}));return r.displayName=i(e),r}},80723:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},92289:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},96924:(e,t,r)=>{"use strict";r.d(t,{default:()=>h});var a=r(95155),i=r(12115),n=r(73321),s=r(98500),l=r.n(s),o=r(5669),d=r(92289);let c=(0,r(78340).A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var u=r(13545),m=r(80723),f=r(66609),y=r(28393);function h(){let[e,t]=(0,i.useState)(""),[r,s]=(0,i.useState)(null),[h,x]=(0,i.useState)(!1),[g,p]=(0,i.useState)(!1),[b,v]=(0,i.useState)(0),[j,k]=(0,i.useState)(""),w=(0,n.useRouter)(),N=(0,n.useSearchParams)(),{fetchUser:S}=(0,y.h)();(0,i.useEffect)(()=>{let e=localStorage.getItem("pendingVerificationEmail");e&&k(e);let t=N.get("token");t&&P(t)},[N]);let P=async e=>{x(!0);try{let t=await (0,o.Ud)("/api/verify-email",{method:"POST",body:JSON.stringify({token:e})}),r=await t.json();if(t.ok){f.oR.success(r.message);try{await (0,o.Ud)("/api/send-welcome-email",{method:"POST",body:JSON.stringify({email:r.user.email,firstName:r.user.name?.split(" ")[0]||"User"})})}catch(e){console.error("Failed to send welcome email:",e)}await S(),localStorage.removeItem("pendingVerificationEmail"),w.push("/onboarding")}else s("error"),f.oR.error(r.error||"Email verification failed")}catch(e){s("error"),f.oR.error("Failed to verify email")}finally{x(!1)}},O=async()=>{if(!(b>0)){p(!0);try{let e=await (0,o.Ud)("/api/resend-verification",{method:"POST",body:JSON.stringify({email:j})}),t=await e.json();if(e.ok){f.oR.success("Verification email sent! Please check your inbox."),v(60);let e=setInterval(()=>{v(t=>t<=1?(clearInterval(e),0):t-1)},1e3)}else f.oR.error(t.error||"Failed to resend email")}catch(e){f.oR.error("Failed to resend verification email")}finally{p(!1)}}},_=async t=>{if(t.preventDefault(),!e.trim())return void f.oR.error("Please enter the verification code from your email");x(!0);try{let t=await (0,o.Ud)("/api/verify-email",{method:"POST",body:JSON.stringify({code:e})}),r=await t.json();t.ok?(f.oR.success(r.message),await S(),localStorage.removeItem("pendingVerificationEmail"),w.push("/onboarding")):(s("error"),f.oR.error(r.error||"Email verification failed"))}catch(e){s("error"),f.oR.error("Failed to verify email")}finally{x(!1)}};return"success"===r?null:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)(l(),{href:"/",className:"inline-flex items-center space-x-3 mb-8",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"w-6 h-6 text-white"})}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Actinova AI Tutor"})]}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Verify Your Email"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter the verification code sent to your email address"})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:_,children:[(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"token",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verification Code"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{id:"token",name:"token",type:"text",required:!0,value:e,onChange:e=>t(e.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"Enter the 6-digit verification code"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Enter the 6-digit code from your email"})]})}),"error"===r&&(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-red-900 dark:text-red-100",children:"Verification Failed"}),(0,a.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:"The code you entered is invalid or has expired. Please check your email and try again."})]})]})}),(0,a.jsx)("button",{type:"submit",disabled:h||!e.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:h?"Verifying...":"Verify Email"}),(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Didn't receive the code?"," ",(0,a.jsx)("button",{type:"button",onClick:O,disabled:g||b>0,className:"text-blue-600 hover:text-blue-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Sending...":b>0?`Resend in ${b}s`:"Resend email"})]}),(0,a.jsx)("div",{children:(0,a.jsxs)(l(),{href:"/auth/login",className:"inline-flex items-center text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"Back to Sign In"]})})]})]})]})})}}},e=>{e.O(0,[6609,8500,8393,8441,3794,7358],()=>e(e.s=49946)),_N_E=e.O()}]);