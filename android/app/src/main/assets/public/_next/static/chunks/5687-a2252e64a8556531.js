"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5687],{55687:(e,r,a)=>{a.d(r,{default:()=>f});var t=a(95155),s=a(12115),l=a(50807),d=a(86277),i=a(98500),n=a.n(i),c=a(39840),o=a(94961),x=a(84980),g=a(52484),m=a(11951),y=a(92622),b=a(48368),h=a(66609),u=a(99776),p=a(5669);let f=({setHideNavs:e})=>{let r,a,i,f,[j,k]=(0,s.useState)([]),[N,v]=(0,s.useState)(!0),[w,z]=(0,s.useState)(null),[A,S]=(0,s.useState)(1),[C,$]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&e(!!C)},[C,e]);let[q,_]=(0,s.useState)(!1),[T,Z]=(0,s.useState)("all"),[R,B]=(0,s.useState)("all"),[E,D]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{(async()=>{try{let e=await (0,p.Ud)("/api/quizzes");if(e.ok){let r=await e.json();k(r);let a=r.length,t=0,s=0,l=0;r.forEach(e=>{if(e.performances&&e.performances.length>0){l++,t+=e.performances.length;let r={};e.performances.forEach(e=>{let a=e.userId.toString();(!r[a]||e.percentage>r[a])&&(r[a]=e.percentage)}),s+=Object.values(r).reduce((e,r)=>e+r,0)}});let d=l>0?Math.round(s/l):0;z({totalTests:a,completedTests:l,totalAttempts:t,averageScore:d})}else h.oR.error("Failed to fetch quizzes")}catch(e){h.oR.error("An error occurred while fetching quizzes")}finally{v(!1),_(!0)}})()},[]),C)?(0,t.jsx)(u.A,{quizData:C,topic:C.course,onBack:()=>$(null)}):(0,t.jsxs)("div",{className:"p-4 sm:p-8 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen",children:[(0,t.jsxs)("header",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-4xl font-bold tracking-tight flex items-center",children:[(0,t.jsx)(c.A,{className:"w-8 h-8 mr-3 text-blue-500"}),"Test Your Knowledge"]}),(0,t.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400 mt-2",children:"Challenge yourself with quizzes on various topics."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)(l.Zp,{className:`bg-blue-50 dark:bg-gray-800 border border-blue-200 dark:border-gray-700 shadow-none py-3 gap-3 transition-opacity duration-500 ${q?"opacity-100":"opacity-0"}`,children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-center justify-between pb-1",children:[(0,t.jsx)(l.ZB,{className:"text-sm font-medium text-blue-600 dark:text-gray-400",children:"Total Tests"}),(0,t.jsx)(o.A,{className:"w-6 h-6 text-blue-500 dark:text-gray-500"})]}),(0,t.jsxs)(l.Wu,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:N?"...":j.length}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Assignments & Quizzes"})]})]}),(0,t.jsxs)(l.Zp,{className:`bg-yellow-50 dark:bg-gray-800 border border-yellow-200 dark:border-gray-700 shadow-none py-3 gap-3 transition-opacity duration-500 ${q?"opacity-100":"opacity-0"}`,children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-center justify-between pb-1",children:[(0,t.jsx)(l.ZB,{className:"text-sm font-medium text-yellow-600 dark:text-gray-400",children:"Pending"}),(0,t.jsx)(x.A,{className:"w-6 h-6 text-yellow-500 dark:text-gray-500"})]}),(0,t.jsxs)(l.Wu,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:N?"...":j.length}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Need completion"})]})]}),(0,t.jsxs)(l.Zp,{className:`bg-green-50 dark:bg-gray-800 border border-green-200 dark:border-gray-700 shadow-none py-3 gap-3 transition-opacity duration-500 ${q?"opacity-100":"opacity-0"}`,children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-center justify-between pb-1",children:[(0,t.jsx)(l.ZB,{className:"text-sm font-medium text-green-600 dark:text-gray-400",children:"Completed Tests"}),(0,t.jsx)(g.A,{className:"w-6 h-6 text-green-500 dark:text-gray-500"})]}),(0,t.jsxs)(l.Wu,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:N?"...":w?.completedTests||0}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Out of ",w?.totalTests||0," tests"]})]})]}),(0,t.jsxs)(l.Zp,{className:`bg-purple-50 dark:bg-gray-800 border border-purple-200 dark:border-gray-700 shadow-none py-3 gap-3 transition-opacity duration-500 ${q?"opacity-100":"opacity-0"}`,children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-center justify-between pb-1",children:[(0,t.jsx)(l.ZB,{className:"text-sm font-medium text-purple-600 dark:text-gray-400",children:"Average Score"}),(0,t.jsx)(m.A,{className:"w-6 h-6 text-purple-500 dark:text-gray-500"})]}),(0,t.jsxs)(l.Wu,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:N?"...":`${w?.averageScore||0}%`}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Across all completed tests"})]})]})]}),(0,t.jsxs)("div",{className:`bg-indigo-50 dark:bg-gray-800 p-6 rounded-lg border border-indigo-200 dark:border-gray-700 transition-opacity duration-500 ${q?"opacity-100":"opacity-0"}`,children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Available Quizzes"}),(0,t.jsxs)(d.$,{variant:"outline",onClick:()=>D(!E),className:"mt-2 sm:mt-0",children:[(0,t.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),E&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Difficulty"}),(0,t.jsxs)("select",{value:T,onChange:e=>Z(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[(0,t.jsx)("option",{value:"all",children:"All Difficulties"}),(0,t.jsx)("option",{value:"beginner",children:"Beginner"}),(0,t.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,t.jsx)("option",{value:"advanced",children:"Advanced"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,t.jsxs)("select",{value:R,onChange:e=>B(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[(0,t.jsx)("option",{value:"all",children:"All Tests"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"completed",children:"Completed"})]})]})]}),("all"!==T||"all"!==R)&&(0,t.jsx)("div",{className:"mt-4 flex gap-2",children:(0,t.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>{Z("all"),B("all")},children:"Clear Filters"})})]}),N?(0,t.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"Loading quizzes..."}):0===j.length?(0,t.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[(0,t.jsx)("p",{className:"mb-2",children:"No quizzes available yet."}),(0,t.jsxs)("p",{children:["Go to the"," ",(0,t.jsx)(n(),{href:"/dashboard?tab=generate",className:"text-blue-500 hover:underline",children:"Generate"})," ","page to create one."]})]}):(0,t.jsx)("div",{className:"space-y-4",children:(a=Math.ceil((r=j.filter(e=>{if("all"!==T&&e.difficulty!==T)return!1;if("all"!==R){let r=`quiz_completed_${e._id}`,a=localStorage.getItem(r);if("completed"===R&&!a||"pending"===R&&a)return!1}return!0})).length/6),i=(A-1)*6,f=r.slice(i,i+6),(0,t.jsxs)(t.Fragment,{children:[f.map(e=>{let r,a={easy:"bg-blue-50 dark:bg-gray-800 border-blue-200 dark:border-gray-700",medium:"bg-orange-50 dark:bg-gray-800 border-orange-200 dark:border-gray-700",hard:"bg-purple-50 dark:bg-gray-800 border-purple-200 dark:border-gray-700"}[e.difficulty]||"bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700";return(0,t.jsxs)("div",{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors ${a}`,children:[(0,t.jsxs)("div",{className:"mb-4 sm:mb-0",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.course}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(b.A,{className:"w-3 h-3 mr-1"}),e.questions.length," questions"]}),e.createdAt&&(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(x.A,{className:"w-3 h-3 mr-1"}),new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(d.$,{variant:"default",onClick:()=>$(e),className:`${"easy"===e.difficulty?"bg-blue-500 hover:bg-blue-600 text-white":"medium"===e.difficulty?"bg-orange-500 hover:bg-orange-600 text-white":"hard"===e.difficulty?"bg-purple-500 hover:bg-purple-600 text-white":"bg-gray-500 hover:bg-gray-600 text-white"}`,children:(r=`quiz_completed_${e._id}`,localStorage.getItem(r)?"Review Test":"Take Test")})})]},e._id)}),a>1&&(0,t.jsxs)("div",{className:"flex justify-center mt-6 space-x-2",children:[(0,t.jsx)("button",{onClick:()=>S(e=>Math.max(e-1,1)),disabled:1===A,className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300 dark:hover:bg-gray-600",children:"Previous"}),Array.from({length:a},(e,r)=>r+1).map(e=>(0,t.jsx)("button",{onClick:()=>S(e),className:`px-3 py-1 text-sm rounded ${A===e?"bg-indigo-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:e},e)),(0,t.jsx)("button",{onClick:()=>S(e=>Math.min(e+1,a)),disabled:A===a,className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300 dark:hover:bg-gray-600",children:"Next"})]})]}))})]})]})}}}]);