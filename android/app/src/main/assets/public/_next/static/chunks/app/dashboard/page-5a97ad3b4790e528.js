(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{4272:(e,r,t)=>{Promise.resolve().then(t.bind(t,5454))},5454:(e,r,t)=>{"use strict";t.d(r,{default:()=>ey});var a=t(95155),s=t(12115),i=t(73321),l=t(78590),o=t(39092),n=t.n(o),d=t(31885),c=t(97810),x=t(48368),m=t(94961),g=t(66088),u=t(41585),h=t(86901),p=t(66609),b=t(5669),y=t(28393),f=t(75238),j=t(99776);function w({setActiveContent:e}){let[r,t]=(0,s.useState)(""),[l,o]=(0,s.useState)(""),[n,w]=(0,s.useState)("course"),[N,k]=(0,s.useState)("beginner"),[C,S]=(0,s.useState)(10),[A,P]=(0,s.useState)(!1),[E,$]=(0,s.useState)(null),[R,z]=(0,s.useState)(!1),T=(0,i.useRouter)(),{user:U,loading:F,refreshToken:I}=(0,y.h)();s.useEffect(()=>()=>{if(A){console.log("Generate cleanup: clearing showLoader on unmount");try{P(!1)}catch(e){console.warn("Failed to clear showLoader during cleanup",e)}}},[]);let D=(0,i.usePathname)();s.useEffect(()=>{P(!1)},[D]),s.useEffect(()=>{let e=()=>{A&&(console.log("Generate: received actinova:loading-done, clearing showLoader"),P(!1))};return window.addEventListener("actinova:loading-done",e),()=>{window.removeEventListener("actinova:loading-done",e)}},[A]);let L=(U?.subscription?.plan==="pro"||U?.subscription?.plan==="enterprise")&&U?.subscription?.status==="active"||!!U?.isPremium,O=!!(U?.usage?.isAtLimit||!L&&U?.usage?.remaining===0),_=!F&&U&&(U.firstName||U.name.split(" ")[0])||"",M=async(a=0)=>{if(!r.trim()||R)return;z(!0);let s=r.trim(),i=`generated_${s}_${n}_${N}`;try{if(localStorage.getItem(i))return void T.push(`/learn/content?topic=${encodeURIComponent(s)}&format=${n}&difficulty=${N}`)}catch{}if("flashcards"===n){console.log("Generate: showing loader for flashcard generation"),P(!0),z(!0);try{let r=await (0,b.Ud)("/api/generate-flashcards",{method:"POST",body:JSON.stringify({topic:s,difficulty:N})});if(!r.ok){let e={};try{e=await r.json()}catch(e){throw Error(`Server Error (${r.status}): Request failed`)}if(429===r.status)return void p.oR.error("Monthly limit reached. Upgrade to Pro for more!");throw Error(e.error||"Failed to generate flashcards")}await r.json(),window.dispatchEvent(new Event("usageUpdated")),p.oR.success("Flashcards generated successfully!"),e("flashcards")}catch(e){console.error("Flashcard generation failed:",e),p.oR.error(e.message||"Failed to generate flashcards")}finally{P(!1),z(!1)}return}if("quiz"===n){console.log("Generate: showing loader for quiz generation"),P(!0);try{let e=await (0,b.Ud)("/api/generate-course",{method:"POST",body:JSON.stringify({topic:s,difficulty:N,format:"quiz",questions:C})});if(!e.ok){let r={};try{r=await e.json()}catch(r){throw Error(`Server Error (${e.status}): Request failed`)}if(429===e.status)return void p.oR.error("Monthly limit reached. Upgrade to Pro for more!");throw Error(r.error||"Failed to generate quiz")}let r=await e.json();$({_id:r.quizId,...r.content}),p.oR.success("Quiz generated successfully!"),window.dispatchEvent(new Event("usageUpdated")),t(""),o("")}catch(e){console.error("Quiz generation failed:",e),p.oR.error(e.message||"Failed to generate quiz")}finally{console.log("Generate: hiding loader (quiz flow)"),P(!1),z(!1)}return}T.push(`/learn/content?topic=${encodeURIComponent(s)}&format=${n}&difficulty=${N}`)};return(s.useEffect(()=>{E&&e("quizzes")},[E,e]),E)?(0,a.jsx)(j.A,{quizData:E,topic:E.course,onBack:()=>$(null),existingQuizId:E._id}):(0,a.jsxs)("div",{children:[A&&(0,a.jsx)("div",{"data-actinova-loader-overlay":"true",className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-xs",children:(0,a.jsx)(f.A,{text:n})}),(0,a.jsxs)("div",{className:"mb-10 text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:_?`Welcome back, ${_}`:"Welcome to Actinova AI Tutor"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Ready to test your knowledge? Create comprehensive tests to challenge yourself and track your progress."})]}),(0,a.jsxs)("div",{className:"p-8 mb-10",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"What can I help you learn today?"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter a topic below to generate a personalized content"}),!L&&O&&(0,a.jsx)("div",{className:"mt-4 mx-auto max-w-md p-3 rounded-lg border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-200 text-sm",children:"You hit free limits. Upgrade to get more generations."})]}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-left px-1",children:"What can I help you learn?"}),(0,a.jsx)("textarea",{value:l,onChange:e=>{let r=e.target.value;o(r),t(r),e.target.style.height="auto",e.target.style.height=Math.min(e.target.scrollHeight,200)+"px"},className:"w-full px-3 sm:px-4 py-3 sm:py-4 text-base sm:text-lg border border-blue-300 dark:border-gray-600 rounded-lg sm:rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-none min-h-[100px] sm:min-h-[120px] max-h-[200px]",onKeyDown:e=>{"Enter"===e.key&&e.ctrlKey&&(e.preventDefault(),M())},autoFocus:!0,rows:4,maxLength:500,dir:"ltr",style:{direction:"ltr",unicodeBidi:"plaintext"}}),(0,a.jsxs)("div",{className:"mt-2 flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 px-1",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 mr-1"}),"Tip: Press Ctrl + Enter to generate your course"]}),(0,a.jsxs)("span",{className:l.length>450?"text-orange-500":"",children:[l.length,"/500"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 sm:mb-3 text-left px-1",children:"Choose the format"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 sm:gap-4",children:[(0,a.jsxs)("button",{onClick:()=>w("course"),className:`p-3 sm:p-4 rounded-lg border-2 transition-colors flex flex-col items-center justify-center ${"course"===n?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)(c.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mb-1 sm:mb-2 text-gray-700 dark:text-gray-300"}),(0,a.jsx)("span",{className:"font-medium text-xs sm:text-sm",children:"Course"})]}),(0,a.jsxs)("button",{onClick:()=>w("flashcards"),className:`p-3 sm:p-4 rounded-lg border-2 transition-colors flex flex-col items-center justify-center ${"flashcards"===n?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)(x.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mb-1 sm:mb-2 text-gray-700 dark:text-gray-300"}),(0,a.jsx)("span",{className:"font-medium text-xs sm:text-sm",children:"Flashcards"})]}),(0,a.jsxs)("button",{onClick:()=>w("quiz"),className:`p-3 sm:p-4 rounded-lg border-2 transition-colors flex flex-col items-center justify-center ${"quiz"===n?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)(m.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mb-1 sm:mb-2 text-gray-700 dark:text-gray-300"}),(0,a.jsx)("span",{className:"font-medium text-xs sm:text-sm",children:"Test Yourself"})]})]})]}),"quiz"===n&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-left",children:"Number of questions (up to 50)"}),(0,a.jsx)("input",{type:"number",value:C,onChange:e=>S(Math.min(50,parseInt(e.target.value,10)||10)),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400",max:"50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-left px-1",children:["Choose difficulty level",!L&&(0,a.jsx)("span",{className:"ml-2 text-xs text-orange-600 dark:text-orange-400",children:"(Free users: Beginner only)"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:N,onChange:r=>{let t=r.target.value;if(!L&&"beginner"!==t){p.oR.error("Intermediate and Advanced levels require Pro subscription. Please upgrade to continue."),e("upgrade");return}k(t)},className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 appearance-none pr-10",disabled:!L&&O,children:[(0,a.jsxs)("option",{value:"beginner",children:["Beginner"," ",L?"":"(Free)"]}),(0,a.jsxs)("option",{value:"intermediate",disabled:!L,children:["Intermediate"," ",L?"(Pro)":"(Pro Only)"]}),(0,a.jsxs)("option",{value:"advanced",disabled:!L,children:["Advanced"," ",L?"(Pro)":"(Pro Only)"]})]}),(0,a.jsx)(g.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),!L&&"beginner"!==N&&(0,a.jsx)("div",{className:"mt-2 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-orange-800 dark:text-orange-200 flex items-start",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),"Intermediate and Advanced levels require a Pro subscription.",(0,a.jsx)("button",{onClick:()=>e("upgrade"),className:"ml-1 font-semibold underline hover:text-orange-900 dark:hover:text-orange-100",children:"Upgrade to Pro"})]})})]}),(0,a.jsxs)("button",{onClick:M,disabled:!r.trim()||!!U&&!L&&O,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2.5 sm:py-3 px-4 rounded-lg font-medium text-sm sm:text-base hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,a.jsx)("span",{children:!L&&O?"You hit free limits â€” upgrade to get more generations":"Generate"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3 sm:mb-4 px-1",children:"Popular Learning Tracks"}),(0,a.jsx)(v,{setTopic:t,setLocalTopic:o})]})]})}function v({setTopic:e,setLocalTopic:r}){let[t,i]=s.useState([]),[l,o]=s.useState(!0);return(s.useEffect(()=>{!async function(){try{let e=await (0,b.Ud)("/api/popular-topics"),r=await e.json();i(r.topics||[])}catch(e){i(["Artificial Intelligence","Frontend Development","Backend Development","Data Science","Machine Learning","Web Development","Mobile Development","DevOps"])}finally{o(!1)}}()},[]),l)?(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3",children:[...Array(8)].map((e,r)=>(0,a.jsx)("div",{className:"p-3 sm:p-4 bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg animate-pulse",children:(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4"})},r))}):(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3",children:t.map(t=>(0,a.jsx)("button",{onClick:()=>{e(t),r(t)},className:"p-3 sm:p-4 text-left bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-md transition-all",children:(0,a.jsx)("span",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-gray-100 line-clamp-2",children:t})},t))})}var N=t(9165),k=t(9673),C=t(14403),S=t(94290),A=t(89123),P=t(44071),E=t(47149),$=t(13535),R=t(94928),z=t(45049),T=t(61878),U=t(21362),F=t(31069),I=t(38194),D=t(53961),L=t(6962),O=t(68459),_=t(41641),M=t(98500),q=t.n(M),J=t(33210);function G({isOpen:e,onClose:r,onConfirm:t,title:s="Confirm Action",message:i="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:o="Cancel",confirmColor:n="red"}){return e?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),(0,a.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full mx-4 p-6 z-10",children:[(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,a.jsx)(J.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"pr-8",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:s}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:i})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:o}),(0,a.jsx)("button",{onClick:()=>{t(),r()},className:`px-4 py-2 text-white rounded-lg transition-colors ${"red"===n?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:l})]})]})]}):null}var H=t(98126);let Y=[{name:"All",icon:"Grid",color:"gray"},{name:"Technology",topics:["Programming & Development","AI & Machine Learning","Game Development","Web Development","Mobile Apps","Cloud Computing","Cybersecurity","Blockchain"],icon:"code",color:"blue"},{name:"Design",topics:["UI/UX Design","Graphic Design","Design Systems","Figma","Adobe Creative","3D Modeling","Animation","Branding"],icon:"palette",color:"purple"},{name:"Business",topics:["Entrepreneurship","Marketing","Finance","Management","Strategy","Sales","Project Management","Leadership","E-commerce"],icon:"briefcase",color:"orange"},{name:"Data Science",topics:["Data Analysis","Machine Learning","Statistics","Python","R","SQL","Visualization","Big Data","AI Ethics"],icon:"chart",color:"green"},{name:"AI & ML",topics:["Neural Networks","Deep Learning","Computer Vision","NLP","Reinforcement Learning","AutoML","AI Ethics","Model Deployment"],icon:"brain",color:"indigo"},{name:"Creative",topics:["Photography","Videography","Music Production","Digital Art","Animation","Content Creation","Video Editing","Sound Design"],icon:"camera",color:"pink"},{name:"Humanities",topics:["Writing","Literature","History","Philosophy","Psychology","Sociology","Cultural Studies","Ethics","Critical Thinking"],icon:"book",color:"red"},{name:"Languages",topics:["Spanish","French","German","Japanese","Chinese","Portuguese","Italian","Korean","Arabic","Russian"],icon:"globe",color:"cyan"},{name:"Science",topics:["Physics","Chemistry","Biology","Astronomy","Geology","Environmental Science","Neuroscience","Engineering","Research Methods"],icon:"microscope",color:"teal"},{name:"Mathematics",topics:["Calculus","Statistics","Algebra","Geometry","Discrete Math","Linear Algebra","Probability","Number Theory"],icon:"calculator",color:"yellow"},{name:"Health",topics:["Nutrition","Fitness","Mental Health","Medicine","Nursing","Public Health","Yoga","Meditation"],icon:"heart",color:"rose"}];function B({setActiveContent:e,setHideNavs:r}){let t=(0,i.useRouter)();(0,s.useEffect)(()=>{if(r)return r(!0),()=>r(!1)},[r]);let[l,o]=(0,s.useState)("grid"),[n,d]=(0,s.useState)("all"),[m,g]=(0,s.useState)("All"),[u,f]=(0,s.useState)(""),[j,w]=(0,s.useState)([]),[v,N]=(0,s.useState)([]),[M,J]=(0,s.useState)([]),[B,V]=(0,s.useState)(!0),[W,K]=(0,s.useState)(!0),[Q,Z]=(0,s.useState)(!0),[X,ee]=(0,s.useState)(1),[er,et]=(0,s.useState)({}),[ea,es]=(0,s.useState)({}),[ei,el]=(0,s.useState)(!1),[eo,en]=(0,s.useState)(null),[ed,ec]=(0,s.useState)(new Set),[ex,em]=(0,s.useState)(null),{user:eg,loading:eu,refreshToken:eh}=(0,y.h)(),ep=async(e=!0)=>{if(!eg)return void V(!1);try{V(!0);let r=new URLSearchParams({page:X.toString(),limit:"12",type:"course",search:u}),t=await (0,b.Ud)(`/api/library?${r}`);if(!t.ok){if(401===t.status&&e){if(console.log("Token expired, attempting to refresh..."),await eh())return ep(!1);p.oR.error("Session expired. Please log in again.")}else 401===t.status?p.oR.error("Session expired. Please log in again."):p.oR.error("Failed to load library");V(!1);return}let a=await t.json(),s=(a.items||[]).map(e=>({id:e.id,_id:e.id.split("_")[1]||e.id,title:e.title,topic:e.topic,difficulty:e.difficulty,progress:e.progress||0,totalLessons:e.totalLessons||e.totalCards||0,completedLessons:Math.round(e.progress/100*(e.totalLessons||e.totalCards||0)),isPinned:e.pinned||!1,pinned:e.pinned||!1,createdAt:e.createdAt,lastAccessed:e.lastAccessed||"Just now",description:e.description||`Learn ${e.topic||e.title}`,instructor:e.instructor||"AI Tutor",rating:e.rating||4.8,estimatedTime:e.estimatedTime||"2-4 hours",format:"questions"===e.type?"questions":"flashcards"===e.type?"flashcards":"course",courseData:{topic:e.topic,format:"questions"===e.type?"questions":"flashcards"===e.type?"flashcards":"course",difficulty:e.difficulty},isGenerated:!0}));w(s),et(a.pagination||{}),es(a.stats||{})}catch(e){console.error("Error fetching library:",e),p.oR.error("Network error. Please try again.")}finally{V(!1)}},eb=async()=>{try{K(!0);let e=!!(eg?.subscription?.plan==="pro"||eg?.isPremium),r=await (0,b.Ud)(e?"/api/premium-courses/personalized":"/api/premium-courses/trending",{method:e?"POST":"GET"});if(r.ok){let e=await r.json();N(e.courses||[])}}catch(e){console.error("Error fetching premium data:",e)}finally{K(!1)}},ey=async()=>{try{Z(!0);let e=await (0,b.Ud)("/api/premium-courses/trending");if(e.ok){let r=await e.json();J(r.courses||[])}}catch(e){console.error("Error fetching explore data:",e)}finally{Z(!1)}};(0,s.useEffect)(()=>{!eu&&eg?(ep(),eb(),ey()):eu||eg||(V(!1),K(!1),Z(!1))},[X,u,n,eg,eu]),(0,s.useEffect)(()=>{ee(1)},[n]),(0,s.useEffect)(()=>{j.length>0&&ec(new Set(j.filter(e=>e.isPinned).map(e=>e.id)))},[j]);let ef=async(e,r=!0)=>{let t=j.find(r=>r.id===e);if(!t)return;let a=!t.isPinned,s=ea.pinned||0;if(a&&s>=3)return void p.oR.error("You can only pin up to 3 courses. Unpin one first.");w(r=>r.map(r=>r.id===e?{...r,isPinned:a,pinned:a}:r)),es(e=>({...e,pinned:a?s+1:s-1}));try{let t=await (0,b.Ud)("/api/library",{method:"POST",body:JSON.stringify({action:"pin",itemId:e})});if(401===t.status&&r&&await eh())return ef(e,!1);if(!t.ok)throw Error("Failed to update pin");p.oR.success(a?"Course pinned":"Course unpinned")}catch(r){w(r=>r.map(r=>r.id===e?{...r,isPinned:!a,pinned:!a}:r)),es(e=>({...e,pinned:s})),p.oR.error("Failed to update pin status")}},ej=async(e=!0)=>{if(eo){w(e=>e.filter(e=>e.id!==eo.id));try{let r=await (0,b.Ud)("/api/library",{method:"POST",body:JSON.stringify({action:"delete",itemId:eo.id})});if(401===r.status&&e&&await eh())return ej(!1);if(r.ok)p.oR.success("Course deleted from library");else throw Error("Delete failed")}catch(e){p.oR.error("Failed to delete course"),ep()}finally{el(!1),en(null)}}},ew=async e=>{if(!ex){em(e.title),p.oR.loading(`Generating course: ${e.title}...`,{id:"generating"});try{let r=(e.difficulty||"beginner").toLowerCase();["beginner","intermediate","advanced"].includes(r)||(r="beginner"),eg?.subscription?.plan==="pro"||eg?.isPremium||(r="beginner");let a=await (0,b.Ud)("/api/generate-course",{method:"POST",body:JSON.stringify({topic:e.title,format:"course",difficulty:r})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||"Failed to generate course")}let s=await a.json();if(p.oR.success(`Course "${e.title}" generated successfully!`,{id:"generating"}),s.courseId||s.success){let a=e.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");t.push(`/learn/content?topic=${encodeURIComponent(a)}&format=course&difficulty=${r}&originalTopic=${encodeURIComponent(e.title)}`)}}catch(e){console.error("Error generating course:",e),p.oR.error(e.message||"Failed to generate course",{id:"generating"})}finally{em(null)}}},ev=!!(eg?.subscription&&("pro"===eg.subscription.plan||"enterprise"===eg.subscription.plan)&&"active"===eg.subscription.status)||!!eg?.isPremium,eN=async e=>{if(!ev)return void p.oR.error("PDF downloads are a Pro feature. Please upgrade to download courses.");let r=p.oR.loading(`Preparing PDF for ${e.title}...`);try{let t=await (0,b.Ud)(`/api/library?id=${e.id}`);if(!t.ok)throw Error("Failed to fetch full course data");let a=await t.json();if(!a.item)throw Error("Course data not found");await (0,H.O)(a.item,e.format),p.oR.success("Download started!",{id:r})}catch(e){console.error("Library download error:",e),p.oR.error("Failed to generate PDF. Please try again.",{id:r})}},ek=({name:e,...r})=>{let t={Grid:C.A,code:c.A,palette:S.A,briefcase:A.A,brain:h.A,microscope:x.A,chart:P.A,globe:h.A,calculator:x.A,heart:E.A,camera:h.A,book:$.A}[e]||C.A;return(0,a.jsx)(t,{...r})};return eu?(0,a.jsx)("div",{className:"flex justify-center py-20",children:(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 rounded-full border-t-transparent"})}):eg?(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8 space-y-12 no-scrollbar",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 pb-4",children:[{label:"Courses",value:ea.courses||0,icon:c.A,color:"blue",gradient:"from-blue-500/30 to-indigo-500/30",text:"text-blue-600 dark:text-blue-400"},{label:"Done",value:ea.completedCourses||0,icon:R.A,color:"green",gradient:"from-emerald-500/30 to-teal-500/30",text:"text-emerald-600 dark:text-emerald-400"},{label:"Pinned",value:ea.pinnedCourses||0,icon:z.A,color:"yellow",gradient:"from-orange-500/30 to-amber-500/30",text:"text-orange-600 dark:text-orange-400"},{label:"Progress",value:`${j.length>0?Math.round(j.reduce((e,r)=>e+(r.progress||0),0)/j.length):0}%`,icon:P.A,color:"purple",gradient:"from-purple-500/30 to-fuchsia-500/30",text:"text-purple-600 dark:text-purple-400"}].map((e,r)=>(0,a.jsxs)(k.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*r},className:"relative bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl p-2.5 rounded-sm border border-gray-100 dark:border-gray-700/50 overflow-hidden",children:[(0,a.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br ${e.gradient} opacity-80`}),(0,a.jsxs)("div",{className:"relative z-10 flex items-center gap-2",children:[(0,a.jsx)("div",{className:`p-1 ${e.text}`,children:(0,a.jsx)(e.icon,{size:12,className:"stroke-[2.5]"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-1.5 min-w-0",children:[(0,a.jsx)("div",{className:"text-xs font-black text-gray-900 dark:text-white leading-none truncate",children:e.value}),(0,a.jsx)("div",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-300 truncate",children:e.label})]})]})]},r))}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-black uppercase tracking-tight text-gray-900 dark:text-white",children:"Discovery Hub"}),(0,a.jsxs)("div",{className:"relative group min-w-[300px]",children:[(0,a.jsx)(T.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-indigo-600 transition-colors"}),(0,a.jsx)("input",{type:"text",value:u,onChange:e=>f(e.target.value),placeholder:"Search disciplines...",className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border-2 border-purple-100 dark:border-purple-900/30 rounded-2xl focus:ring-2 focus:ring-purple-500/20 outline-none transition-all placeholder:text-gray-400 placeholder:font-medium font-medium text-sm"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Categories"}),(0,a.jsxs)(q(),{href:"/explore",className:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest hover:underline flex items-center gap-1",children:["Explore ",(0,a.jsx)(U.A,{size:12})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide no-scrollbar scroll-smooth",children:[Y.map(e=>(0,a.jsxs)("button",{onClick:()=>{var r;g(r=e.name),"All"===r?f(""):f(r)},className:`flex-shrink-0 flex items-center gap-2 px-5 py-3 rounded-2xl font-bold text-sm transition-all active:scale-95 ${m===e.name?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[(0,a.jsx)(ek,{name:e.icon,size:16}),(0,a.jsx)("span",{children:e.name})]},e.name)),(0,a.jsxs)(q(),{href:"/explore",className:"flex-shrink-0 flex items-center gap-2 px-5 py-3 rounded-2xl font-bold text-sm transition-all active:scale-95 bg-white dark:bg-gray-800 text-indigo-600 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[(0,a.jsx)(C.A,{size:16}),(0,a.jsx)("span",{children:"View More"})]})]})]}),v.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Premium Spotlight"}),(0,a.jsx)("button",{onClick:()=>e("staff-picks"),className:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest hover:underline",children:"View All"})]}),(0,a.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide no-scrollbar scroll-smooth",children:v.map((e,r)=>(0,a.jsxs)(k.P.div,{whileHover:{y:-4},className:"flex-shrink-0 w-[280px] bg-gradient-to-br from-indigo-600 to-purple-700 rounded-3xl p-5 text-white shadow-xl shadow-indigo-500/10 relative overflow-hidden group cursor-pointer",onClick:()=>ew(e),children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 blur-2xl group-hover:scale-110 transition-transform"}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,a.jsx)(F.A,{size:18,className:"text-yellow-300"})}),e.badge&&(0,a.jsx)("span",{className:"px-2 py-1 bg-white/20 rounded-full text-[9px] font-black uppercase tracking-widest",children:e.badge})]}),(0,a.jsx)("h4",{className:"font-black text-lg leading-tight mb-2 line-clamp-2",children:e.title}),(0,a.jsx)("p",{className:"text-white/70 text-xs font-medium line-clamp-2 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"mt-auto flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex -space-x-2",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-white/20 border-2 border-indigo-600 flex items-center justify-center text-[8px] font-bold",children:e},e))}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-80",children:"Join 1k+ students"})]})]})]},e.id||r))})]}),M.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Featured Discovery"}),(0,a.jsx)("button",{onClick:()=>e("explore"),className:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest hover:underline",children:"View All"})]}),(0,a.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide no-scrollbar scroll-smooth",children:M.map((e,r)=>(0,a.jsxs)(k.P.div,{whileHover:{y:-4},className:"flex-shrink-0 w-[260px] bg-white dark:bg-gray-800 rounded-3xl p-5 border border-gray-100 dark:border-gray-700/50 shadow-sm relative overflow-hidden group cursor-pointer",onClick:()=>ew(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-gray-50 dark:bg-gray-700/50 flex items-center justify-center text-gray-400 group-hover:text-indigo-500 transition-colors",children:(0,a.jsx)(h.A,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-sm text-gray-900 dark:text-white line-clamp-1",children:e.title}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:e.level||"Modern"})]})]}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs line-clamp-2 mb-4 h-8",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-50 dark:border-gray-700 pt-3",children:[(0,a.jsx)("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"Discovery"}),(0,a.jsx)(U.A,{size:14,className:"text-gray-300 group-hover:text-indigo-500 group-hover:translate-x-1 transition-all"})]})]},r))})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Your Collection"}),(0,a.jsxs)("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1 opacity-0 pointer-events-none hidden",children:[(0,a.jsx)("button",{onClick:()=>o("grid"),className:`p-1.5 rounded-lg transition-all ${"grid"===l?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-400"}`,children:(0,a.jsx)(C.A,{size:14})}),(0,a.jsx)("button",{onClick:()=>o("list"),className:`p-1.5 rounded-lg transition-all ${"list"===l?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-400"}`,children:(0,a.jsx)(I.A,{size:14})})]})]}),B?(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[...Array(6)].map((e,r)=>(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 border rounded-3xl p-6 animate-pulse h-40"},r))}):0===j.length?(0,a.jsxs)(k.P.div,{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/20 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",initial:{opacity:0},animate:{opacity:1},children:[(0,a.jsx)(c.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:u?"No matches found":"Your space is empty"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:u?`Couldn't find anything for "${u}"`:"Start your journey by exploring new topics!"}),(0,a.jsx)("button",{onClick:()=>e("explore"),className:"px-6 py-3 bg-indigo-600 text-white rounded-2xl font-bold text-sm shadow-lg shadow-indigo-500/20 active:scale-95 transition-all",children:"Explore Discovery"})]}):(0,a.jsx)(k.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 pb-20",children:[...j].sort((e,r)=>!!ed.has(r.id)-!!ed.has(e.id)).map((e,r)=>{let s=["from-blue-500 to-indigo-600","from-purple-500 to-fuchsia-600","from-emerald-500 to-teal-600","from-orange-500 to-amber-600","from-rose-500 to-pink-600","from-sky-500 to-blue-600"],i=s[r%s.length];return(0,a.jsxs)(k.P.div,{layoutId:e.id,onClick:()=>{let r=e.topic.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");t.push(`/learn/${encodeURIComponent(r)}?format=${e.format}&difficulty=${e.difficulty||"beginner"}&originalTopic=${encodeURIComponent(e.topic)}`)},className:`w-full bg-gradient-to-br ${i} rounded-2xl p-6 relative overflow-hidden group cursor-pointer transition-all hover:scale-[1.01] shadow-xl shadow-gray-200/20 dark:shadow-none`,children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 blur-2xl"}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-white/20 backdrop-blur-md rounded-2xl border border-white/20",children:"questions"===e.format?(0,a.jsx)(C.A,{size:20,className:"text-white"}):"flashcards"===e.format?(0,a.jsx)(D.A,{size:20,className:"text-white"}):(0,a.jsx)(c.A,{size:20,className:"text-white"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:r=>{r.stopPropagation(),eN(e)},className:"p-2.5 rounded-full bg-white/10 text-white hover:bg-white/20 transition-all",title:"Download PDF",children:(0,a.jsx)(L.A,{size:14})}),(0,a.jsx)("button",{onClick:r=>{r.stopPropagation(),en(e),el(!0)},className:"p-2.5 rounded-full bg-white/10 text-white hover:bg-red-500 transition-all",title:"Delete Course",children:(0,a.jsx)(O.A,{size:14})}),(0,a.jsx)("button",{onClick:r=>{r.stopPropagation(),ef(e.id)},className:`p-2.5 rounded-full transition-all ${e.isPinned?"bg-white text-indigo-600":"bg-white/10 text-white hover:bg-white/20"}`,title:e.isPinned?"Unpin":"Pin",children:(0,a.jsx)(z.A,{size:14,className:e.isPinned?"fill-current":""})})]})]}),(0,a.jsx)("h4",{className:"font-black text-xl leading-snug mb-4 line-clamp-2 text-white",children:e.title}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-bold text-white/90",children:[(0,a.jsxs)("span",{children:[e.progress,"% Completed"]}),(0,a.jsx)("span",{children:e.difficulty})]}),(0,a.jsx)("div",{className:"h-2 w-full bg-white/20 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-white rounded-full transition-all duration-700",style:{width:`${e.progress}%`}})}),(0,a.jsx)("button",{className:"w-full mt-2 py-4 bg-white text-gray-900 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] hover:translate-y-[-2px] transition-all active:scale-95 shadow-none",children:"Continue Learning"})]})]})]},e.id)})},n),er.totalPages>1&&(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-10",children:[(0,a.jsx)("button",{onClick:()=>ee(X-1),disabled:1===X,className:"p-2 border border-gray-200 dark:border-gray-700 rounded-xl disabled:opacity-30 transition-opacity",children:(0,a.jsx)(_.A,{className:"w-5 h-5"})}),[...Array(er.totalPages)].map((e,r)=>(0,a.jsx)("button",{onClick:()=>ee(r+1),className:`w-9 h-9 rounded-xl font-bold text-sm transition-all ${X===r+1?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"border border-gray-200 dark:border-gray-700 text-gray-500"}`,children:r+1},r+1)),(0,a.jsx)("button",{onClick:()=>ee(X+1),disabled:X===er.totalPages,className:"p-2 border border-gray-200 dark:border-gray-700 rounded-xl disabled:opacity-30 transition-opacity",children:(0,a.jsx)(U.A,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("button",{onClick:()=>t.push("/dashboard?tab=generate"),className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white shadow-xl shadow-blue-500/30 hover:scale-110 transition-transform z-50 md:hidden",children:(0,a.jsx)(h.A,{size:24})}),(0,a.jsx)(G,{isOpen:ei,onClose:()=>{el(!1),en(null)},onConfirm:ej,title:"Remove Course",message:`Are you sure you want to remove "${eo?.title}"? This will permanently delete your progress.`,confirmText:"Remove",cancelText:"Keep",confirmColor:"red"})]}):(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)(c.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Please log in"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be signed in to view your library."}),(0,a.jsx)(q(),{href:"/auth/login",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Log In"})]})}var V=t(11951),W=t(84980),K=t(7810),Q=t(9176);t(77805);var Z=t(99799);function X(){let e=(0,i.useRouter)(),{user:r,authLoading:t}=(0,Z.w)();if(t)return(0,a.jsx)(f.A,{});if(!r)return null;let[l,o]=(0,s.useState)([]),[n,d]=(0,s.useState)([]),[x,m]=(0,s.useState)(null),[g,u]=(0,s.useState)(!0),[y,j]=(0,s.useState)(1),[w,v]=(0,s.useState)(""),[N,C]=(0,s.useState)(null),[A,E]=(0,s.useState)([]),[$,R]=(0,s.useState)(!1),[z,I]=(0,s.useState)(null),L=r&&(r.subscription&&("pro"===r.subscription.plan||"enterprise"===r.subscription.plan)&&"active"===r.subscription.status||r.isPremium);(0,s.useEffect)(()=>{L?J():O(),M()},[L]),(0,s.useEffect)(()=>{x||g||(A.length>0?m(A.find(e=>e.featured)||A[0]):l.length>0?m(l.find(e=>e.featured)||l[0]):n.length>0&&m(n[0]))},[x,g,A,l,n]);let O=async()=>{try{let e=await (0,b.Ud)("/api/premium-courses");if(e.ok){let r=await e.json();o(r.courses);let t=r.courses.find(e=>e.featured);t&&m(t)}}catch(e){console.error("Error fetching premium courses:",e)}finally{u(!1)}},M=async()=>{try{let e=await (0,b.Ud)("/api/premium-courses/trending",{headers:{"x-user-id":r?._id||r?.id||""}});if(e.ok){let r=await e.json();d(r.courses||[]),r.courses&&r.courses.length>0&&!x&&m(r.courses[0])}else 403===e.status&&(d([]),x||m(null))}catch(e){console.error("Error fetching trending courses:",e),d([]),x||m(null)}},J=async()=>{try{R(!0);let e=localStorage.getItem("personalizedPremiumCourses");if(e){let r=JSON.parse(e);if(r.generatedAt&&new Date-new Date(r.generatedAt)<864e5){E(r.courses),u(!1),R(!1);return}}let r=await (0,b.Ud)("/api/premium-courses/personalized",{method:"POST",headers:{"Content-Type":"application/json"}});if(r.ok){let e=await r.json();e.localStorage&&localStorage.setItem("personalizedPremiumCourses",JSON.stringify(e.localStorage)),E(e.courses);let t=e.courses.find(e=>e.featured);t&&!x&&m(t),p.oR.success("Your personalized premium courses are ready!")}else throw Error("Failed to generate personalized courses")}catch(e){console.error("Error fetching personalized courses:",e),p.oR.error("Failed to load personalized courses. Using default courses."),O()}finally{u(!1),R(!1)}},G=async r=>{if(r.personalized||A.some(e=>e.id===r.id)){I(r.id),setTimeout(()=>{let t=r.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");e.push(`/learn/content?topic=${encodeURIComponent(t)}&format=course&difficulty=${r.difficulty||"intermediate"}&personalized=true&originalTopic=${encodeURIComponent(r.title)}`)},1500);return}if(!N){C(r.id),p.oR.loading(`Generating course: ${r.title}...`,{id:"generating"});try{let t=await (0,b.Ud)("/api/generate-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:r.title,format:"course",difficulty:r.difficulty||"beginner"})});if(!t.ok){let e={};try{let r=await t.text();try{e=JSON.parse(r)}catch(r){e={error:"Invalid server response"}}}catch(r){e={error:"Failed to read response"}}if(429===t.status){p.oR.dismiss("generating"),p.oR.error(`Monthly limit reached (${e.used||0}/${e.limit||2}). Please try again next month.`,{id:"generating"});return}throw Error(e.error||"Failed to generate course")}try{await (0,b.Ud)("/api/profile/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({generatedPremiumCourse:{courseId:r.id,courseTitle:r.title,generatedAt:new Date().toISOString()}})})}catch(e){console.error("Error tracking generated course:",e)}let a={};try{let e=await t.text();try{a=JSON.parse(e)}catch(r){throw console.error("Failed to parse success JSON:",e.substring(0,100)),Error("Server returned invalid success response format.")}}catch(e){throw Error("Failed to read success response.")}if(p.oR.success(`Course "${r.title}" generated successfully!`,{id:"generating"}),a.courseId){let t=r.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");e.push(`/learn/content?topic=${encodeURIComponent(t)}&format=course&difficulty=${r.difficulty||"beginner"}&originalTopic=${encodeURIComponent(r.title)}`)}}catch(e){console.error("Error generating course:",e),p.oR.error(e.message||"Failed to generate course",{id:"generating"})}finally{C(null)}}},H=async e=>{try{let r=await (0,b.Ud)("/api/billing/create-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:e})});if(!r.ok){let e={};try{let t=await r.text();try{e=JSON.parse(t)}catch(r){e={error:"Invalid server response"}}}catch(r){e={error:"Failed to read response"}}401===r.status&&(p.oR.error("Please log in to upgrade."),setTimeout(()=>{window.location.href="/auth/login"},800));let t=e.message||e.details||e.error;throw Error(t||"Failed to create checkout session")}let t=await r.json();if(t.sessionUrl)window.Capacitor||"capacitor:"===window.location.protocol?await Q.P.open({url:t.sessionUrl}):window.location.href=t.sessionUrl;else throw Error("No payment URL received")}catch(e){p.oR.error(e.message||"Failed to start upgrade process. Please try again.")}},Y=async r=>{I(r.id),setTimeout(()=>{let t=r.title.replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/\s+/g,"-");e.push(`/learn/content?topic=${encodeURIComponent(t)}&format=course&difficulty=${r.difficulty||"intermediate"}&originalTopic=${encodeURIComponent(r.title)}`)},1500)},B=(L&&A.length>0?A:l).filter(e=>e.title.toLowerCase().includes(w.toLowerCase())||e.description.toLowerCase().includes(w.toLowerCase())),X=Math.ceil(B.length/6),ee=(y-1)*6,er=B.slice(ee,ee+6),et={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,a.jsxs)(k.P.div,{className:"text-center mb-12",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[(0,a.jsx)(S.A,{className:"w-8 h-8 text-blue-500"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Premium Courses"})]}),(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"High-quality courses with advanced features, expert instruction, and comprehensive learning materials."})]}),(0,a.jsxs)(k.P.div,{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(T.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:w,onChange:e=>v(e.target.value),placeholder:"Search premium courses...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:(0,a.jsx)(F.A,{className:"w-5 h-5 text-white"})})})]}),!L&&(0,a.jsxs)(k.P.div,{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl p-8 mb-12 text-white text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,a.jsx)(F.A,{className:"w-12 h-12 mx-auto mb-4 text-yellow-300"}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Unlock Premium Trending Courses"}),(0,a.jsx)("p",{className:"text-orange-100 mb-6 max-w-2xl mx-auto",children:"Get access to the latest trending courses generated by AI, personalized to your interests. Upgrade to Pro to discover cutting-edge topics and stay ahead in your learning journey."}),(0,a.jsx)("button",{onClick:()=>H("pro"),className:"bg-white text-orange-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors cursor-pointer",children:"Upgrade to Pro"})]}),L&&n.length>1&&(0,a.jsxs)(k.P.div,{className:"mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,a.jsx)(P.A,{className:"w-6 h-6 text-orange-500"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Latest Trending Courses"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.slice(1).map((e,r)=>(0,a.jsxs)(k.P.div,{whileHover:{y:-5},className:"bg-blue-50/70 dark:bg-blue-900/20 backdrop-blur-sm border border-gray-200 dark:border-slate-700/50 rounded-2xl overflow-hidden hover:border-gray-300 dark:hover:border-slate-600/70 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-full h-48 bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center",children:(0,a.jsx)(c.A,{className:"w-16 h-16 text-white opacity-80"})}),(0,a.jsxs)("div",{className:"absolute top-3 left-3 bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center space-x-1",children:[(0,a.jsx)(P.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Trending"})]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:e.description}),e.whyTrending&&(0,a.jsx)("div",{className:"mb-3 p-2 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:[(0,a.jsx)("span",{className:"font-semibold",children:"\uD83D\uDD25 Trending:"})," ",e.whyTrending]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(W.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.estimatedDuration||"6 weeks"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(c.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.category||"General"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-4 flex-wrap gap-2",children:e.tags?.slice(0,3).map((e,r)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded-full",children:e},r))}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Premium"})})}),(0,a.jsx)("button",{onClick:()=>G(e),disabled:N===e.id||z===e.id,className:"w-full bg-gradient-to-r from-orange-600 to-red-600 text-white py-2 px-4 rounded-lg hover:from-orange-700 hover:to-red-700 transition-colors text-xs font-normal disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center space-x-2",children:N===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Generating..."})]}):z===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Preparing your course..."})]}):e.personalized||A.some(r=>r.id===e.id)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Start Learning"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Generate Course"})]})})]})]},e.id||r))})]}),x&&(0,a.jsxs)(k.P.div,{className:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 rounded-3xl p-8 mb-12 text-white shadow-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[(0,a.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white rounded-full -translate-y-48 translate-x-48"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-blue-400 rounded-full translate-y-32 -translate-x-32"})]}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-xl",children:(0,a.jsx)(F.A,{className:"w-6 h-6 text-blue-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent font-bold text-sm uppercase tracking-wider",children:"Featured Course"}),(0,a.jsx)("p",{className:"text-slate-300 text-sm",children:L?"Premium Exclusive":"Upgrade to Access"})]})]}),(0,a.jsx)("div",{className:"hidden md:flex items-center space-x-2",children:(0,a.jsx)("span",{className:"text-slate-300 text-sm",children:"10k+ enrolled"})})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-3 leading-tight",children:x.title}),(0,a.jsx)("p",{className:"text-slate-300 mb-4 text-base leading-relaxed",children:x.description}),(0,a.jsx)("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 mb-4",children:(0,a.jsx)("p",{className:"text-blue-300 text-xs leading-relaxed",children:"This course is personalized based on your goals and interests. New courses will appear after 1 month."})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-slate-300",children:[(0,a.jsx)(W.A,{className:"w-4 h-4 text-blue-400"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:x.duration})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2 text-slate-300",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,a.jsx)(S.A,{className:"w-3 h-3 text-blue-400 fill-blue-400"},r)),(0,a.jsx)("span",{className:"ml-1 font-medium text-sm",children:x.rating})]})})]}),!L&&(0,a.jsxs)("div",{className:"flex items-baseline space-x-2 mb-4",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-white",children:x.price}),x.originalPrice&&(0,a.jsx)("span",{className:"text-lg text-slate-400 line-through",children:x.originalPrice})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("div",{className:"w-fit rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(F.A,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-200 italic text-sm leading-relaxed",children:x.premiumNote||x.staffNote}),(0,a.jsx)("p",{className:"text-slate-400 text-xs mt-1",children:"- Premium Team"})]})]})})}),(0,a.jsx)("div",{className:"flex justify-end",children:L?(0,a.jsx)("button",{onClick:()=>Y(x),disabled:z===x.id,className:"px-6 py-3 bg-white text-slate-900 font-normal rounded-lg hover:bg-slate-100 transition-all duration-200 transform hover:-translate-y-0.5 text-base disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center space-x-2",children:z===x.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-900"}),(0,a.jsx)("span",{children:"Preparing your course..."})]}):(0,a.jsx)("span",{children:"Start Learning"})}):(0,a.jsx)("button",{onClick:()=>H("premium-course"),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 text-sm cursor-pointer",children:"Get Premium Access"})})]})]})]})]}),g||$?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:$?"Creating your personalized premium courses...":"Loading premium courses..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:er.map((e,r)=>(0,a.jsxs)(k.P.div,{variants:et,whileHover:{y:-8,scale:1.02},className:"group relative bg-blue-50/70 dark:bg-blue-900/20 backdrop-blur-sm border border-gray-200 dark:border-slate-700/50 rounded-2xl overflow-hidden hover:border-gray-300 dark:hover:border-slate-600/70 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"absolute inset-0 opacity-3 dark:opacity-10",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/20 to-purple-600/20 dark:from-blue-500/40 dark:to-purple-600/40 rounded-full -translate-y-16 translate-x-16"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-br from-purple-400/20 to-pink-600/20 dark:from-purple-500/40 dark:to-pink-600/40 rounded-full translate-y-12 -translate-x-12"})]}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-xl",children:(0,a.jsx)(F.A,{className:"w-4 h-4 text-blue-500"})}),(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent text-xs font-bold uppercase tracking-wider",children:"Premium"})]}),e.badge&&(0,a.jsxs)("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${(e=>{switch(e){case"Trending":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"Expert Level":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"Industry Favorite":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"Creative Choice":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";case"High Demand":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"Visual Excellence":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}})(e.badge)}`,children:[(e=>{switch(e){case"Trending":return(0,a.jsx)(P.A,{className:"w-3 h-3"});case"Expert Level":return(0,a.jsx)(F.A,{className:"w-3 h-3"});case"Industry Favorite":return(0,a.jsx)(V.A,{className:"w-3 h-3"});case"Creative Choice":case"Visual Excellence":default:return(0,a.jsx)(S.A,{className:"w-3 h-3"});case"High Demand":return(0,a.jsx)(D.A,{className:"w-3 h-3"})}})(e.badge),(0,a.jsx)("span",{children:e.badge})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-300 transition-colors",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-slate-200 text-sm leading-relaxed mb-2",children:e.description}),(0,a.jsxs)("p",{className:"text-gray-500 dark:text-slate-300 text-xs",children:["by ",e.instructor]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-slate-400",children:[(0,a.jsx)(K.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:["5k","10k","15k","20k","25k","30k","35k","40k"][Math.floor(8*Math.random())]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-slate-400",children:[(0,a.jsx)(W.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.duration})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(S.A,{className:"w-4 h-4 text-blue-400 fill-blue-400"}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-slate-100 font-medium text-sm",children:e.rating})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-4",children:(()=>{let{daysLeft:r,progress:t}=(e=>{if(!e)return{daysLeft:30,progress:100};let r=new Date(e),t=Math.max(0,30-Math.floor((new Date-r)/864e5)),a=Math.max(0,t/30*100);return{daysLeft:t,progress:a}})(e.createdAt);return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[(0,a.jsx)("span",{children:"Course Access"}),(0,a.jsxs)("span",{children:["Expires in ",r," days"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${t}%`}})})]})})()}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.price}),e.originalPrice&&(0,a.jsx)("span",{className:"text-lg text-gray-400 dark:text-slate-400 line-through",children:e.originalPrice})]}),L?(0,a.jsx)("button",{onClick:()=>Y(e),disabled:z===e.id,className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-normal rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-200 transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center space-x-2 text-xs",children:z===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Preparing your course..."})]}):(0,a.jsx)("span",{children:"Start Learning"})}):(0,a.jsx)("button",{onClick:()=>H("premium-course"),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 cursor-pointer",children:"Get Premium"})]})]})]},e.id||r))}),X>1&&(0,a.jsxs)(k.P.div,{className:"flex items-center justify-center space-x-2 mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[(0,a.jsx)("button",{onClick:()=>j(e=>Math.max(e-1,1)),disabled:1===y,className:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:(0,a.jsx)(_.A,{className:"w-4 h-4"})}),Array.from({length:X},(e,r)=>r+1).map(e=>(0,a.jsx)("button",{onClick:()=>j(e),className:`px-3 py-2 rounded-lg text-sm font-medium cursor-pointer ${y===e?"bg-blue-600 text-white":"border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:e},e)),(0,a.jsx)("button",{onClick:()=>j(e=>Math.min(e+1,X)),disabled:y===X,className:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:(0,a.jsx)(U.A,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(k.P.div,{className:"text-center mt-16 bg-gray-50 dark:bg-gray-800 rounded-2xl p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Want to see your course featured?"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create exceptional learning experiences and get noticed by our education team."}),(0,a.jsx)(q(),{href:"/contact",className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors cursor-pointer",children:(0,a.jsx)("span",{children:"Contact Our Team"})})]})]})}var ee=t(79372),er=t(25237),et=t(94514);function ea(){let{user:e,loading:r}=(0,y.h)(),[t,i]=(0,s.useState)("premium"),[l,o]=(0,s.useState)("card"),[n,d]=(0,s.useState)(!1),[c,x]=(0,s.useState)({used:0,limit:5,percentage:0,isPremium:!1,remaining:5}),[m,g]=(0,s.useState)([]),[u,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let r=async()=>{try{let e=await (0,b.Ud)("/api/user/usage");if(e.ok){let r=await e.json();x(r)}}catch(e){console.error("Failed to fetch usage:",e)}},t=async()=>{try{let e=await (0,b.Ud)("/api/plans");if(e.ok){let r=await e.json();g(r.plans||[])}}catch(e){console.error("Failed to fetch plans:",e),p.oR.error("Failed to load plans")}finally{f(!1)}};e&&r(),t()},[e]);let j=e?.subscription?.plan==="enterprise"&&e?.subscription?.status==="active"?"enterprise":e?.subscription?.plan==="pro"&&e?.subscription?.status==="active"||e?.isPremium?"premium":"basic",w=async e=>{d(!0);try{let r=await (0,b.Ud)("/api/billing/create-session",{method:"POST",body:JSON.stringify({plan:"premium"===e?"pro":e,paymentMethod:l})});if(!r.ok){let e={};try{e=await r.json()}catch(e){console.error("Failed to parse error response:",e)}401===r.status&&(p.oR.error("Please log in to upgrade."),setTimeout(()=>{window.location.href="/auth/login"},800));let t=e.message||e.details||e.error;throw Error(t||"Failed to create checkout session")}let t=await r.json();if(t.sessionUrl)window.Capacitor||"capacitor:"===window.location.protocol?await Q.P.open({url:t.sessionUrl}):window.location.href=t.sessionUrl;else throw Error("No payment URL received")}catch(e){p.oR.error(e.message||"Failed to start upgrade process. Please try again.")}finally{d(!1)}};return u?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)(k.P.div,{className:"text-center mb-12",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",children:"Upgrade Your Learning Experience"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Choose the perfect plan for your learning journey (or your organization)."})]}),(0,a.jsxs)(k.P.div,{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 uppercase",children:["Current Plan: ",j]}),(0,a.jsxs)("p",{className:"text-blue-700 dark:text-blue-300",children:["You're using ",c.used," out of ",-1===c.limit?"Unlimited":c.limit," monthly course generations"]})]}),-1!==c.limit&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[c.percentage,"%"]}),(0,a.jsx)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Usage this month"})]})]}),-1!==c.limit&&(0,a.jsx)("div",{className:"mt-4 w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c.percentage}%`}})})]}),(0,a.jsxs)(k.P.div,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.25},children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Select Payment Method"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>o("card"),className:`flex items-center space-x-3 p-4 border-2 rounded-lg transition-all ${"card"===l?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)(ee.A,{className:`w-5 h-5 ${"card"===l?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:`font-medium ${"card"===l?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"}`,children:"Credit/Debit Card"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Visa, Mastercard, etc."})]})]}),(0,a.jsxs)("button",{onClick:()=>o("mobile_money"),className:`flex items-center space-x-3 p-4 border-2 rounded-lg transition-all ${"mobile_money"===l?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,a.jsx)(er.A,{className:`w-5 h-5 ${"mobile_money"===l?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:`font-medium ${"mobile_money"===l?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"}`,children:"Mobile Money"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"M-Pesa, MTN, etc."})]})]})]})]}),(0,a.jsx)(k.P.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:m.map(e=>{let r=(e=>{switch(e){case"basic":default:return h.A;case"premium":return D.A;case"enterprise":return F.A}})(e.id),t=e.id===j,s=e.popular,i={free:0,basic:1,premium:2,pro:2,enterprise:3},l=i[j]||0,o=(i[e.id]||0)<l;return(0,a.jsxs)(k.P.div,{className:`relative bg-white dark:bg-gray-800 rounded-2xl shadow-lg border-2 transition-all duration-300 hover:shadow-xl ${s?"border-blue-500 scale-105 z-10":t?"border-green-500":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,whileHover:{y:-5},children:[s&&(0,a.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 w-full text-center",children:(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-1 rounded-full text-sm font-medium shadow-sm",children:"Most Popular"})}),t&&(0,a.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 w-full text-center",children:(0,a.jsx)("span",{className:"bg-green-600 text-white px-4 py-1 rounded-full text-sm font-medium shadow-sm",children:"Current Plan"})}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${s?"bg-gradient-to-r from-blue-600 to-purple-600":`bg-${e.color}-100 dark:bg-${e.color}-900`}`,children:(0,a.jsx)(r,{className:`w-6 h-6 ${s?"text-white":`text-${e.color}-600 dark:text-${e.color}-400`}`})}),(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.name})})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-baseline",children:[(0,a.jsxs)("span",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:["$",e.price]}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"/month"})]})}),(0,a.jsxs)("ul",{className:"space-y-3 mb-8",children:[e.features.slice(0,8).map((e,r)=>(0,a.jsxs)("li",{className:"flex items-start space-x-3",children:[(0,a.jsx)(et.A,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-300 text-sm",children:e})]},r)),e.features.length>8&&(0,a.jsxs)("li",{className:"text-xs text-gray-500 italic",children:["+ ",e.features.length-8," more features"]})]}),(0,a.jsx)(k.P.button,{onClick:()=>!t&&!o&&w(e.id),disabled:t||o||n,whileHover:{scale:t||o?1:1.02},whileTap:{scale:t||o?1:.98},className:`w-full py-3 px-4 rounded-lg font-medium transition-all ${t||o?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed":s?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:t?"Current Plan":o?"Contact Support":n?"Processing...":`Upgrade to ${e.name}`})]})]},e.id)})})]})})}var es=t(51914),ei=t(6296),el=t(96035),eo=t(49619),en=t(56204),ed=t(71552);function ec({topic:e,setHideNavs:r}){let t=(0,i.useSearchParams)().get("topic"),{theme:l}=(0,ed.D)(),{user:o,authLoading:n}=(0,Z.w)(),[d,c]=(0,s.useState)(()=>e||(t?decodeURIComponent(t):null)),[x,m]=(0,s.useState)(d?"chat":"history");(0,s.useEffect)(()=>{r&&r("chat"===x)},[x,r]);let[g,u]=(0,s.useState)(""),[y,f]=(0,s.useState)(!e&&!t),j=(0,s.useRef)(null);if(n||!o)return null;let w=async e=>{if(!e||!o)return[];try{let r=await (0,b.Ud)(`/api/chat/history?topic=${encodeURIComponent(e)}`);if(r.ok)return(await r.json()).messages||[]}catch(e){console.error("Error loading chat history:",e)}return[]},v=async(e,r)=>{if(r&&o&&0!==e.length)try{await (0,b.Ud)("/api/chat/history",{method:"POST",body:JSON.stringify({topic:r,messages:e})})}catch(e){console.error("Error saving chat history:",e)}},[N,k]=(0,s.useState)([]),[C,S]=(0,s.useState)(""),[A,P]=(0,s.useState)(!1),[E,$]=(0,s.useState)(!1),[R,z]=(0,s.useState)([]),[T,U]=(0,s.useState)(!1),[F,I]=(0,s.useState)(!0),[D,L]=(0,s.useState)(!1),[M,q]=(0,s.useState)(!1),[J,H]=(0,s.useState)(!1),[Y,B]=(0,s.useState)(null),V=async()=>{if(o){U(!0);try{let e=await (0,b.Ud)("/api/chat/history?action=topics");if(e.ok){let r=await e.json();z(r.topics||[])}}catch(e){console.error("Error loading chat topics:",e)}finally{U(!1)}}};(0,s.useEffect)(()=>{d&&o?($(!0),k([]),w(d).then(e=>{k(e),$(!1)})):k([])},[d,o]),(0,s.useEffect)(()=>{o&&V()},[o]),(0,s.useEffect)(()=>{N.length>0&&o&&V()},[N.length,o]),(0,s.useEffect)(()=>{if(N.length>0&&d&&o){let e=setTimeout(()=>{v(N,d)},1e3);return()=>clearTimeout(e)}},[N,d,o]),(0,s.useEffect)(()=>{j.current?.scrollIntoView({behavior:"smooth"})},[N]);let W=()=>{g.trim()?(c(g.trim()),u(""),f(!1),p.oR.success(`Topic set to: ${g.trim()}`)):p.oR.error("Please enter a topic")},K=async e=>{k([]),$(!0),c(e),f(!1),m("chat"),await new Promise(e=>setTimeout(e,100)),k(await w(e)),$(!1)},Q=async()=>{if(d)try{(await (0,b.Ud)(`/api/chat/history?topic=${encodeURIComponent(d)}`,{method:"DELETE"})).ok&&(k([]),q(!1),p.oR.success("Chat history cleared"),V())}catch(e){console.error("Error clearing chat history:",e)}},X=async()=>{if(Y)try{(await (0,b.Ud)(`/api/chat/history?topic=${encodeURIComponent(Y)}&action=delete`,{method:"DELETE"})).ok&&(p.oR.success(`Chat "${Y}" deleted`),d===Y&&(c(null),k([]),f(!0)),V())}catch(e){console.error("Error deleting chat:",e)}finally{H(!1),B(null)}},ee=o&&(o.subscription&&("pro"===o.subscription.plan||"enterprise"===o.subscription.plan)&&"active"===o.subscription.status||o.isPremium),er=async()=>{if(!C.trim())return;if(!ee)return void p.oR.error("Premium subscription required for AI tutor chat. Please upgrade.");if(!d)return void p.oR.error("Please set a topic first.");let e={role:"user",content:C.trim(),timestamp:new Date().toISOString()},r=[...N,e];k(r),S(""),P(!0);try{let t=N.map(e=>({role:e.role,content:e.content})),a=await (0,b.Ud)("/api/chat",{method:"POST",body:JSON.stringify({message:e.content,conversationHistory:t,topic:d})}),s=await a.json();if(a.ok){let e={role:"assistant",content:s.response,timestamp:s.timestamp},t=[...r,e];k(t),await v(t,d)}else k(e=>e.slice(0,-1)),p.oR.error(s.error||"Failed to get response")}catch(e){console.error("Chat error:",e),k(e=>e.slice(0,-1))}finally{P(!1)}};return(0,a.jsxs)("div",{className:`flex flex-col w-full h-full overflow-hidden relative ${"dark"===l?"bg-gray-950 text-white":"bg-white text-gray-900"}`,children:["history"===x&&(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-6 max-w-2xl mx-auto w-full space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-black uppercase tracking-widest mb-6 px-2",children:"Your Conversations"}),(0,a.jsxs)("button",{onClick:()=>{N.length>0?L(!0):(c(null),k([]),f(!0),S(""),m("chat"))},className:"w-full flex items-center gap-4 p-3 rounded-2xl bg-indigo-600 text-white active:scale-[0.98] transition-all mb-8",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:(0,a.jsx)(es.A,{size:20})}),(0,a.jsx)("div",{className:"text-left",children:(0,a.jsx)("span",{className:"text-base font-bold",children:"New Question"})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-500 mb-2 px-2",children:"Recent Sessions"}),T?(0,a.jsx)("div",{className:"py-12 flex justify-center text-indigo-600",children:(0,a.jsx)(ei.A,{className:"animate-spin"})}):0===R.length?(0,a.jsxs)("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-900/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-800",children:[(0,a.jsx)(el.A,{className:"mx-auto mb-4 opacity-20",size:48}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"No history yet. Ask your first question!"})]}):R.map(e=>(0,a.jsxs)("button",{onClick:()=>K(e.topic),className:"w-full flex items-center justify-between p-3 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 shadow-sm active:scale-[0.98] transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 text-left",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center",children:(0,a.jsx)(el.A,{className:"text-indigo-600 dark:text-indigo-400",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block font-bold text-xs tracking-tight truncate max-w-[200px]",children:e.topic}),(0,a.jsxs)("span",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-widest",children:[e.messageCount||0," messages"]})]})]}),(0,a.jsx)(_.A,{size:18,className:"text-gray-400 rotate-180"})]},e.id||e.topic))]})]}),"chat"===x&&(0,a.jsxs)("div",{className:"flex-1 flex flex-col relative w-full h-full bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20",children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-[0.05] dark:opacity-[0.03] pointer-events-none",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/cubes.png")',backgroundRepeat:"repeat"}}),(0,a.jsxs)("div",{className:"h-16 flex items-center justify-between px-4 sticky top-0 w-full bg-white/80 dark:bg-[#111b21]/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700/50 z-10 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>m("history"),className:"p-2 -ml-2 text-gray-500 hover:text-gray-900 dark:hover:text-white rounded-lg",children:(0,a.jsx)(_.A,{className:"w-6 h-6"})}),(0,a.jsx)("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/50 rounded-full flex items-center justify-center mx-3 shadow-inner overflow-hidden",children:ee&&o?.image?(0,a.jsx)("img",{src:o.image,alt:"Avatar",className:"w-full h-full object-cover"}):(0,a.jsx)(eo.A,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-sm text-gray-900 dark:text-gray-100 tracking-tight truncate max-w-[150px]",children:d||"AI Tutor"}),(0,a.jsx)("p",{className:"text-[10px] text-green-500 dark:text-green-400 font-bold uppercase tracking-widest",children:"online"})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("button",{onClick:()=>{d&&q(!0)},className:"p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:(0,a.jsx)(O.A,{className:"w-5 h-5"})})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-4 scroll-smooth z-10",children:[y&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] max-w-2xl mx-auto text-center px-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-white dark:bg-gray-800 rounded-3xl flex items-center justify-center mb-6 shadow-xl active:scale-95 transition-all",children:(0,a.jsx)(h.A,{className:"w-10 h-10 text-indigo-600"})}),(0,a.jsx)("h2",{className:"text-3xl font-black uppercase tracking-tighter text-gray-900 dark:text-white mb-2",children:"Ask Anything"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-8 font-medium",children:"Enter a topic to begin your personalized session"}),(0,a.jsxs)("div",{className:"w-full relative shadow-2xl rounded-3xl overflow-hidden border border-gray-100 dark:border-gray-800",children:[(0,a.jsx)("input",{type:"text",value:g,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&W(),placeholder:"Enter a topic...",className:"w-full px-6 py-5 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-0 outline-none text-lg font-bold",autoFocus:!0}),(0,a.jsx)("button",{onClick:W,className:"absolute right-2 top-2 bottom-2 px-8 bg-indigo-600 text-white rounded-2xl font-black uppercase tracking-widest text-xs",children:"Start"})]})]}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-4",children:[N.map((e,r)=>{let t="user"===e.role,s=e.timestamp?new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return(0,a.jsx)("div",{className:`flex ${t?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2 duration-300`,children:(0,a.jsxs)("div",{className:`max-w-[85%] sm:max-w-[75%] px-4 py-3 rounded-2xl shadow-sm text-sm relative ${t?"bg-indigo-600 text-white rounded-tr-none shadow-indigo-500/10":"bg-white dark:bg-[#1c2c33] text-gray-900 dark:text-white rounded-tl-none border border-gray-100 dark:border-gray-800/50"}`,children:[(0,a.jsx)("div",{className:`prose prose-sm max-w-none break-words ${t?"prose-invert text-white":"dark:prose-invert text-gray-800 dark:text-gray-100"}`,dangerouslySetInnerHTML:{__html:(e=>{if(!e)return"";let r=e;return(r=(r=(r=(r=(r=(r=r.replace(/\*\*([^*]+?)\*\*/g,'<strong class="font-bold text-gray-900 dark:text-gray-100">$1</strong>')).replace(/__([^_]+?)__/g,'<strong class="font-bold text-gray-900 dark:text-gray-100">$1</strong>')).replace(/\*([^*\n]+?)\*/g,'<em class="italic text-gray-800 dark:text-gray-200">$1</em>')).replace(/_([^_\n]+?)_/g,'<em class="italic text-gray-800 dark:text-gray-200">$1</em>')).replace(/<u>([^<]+?)<\/u>/g,'<u class="underline decoration-2">$1</u>')).replace(/`([^`]+)`/g,'<code class="bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm font-mono text-red-500 dark:text-red-400 border border-gray-200 dark:border-gray-700">$1</code>')).replace(/\n/g,"<br />")})(e.content)}}),(0,a.jsxs)("div",{className:`text-[9px] font-bold uppercase tracking-widest mt-2 flex justify-end items-center gap-1 opacity-50 ${t?"text-indigo-100":"text-gray-400"}`,children:[(0,a.jsx)("span",{children:s}),t&&(0,a.jsx)(h.A,{size:10,className:"text-white"})]})]})},r)}),A&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-[#1c2c33] px-4 py-2 rounded-2xl rounded-tl-none shadow-sm flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce delay-75"}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-indigo-600 rounded-full animate-bounce delay-150"})]})}),(0,a.jsx)("div",{ref:j,className:"h-32"})]})]}),(0,a.jsx)("div",{className:"p-4 bg-white/80 dark:bg-gray-950/80 backdrop-blur-md z-20 fixed bottom-0 w-full left-0 border-t border-gray-100 dark:border-gray-800",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto flex items-end gap-2",children:[(0,a.jsx)("div",{className:"flex-1 flex items-end bg-gray-50 dark:bg-[#1c2c33] rounded-[1.5rem] border border-gray-200 dark:border-gray-700 px-4 py-1.5 shadow-inner",children:(0,a.jsx)("textarea",{value:C,onChange:e=>S(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),er())},placeholder:"Type a question...",className:"w-full bg-transparent border-none resize-none max-h-32 py-2 text-sm text-gray-900 dark:text-white font-medium outline-none",rows:1,onInput:e=>{e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}})}),(0,a.jsx)("button",{onClick:er,disabled:A||!C.trim(),className:`w-11 h-11 rounded-full flex items-center justify-center transition-all shadow-md active:scale-90 ${C.trim()?"bg-indigo-600 text-white":"bg-gray-200 dark:bg-gray-800 text-gray-400"}`,children:(0,a.jsx)(en.A,{className:"w-5 h-5"})})]})})]}),(0,a.jsx)(G,{isOpen:D,onClose:()=>L(!1),onConfirm:()=>{c(null),k([]),f(!0),S(""),L(!1),m("chat")},title:"Start New Session",message:"Would you like to start a fresh learning session? Your history will be preserved.",confirmText:"Confirm",cancelText:"Maybe later",confirmColor:"black"}),(0,a.jsx)(G,{isOpen:M,onClose:()=>q(!1),onConfirm:Q,title:"Clear Context",message:"Clear current chat context? This will remove these messages from memory.",confirmText:"Clear",cancelText:"Cancel",confirmColor:"red"}),(0,a.jsx)(G,{isOpen:J,onClose:()=>H(!1),onConfirm:X,title:"Delete Conversation",message:"Are you sure you want to permanently delete this conversation?",confirmText:"Delete",cancelText:"Cancel",confirmColor:"red"})]})}var ex=t(94655),em=t(80723),eg=t(41762);function eu({setActiveContent:e,setHideNavs:r}){let[t,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(!0),[n,d]=(0,s.useState)(null),[c,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{r&&r(c&&!!n)},[c,n,r]);let[m,g]=(0,s.useState)(new Set),[u,f]=(0,s.useState)(!1),[j,w]=(0,s.useState)(new Set),[v,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)(null),{user:S,refreshToken:A}=(0,y.h)();S&&(S.subscription&&"pro"===S.subscription.plan&&"active"===S.subscription.status||S.isPremium),(0,s.useEffect)(()=>{P();try{let e=localStorage.getItem("bookmarked_flashcards");e&&w(new Set(JSON.parse(e)))}catch{}},[]);let P=async(e=!0)=>{try{let r=await (0,b.Ud)("/api/flashcards",{headers:{"Content-Type":"application/json"}});if(401===r.status&&e){if(console.log("Token expired, attempting to refresh..."),await A())return P(!1);return void p.oR.error("Session expired. Please log in again.")}if(r.ok){let e=await r.json();i(e.cards||[])}else p.oR.error("Failed to load flashcards")}catch(e){console.error("Error fetching flashcards:",e),p.oR.error("Error loading flashcards")}finally{o(!1)}},E=async(e=!0)=>{if(k)try{let r=await (0,b.Ud)(`/api/flashcards/${k._id}`,{method:"DELETE"});if(401===r.status&&e){if(await A())return E(!1);return void p.oR.error("Session expired. Please log in again.")}r.ok?(i(t.filter(e=>e._id!==k._id)),p.oR.success("Flashcard set deleted successfully"),N(!1),C(null)):p.oR.error("Failed to delete flashcard set")}catch(e){console.error("Error deleting flashcard set:",e),p.oR.error("Error deleting flashcard set")}},$=async(e,r=!0)=>{let t=j.has(e),a=new Set(j);t?a.delete(e):a.add(e),w(a);try{localStorage.setItem("bookmarked_flashcards",JSON.stringify([...a]))}catch{}try{let a=await (0,b.Ud)("/api/library",{method:"POST",headers:{"Content-Type":"application/json","x-user-id":S?._id||S?.id||""},body:JSON.stringify({action:"bookmark",itemId:`cards_${e}`})});if(401===a.status&&r&&await A())return $(e,!1);if(a.ok)p.oR.success(t?"Removed from bookmarks":"Added to bookmarks");else{let r=new Set(j);t?r.add(e):r.delete(e),w(r);try{localStorage.setItem("bookmarked_flashcards",JSON.stringify([...r]))}catch{}p.oR.error("Failed to update bookmark")}}catch(a){let r=new Set(j);t?r.add(e):r.delete(e),w(r);try{localStorage.setItem("bookmarked_flashcards",JSON.stringify([...r]))}catch{}console.error("Error bookmarking card:",a),p.oR.error("Failed to update bookmark")}};return l?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-48 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-64"})]}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-40"})]}),(0,a.jsx)("div",{className:"py-12 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl mb-12 border border-gray-200/50 dark:border-slate-700/50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,r)=>(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-16 mx-auto mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-24 mx-auto"})]},r))})})}),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-64 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-96"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((e,r)=>(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-300 dark:bg-gray-600 rounded-xl w-12 h-12"}),(0,a.jsx)("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded-full w-20"})]}),(0,a.jsx)("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-6"}),(0,a.jsx)("div",{className:"flex items-center gap-2 mb-6 py-3 border-t border-gray-200 dark:border-slate-700",children:(0,a.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-16"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-10"}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded flex-1"})]}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-10"})]}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded w-full mt-4"})]},r))})]}):c&&n?(0,a.jsxs)("div",{className:`min-h-screen bg-white dark:bg-slate-900 transition-opacity duration-300 ${u?"opacity-0":"opacity-100"}`,children:[(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("button",{onClick:()=>{x(!1),d(null)},className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors","aria-label":"Back to flashcards library",children:[(0,a.jsx)(em.A,{size:20}),(0,a.jsx)("span",{children:"Back"})]})}),(0,a.jsx)(ex.A,{cardData:n})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:"My Flashcards"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2",children:"View and manage your generated flashcard sets"})]}),(0,a.jsxs)("button",{onClick:()=>e("generate"),className:"w-full sm:w-auto bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer",children:[(0,a.jsx)(es.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Create New"})]})]}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:(0,a.jsx)(h.A,{className:"w-16 h-16 mx-auto"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No flashcards yet"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first flashcard set to get started"})]}):(0,a.jsxs)(a.Fragment,{children:[(()=>{let e=t.length,r=t.reduce((e,r)=>e+(r.totalCards||0),0),s=0;try{s=t.reduce((e,r)=>{let t=`opened_cards_${r._id}`,a=localStorage.getItem(t);if(!a)return e;try{let r=JSON.parse(a);return e+(Array.isArray(r)?r.length:0)}catch{return e}},0)}catch{}let i=j.size;return(0,a.jsx)("div",{className:"py-8 sm:py-10 mb-12",children:(0,a.jsx)("div",{className:"max-w-full mx-auto px-0 ",children:(0,a.jsxs)("div",{className:"flex flex-wrap justify-between gap-6",children:[(0,a.jsx)("div",{className:"relative overflow-hidden rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 flex-1 min-w-[240px]",children:(0,a.jsxs)("div",{className:"relative p-5 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 flex items-center justify-center font-bold",children:e}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Sets"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Collections you've created"})]})]})}),(0,a.jsx)("div",{className:"relative overflow-hidden rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 flex-1 min-w-[240px]",children:(0,a.jsxs)("div",{className:"relative p-5 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-300 flex items-center justify-center font-bold",children:r}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Cards"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Across all sets"})]})]})}),(0,a.jsx)("div",{className:"relative overflow-hidden rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 flex-1 min-w-[240px]",children:(0,a.jsxs)("div",{className:"relative p-5 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-300 flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Opened Cards"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Across all sets (this device)"})]})]})}),(0,a.jsx)("div",{className:"relative overflow-hidden rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 flex-1 min-w-[240px]",children:(0,a.jsxs)("div",{className:"relative p-3 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-300 flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text:white",children:i})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bookmarked"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Sets saved for quick access"})]})]})})]})})})})(),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 text-balance",children:"Your Flashcards Library"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-balance",children:"Master key concepts with your personalized flashcard collections"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>{let r=(e.difficulty||e.level||"beginner").toLowerCase(),t=r.charAt(0).toUpperCase()+r.slice(1),s="beginner"===r?"bg-green-500/15 text-green-600 border-green-500/30 dark:bg-green-500/20 dark:text-green-300":"intermediate"===r?"bg-yellow-500/15 text-yellow-600 border-yellow-500/30 dark:bg-yellow-500/20 dark:text-yellow-300":"bg-red-500/15 text-red-600 border-red-500/30 dark:bg-red-500/20 dark:text-red-300",i=e.totalCards??(Array.isArray(e.cards)?e.cards.length:0);return(0,a.jsx)("div",{className:"h-full",children:(0,a.jsxs)("div",{className:"relative flex h-full flex-col rounded-xl border border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800 transition-colors hover:border-blue-300 dark:hover:border-blue-500",children:[(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 min-w-0",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 flex items-center justify-center shrink-0",children:(0,a.jsx)(h.A,{size:20})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 text-balance",children:e.title}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400 line-clamp-1",children:e.topic?`Flashcards for ${e.topic}`:"Interactive flashcards to master key concepts."})]})]}),(0,a.jsx)("div",{className:`inline-flex items-center px-3 py-1 rounded-full border text-xs font-semibold ${s}`,children:t})]}),(0,a.jsx)("div",{className:"mt-4 flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)(h.A,{size:14,className:"text-gray-500 dark:text-gray-400"}),(0,a.jsx)("span",{className:"font-medium",children:i}),(0,a.jsx)("span",{children:"cards"})]})})]}),(0,a.jsxs)("div",{className:"mt-auto px-5 pb-5",children:[(0,a.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("button",{onClick:()=>$(e._id),className:`p-2 rounded-lg border transition-colors ${j.has(e._id)?"text-yellow-600 dark:text-yellow-300 border-yellow-300/40 bg-yellow-50 dark:bg-yellow-900/20":"text-gray-600 dark:text-gray-300 border-gray-200 dark:border-slate-700 hover:bg-yellow-50/40 dark:hover:bg-yellow-900/10 hover:text-yellow-600"}`,title:j.has(e._id)?"Remove bookmark":"Bookmark",children:(0,a.jsx)(eg.A,{size:18,className:j.has(e._id)?"fill-current":""})})})}),(0,a.jsxs)("button",{onClick:async()=>{f(!0),g(r=>new Set(r).add(e._id)),setTimeout(()=>{d(e),x(!0),g(r=>{let t=new Set(r);return t.delete(e._id),t}),f(!1)},300)},disabled:m.has(e._id),className:"w-full mt-4 py-2.5 px-4 rounded-xl bg-blue-600 hover:bg-blue-700 dark:bg-blue-600/90 dark:hover:bg-blue-600 text-white font-semibold text-sm transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(h.A,{size:16}),(0,a.jsx)("span",{children:m.has(e._id)?"Loading...":"Study Flashcards"})]})]})]})},e._id)})})]}),v&&k&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md shadow-2xl border border-gray-200 dark:border-slate-700",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full mx-auto mb-4",children:(0,a.jsx)(O.A,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Delete Flashcard Set"}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:["Are you sure you want to delete"," ",(0,a.jsxs)("strong",{children:['"',k.title,'"']}),"? This action cannot be undone."]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{N(!1),C(null)},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:E,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})})]})}var eh=t(55687),ep=t(69286);function eb({setHideNavs:e}){let r=(0,i.useRouter)(),t=(0,i.useSearchParams)(),{user:l,loading:o,fetchUser:d}=(0,y.h)(),c=t.get("tab")||"generate";(0,s.useEffect)(()=>{e&&e(!1)},[c,e]),(0,s.useEffect)(()=>{let e=t.get("payment"),a=t.get("plan");"success"===e?(p.oR.success(`ðŸŽ‰ Payment successful! You now have ${a||"Pro"} plan access.`),d&&d(),r.replace("/dashboard")):"failed"===e?(p.oR.error("Payment failed. Please try again."),r.replace("/dashboard")):"error"===e&&(p.oR.error("An error occurred during payment. Please contact support."),r.replace("/dashboard"))},[t,r,d]);let x="chat"===c,m={generate:w,explore:N.default,library:B,flashcards:eu,quizzes:eh.default,"staff-picks":X,upgrade:ea,chat:ec,profile:ep.default},g=m[c]||m.generate;return(0,a.jsx)("div",{className:`relative bg-gray-50 dark:bg-gray-900 ${x?"h-[calc(100vh-64px)] overflow-hidden":""}`,children:(0,a.jsxs)("div",{className:x?"w-full h-full":"max-w-[90rem] w-full mx-auto px-3 sm:px-6 lg:px-8 xl:px-12 py-6 sm:py-8 lg:py-12 scrollbar-hide",style:x?{}:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[!x&&(0,a.jsx)(n(),{id:"8acd18d6d010af34",children:".scrollbar-hide.jsx-8acd18d6d010af34::-webkit-scrollbar{display:none}"}),(0,a.jsx)("div",{className:x?"h-full":"grid grid-cols-1 gap-4 sm:gap-6",children:(0,a.jsx)("div",{className:"w-full h-full",children:g?(0,a.jsx)(g,{setActiveContent:e=>{let a=new URLSearchParams(t);a.set("tab",e),r.push(`/dashboard?${a.toString()}`)},setHideNavs:e},c):(0,a.jsx)("div",{className:"text-center text-gray-600 dark:text-gray-400",children:"Loading content..."})})})]})})}function ey(){let e=(0,i.useSearchParams)(),r=(0,i.useRouter)(),t=e.get("tab")||"generate";return(0,a.jsx)(l.default,{activeContent:t,setActiveContent:t=>{let a=new URLSearchParams(e);a.set("tab",t),r.push(`/dashboard?${a.toString()}`)},children:(0,a.jsx)(eb,{})})}}},e=>{e.O(0,[3930,293,6609,8500,8991,8894,5333,4702,6761,6691,6788,9776,50,2261,9286,5687,8441,3794,7358],()=>e(e.s=4272)),_N_E=e.O()}]);