"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9776],{14858:(e,t,s)=>{s.d(t,{S:()=>o});var r=s(95155);s(12115);var a=s(47279),i=s(94514),l=s(68310);function o({className:e,...t}){return(0,r.jsx)(a.bL,{"data-slot":"checkbox",className:(0,l.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,r.jsx)(a.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,r.jsx)(i.A,{className:"size-3.5"})})})}},46424:(e,t,s)=>{s.d(t,{C:()=>n,z:()=>o});var r=s(95155);s(12115);var a=s(31620),i=s(16950),l=s(68310);function o({className:e,...t}){return(0,r.jsx)(a.bL,{"data-slot":"radio-group",className:(0,l.cn)("grid gap-3",e),...t})}function n({className:e,...t}){return(0,r.jsx)(a.q7,{"data-slot":"radio-group-item",className:(0,l.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,r.jsx)(a.C1,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}},50807:(e,t,s)=>{s.d(t,{Wu:()=>n,ZB:()=>o,Zp:()=>i,aR:()=>l});var r=s(95155);s(12115);var a=s(68310);function i({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function l({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function o({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function n({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}},54045:(e,t,s)=>{s.d(t,{J:()=>l});var r=s(95155);s(12115);var a=s(91760),i=s(68310);function l({className:e,...t}){return(0,r.jsx)(a.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}},68310:(e,t,s)=>{s.d(t,{cn:()=>i});var r=s(29722),a=s(622);function i(...e){return(0,a.QP)((0,r.$)(e))}},86277:(e,t,s)=>{s.d(t,{$:()=>n});var r=s(95155);s(12115);var a=s(42442),i=s(18460),l=s(68310);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function n({className:e,variant:t,size:s,asChild:i=!1,...n}){let d=i?a.DX:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,l.cn)(o({variant:t,size:s,className:e})),...n})}},98126:(e,t,s)=>{s.d(t,{Iu:()=>d,O5:()=>n});var r=s(18831);let a=[37,99,235],i=[31,41,55],l=[107,114,128],o=[229,231,235],n=async(e,t="course")=>{if(!e)throw Error("No data provided");let n=new r.Ay({orientation:"portrait",unit:"mm",format:"a4"}),d=25,c=(e,t)=>{n.setDrawColor(...o),n.setLineWidth(.2),n.line(20,15,190,15),n.line(20,282,190,282),n.setFont("helvetica","normal"),n.setFontSize(8),n.setTextColor(...l),n.text("Actinova AI Tutor - Personalized Learning",20,287),n.text("Copyright \xa9 Actinova AI Tutor. All rights reserved.",105,287,{align:"center"}),n.text(`Page ${e} of ${t}`,190,287,{align:"right"})},x=e=>d+e>272&&(n.addPage(),d=25,!0);n.setFillColor(255,255,255),n.rect(0,0,210,297,"F"),d=40;try{n.addImage("/logo.png","PNG",85,d,40,40),d+=45}catch(e){d=80}d+=16,n.setTextColor(...i),n.setFont("helvetica","bold"),n.setFontSize(48),n.text("ACTINOVA",105,d,{align:"center"}),d+=12,n.setFontSize(24),n.text("AI TUTOR PLATFORM",105,d,{align:"center"}),d=150;let h=n.splitTextToSize(e.title||"Study Material",150),g=12*h.length;n.setDrawColor(...a),n.setLineWidth(.5),n.roundedRect(15,d-15,180,40+g+20,2,2,"D"),n.setTextColor(...a),n.setFontSize(14),n.text("NOTES"===t.toUpperCase()?"PERSONALIZED STUDY NOTES":"PERSONALIZED COURSE MATERIAL",105,d,{align:"center"}),d+=15,n.setTextColor(...i),n.setFontSize(28),n.text(h,105,d,{align:"center"}),d+=12*h.length+10,n.setFontSize(12),n.setTextColor(...l),n.text(`Generated on ${new Date().toLocaleDateString()}`,105,d,{align:"center"}),n.addPage(),d=30;let u=(e,t,s=11)=>{n.setFontSize(s),n.setFont("helvetica","normal"),n.setTextColor(...i);let r=e.replace(/\*\*\*([^*]+)\*\*\*/g,"$1").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/~~([^~]+)~~/g,"$1").replace(/`([^`]+)`/g,"$1").trim();n.splitTextToSize(r,170-(t-20)).forEach(e=>{x(8),n.text(e,t,d),d+=7})},m=(e,t=null)=>{if(!e)return;let s=e.split("\n"),r=!1,c=!1,h=!0;s.forEach(e=>{let s=e.trim();if(s.startsWith("```")){r=!r,d+=2,h=!1;return}if(r){n.setFont("courier","normal"),n.setFontSize(10),n.setFillColor(245,245,245),n.rect(22,d-4,166,6,"F"),n.text(e,24,d),d+=6,n.setFont("helvetica","normal"),h=!1;return}if(["---","***","___"].includes(s)){x(10),d+=5,n.setDrawColor(...o),n.setLineWidth(.5),n.line(20,d,190,d),d+=8,h=!1;return}if(!s){d+=5,h=!1;return}if(x(12),s.startsWith("# Module: ")||s.startsWith("MODULE: ")||s.startsWith("Module: ")){h=!1;return}if(s.startsWith("## LESSON: ")||s.startsWith("LESSON: ")||s.startsWith("Lesson: ")){d+=5,n.setFont("helvetica","bold"),n.setFontSize(20),n.setTextColor(...a);let e=s.replace(/^##\s*/,"").replace(/^LESSON:\s*/i,"");e=e.toUpperCase();let t=n.splitTextToSize(e,170);n.text(t,20,d),d+=10*t.length;let r=n.getTextWidth(t[t.length-1]);n.setDrawColor(...a),n.setLineWidth(.8),n.line(20,d-2,20+r,d-2),d+=5,h=!1;return}if(h&&!s.startsWith("#")&&!s.startsWith("##")&&!s.startsWith("###")&&!s.startsWith("> ")&&!s.match(/^[-*•]\s/)&&!s.match(/^\d+\.\s/)){d+=5,n.setFont("helvetica","bold"),n.setFontSize(26),n.setTextColor(...a);let e=n.splitTextToSize(s,160);n.text(e,20,d),d+=12*e.length+8,h=!1;return}if(h=!1,s.startsWith("# ")){let e=s.substring(2).replace(/[\*_]/g,"").trim();if(!c&&t&&e.toLowerCase().includes(t.toLowerCase())){c=!0;return}d+=5,n.setFont("helvetica","bold"),n.setFontSize(26),n.setTextColor(...a);let r=n.splitTextToSize(e,170);n.text(r,20,d),d+=12*r.length+8}else if(s.startsWith("## ")){d+=5,n.setFont("helvetica","bold"),n.setFontSize(20),n.setTextColor(...a);let e=s.substring(3).replace(/[\*_]/g,"").trim(),t=n.splitTextToSize(e,170);n.text(t,20,d),d+=10*t.length;let r=n.getTextWidth(t[t.length-1]);n.setDrawColor(...a),n.setLineWidth(.8),n.line(20,d-2,20+r,d-2),d+=5}else if(s.startsWith("### ")){d+=4,n.setFont("helvetica","bold"),n.setFontSize(16),n.setTextColor(...i);let e=s.substring(4).replace(/[\*_]/g,"").trim(),t=n.splitTextToSize(e,170);n.text(t,20,d),d+=9*t.length+4}else if(s.startsWith("#### ")){d+=3,n.setFont("helvetica","bold"),n.setFontSize(14),n.setTextColor(...i);let e=s.substring(5).replace(/[\*_]/g,"").trim(),t=n.splitTextToSize(e,170);n.text(t,20,d),d+=8*t.length+3}else if(s.startsWith("> ")){let e=s.substring(2).trim();n.setFont("helvetica","italic"),n.setTextColor(...l);let t=n.splitTextToSize(e,160);x(6*t.length+4),n.setDrawColor(...o),n.setLineWidth(1),n.line(22,d-4,22,d+6*t.length-4),n.text(t,28,d),d+=6*t.length+4,n.setFont("helvetica","normal")}else if(s.match(/^[-*•]\s/))n.setFont("helvetica","bold"),n.setTextColor(...a),n.text("•",22,d),u(s.replace(/^[-*•]\s/,""),28);else if(s.match(/^\d+\.\s/)){let e=s.match(/^\d+\./)[0];n.setFont("helvetica","bold"),n.setTextColor(...a),n.text(e,20,d),u(s.replace(/^\d+\.\s/,""),30)}else u(s,20)})};if("course"===t){let t=e.modules||e.courseData?.modules||[];n.setFont("helvetica","bold"),n.setFontSize(24),n.setTextColor(...a),n.text("Table of Contents",20,d),d+=15,t.forEach((e,t)=>{x(12),n.setFontSize(12),n.setFont("helvetica","normal"),n.setTextColor(...i),n.text(`Module ${t+1}: ${e.title}`,20,d),d+=8}),t.forEach((e,t)=>{n.addPage(),d=35,e.lessons?.forEach((e,s)=>{x(20),n.setFont("helvetica","bold"),n.setFontSize(16),n.setTextColor(...i),n.text(`${t+1}.${s+1} ${e.title||e}`,20,d),d+=12,e.content&&m(e.content,e.title||e),d+=10})})}else m(e.content,e.title);let p=n.internal.pages.length-1;for(let e=1;e<=p;e++)n.setPage(e),c(e,p);let b=`${e.title?.replace(/\s+/g,"_").toLowerCase()||"actinova_study"}.pdf`;if(window.Capacitor||"capacitor:"===window.location.protocol)try{let t=n.output("datauristring").split(",")[1],{Filesystem:r,Directory:a}=await Promise.all([s.e(7805),s.e(8276)]).then(s.bind(s,78276)),{Share:i}=await Promise.all([s.e(7805),s.e(8493)]).then(s.bind(s,98493)),l=await r.writeFile({path:b,data:t,directory:a.Cache});await i.share({title:"Actinova PDF Download",text:`Personalized material for ${e.title}`,url:l.uri,dialogTitle:"Open PDF"})}catch(e){console.error("Capacitor PDF error:",e),n.save(b)}else n.save(b)},d=async e=>{if(!e||!e.questions)throw Error("No data provided");let t=new r.Ay({orientation:"portrait",unit:"mm",format:"a4"}),n=40,d=(s,r)=>{t.setDrawColor(...o),t.setLineWidth(.2),t.line(20,15,190,15),t.setFontSize(8),t.setTextColor(...l),t.text(`Actinova AI Tutor - Assessment: ${e.title}`,20,12),s&&t.text(`Page ${s} of ${r}`,190,12,{align:"right"})};d(),t.setFont("helvetica","bold"),t.setFontSize(24),t.setTextColor(...a),t.text("ASSESSMENT PAPER",105,n,{align:"center"}),n+=12,t.setFontSize(14),t.setTextColor(...l),t.text(`Subject: ${e.topic||"General Knowledge"}`,105,n,{align:"center"}),n+=20,t.setDrawColor(...a),t.setLineWidth(1),t.line(20,n,190,n),n+=15,e.questions.forEach((e,s)=>{let r=t.splitTextToSize(`${s+1}. ${e.text}`,160),a=8*(e.options?.length||0);n+6*r.length+a+20>267&&(t.addPage(),d(),n=25),t.setFont("helvetica","bold"),t.setFontSize(12),t.setTextColor(...i),t.text(r,20,n),n+=6*r.length+5,e.options?(t.setFont("helvetica","normal"),t.setFontSize(11),e.options.forEach((e,s)=>{t.setTextColor(...l),t.text(String.fromCharCode(65+s)+")",25,n),t.setTextColor(...i),t.text(t.splitTextToSize(e,150),35,n),n+=8})):(t.setDrawColor(...o),t.line(25,n+5,185,n+5),n+=15),n+=10}),t.addPage(),d(),n=30,t.setFont("helvetica","bold"),t.setFontSize(18),t.setTextColor(...a),t.text("ANSWER KEY",20,n),n+=15,t.setFontSize(11),e.questions.forEach((e,s)=>{n>277&&(t.addPage(),d(),n=25),t.setFont("helvetica","bold"),t.setTextColor(...i),t.text(`${s+1}: `,20,n),t.setFont("helvetica","normal"),t.setTextColor(...a),t.text(String(e.correctAnswer),30,n),n+=8});let c=t.internal.pages.length-1;for(let e=1;e<=c;e++)t.setPage(e),d(e,c);let x=window.Capacitor||"capacitor:"===window.location.protocol,h=`assessment_${e.title?.replace(/\s+/g,"_").toLowerCase()||"exam"}.pdf`;if(x)try{let r=t.output("datauristring").split(",")[1],{Filesystem:a,Directory:i}=await Promise.all([s.e(7805),s.e(8276)]).then(s.bind(s,78276)),{Share:l}=await Promise.all([s.e(7805),s.e(8493)]).then(s.bind(s,98493)),o=await a.writeFile({path:h,data:r,directory:i.Cache});await l.share({title:"Actinova Assessment Download",text:`Assessment paper for ${e.title}`,url:o.uri,dialogTitle:"Open Assessment PDF"})}catch(e){console.error("Capacitor PDF error:",e),t.save(h)}else t.save(h)}},99776:(e,t,s)=>{s.d(t,{A:()=>y});var r=s(95155),a=s(12115),i=s(86277),l=s(50807),o=s(46424),n=s(14858),d=s(54045),c=s(66609),x=s(80723),h=s(52484),g=s(62791),u=s(6962),m=s(7915),p=s(98500),b=s.n(p);s(28393);var f=s(98126),v=s(5669);let y=({quizData:e,topic:t,onBack:s,existingQuizId:p})=>{let y,j,N,w,[k,S]=(0,a.useState)({}),[C,T]=(0,a.useState)(!1),[z,F]=(0,a.useState)(0),[$,_]=(0,a.useState)(!1),[A,E]=(0,a.useState)(!1),[P,W]=(0,a.useState)(1),[D,q]=(0,a.useState)([]),[L,O]=(0,a.useState)(10),[I,M]=(0,a.useState)(!1),[R,J]=(0,a.useState)(0),[U,Z]=(0,a.useState)(!1),[V,Y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let t=p||e._id;if(t){let e=`quiz_completed_${t}`,s=localStorage.getItem(e);s&&(F(parseInt(s)),T(!0),_(!0))}E(!0)},[e._id,p]),(0,a.useEffect)(()=>{e.questions&&e.questions.length>0&&(q(e.questions.slice(0,10)),O(e.questions.length),J(2*e.questions.length*60),Z(!0))},[e.questions]),(0,a.useEffect)(()=>{let e;return U&&R>0&&!C&&(e=setInterval(()=>{J(e=>e<=1?(K(),0):e-1)},1e3)),()=>clearInterval(e)},[U,R,C]),(0,a.useEffect)(()=>{if(D.length>0){Y(!1);let e=setTimeout(()=>Y(!0),50);return()=>clearTimeout(e)}},[D]);let B=(e,t)=>{S(s=>({...s,[e]:t}))},G=async t=>{let s=Math.min((t-1)*10+10,L);if(!(D.length>=s)&&e.questions&&e.questions.length>=s){M(!0),await new Promise(e=>setTimeout(e,800));let t=e.questions.slice(D.length,s);q(e=>[...e,...t]),M(!1)}},Q=e=>{W(e),G(e)},K=async()=>{let t=0;D.forEach(e=>{JSON.stringify(k[e._id])===JSON.stringify(e.correctAnswer)&&(t+=e.points)}),F(t),T(!0),_(!0),Z(!1);let s=p||e._id;if(s){let e=`quiz_completed_${s}`;localStorage.setItem(e,t.toString())}s&&"string"==typeof s&&s.length>0&&/^[a-f\d]{24}$/i.test(s)?(console.log("Saving performance for quiz ID:",s),(0,v.Ud)(`/api/quizzes/${s}/performance`,{method:"POST",body:JSON.stringify({score:t,totalMarks:D.reduce((e,t)=>e+t.points,0),answers:k})}).then(async e=>{if(e.ok)console.log("Performance data saved successfully");else{let t=await e.json().catch(()=>({}));console.error("Failed to save performance data:",e.status,e.statusText,t)}}).catch(e=>{console.error("Error saving performance:",e)})):console.warn("Quiz ID not available or invalid, skipping performance save"),c.oR.success(`Test completed! Your score is ${t}.`)};if(!e||!e.questions)return(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading test..."})});let H=e.questions.reduce((e,t)=>e+t.points,0);return(0,r.jsx)("div",{className:`p-4 sm:p-8 lg:p-12 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen transition-opacity duration-700 ${A?"opacity-100":"opacity-0"}`,style:{paddingTop:"calc(env(safe-area-inset-top) + 1rem)"},children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto",children:[s?(0,r.jsxs)("button",{onClick:s,className:"flex items-center text-sm text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-6",children:[(0,r.jsx)(x.A,{className:"w-4 h-4 mr-1"}),"Back"]}):(0,r.jsxs)(b(),{href:"/dashboard?tab=quizzes",className:"flex items-center text-sm text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-6",children:[(0,r.jsx)(x.A,{className:"w-4 h-4 mr-1"}),"Back"]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center",children:e.title}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center",children:[(0,r.jsx)("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1",children:"Questions"}),(0,r.jsxs)("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[D.length,(0,r.jsxs)("span",{className:"text-gray-400 text-sm font-normal",children:["/",L]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center",children:[(0,r.jsx)("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1",children:"Points"}),(0,r.jsx)("div",{className:"text-xl font-bold text-indigo-600 dark:text-indigo-400",children:D.reduce((e,t)=>e+t.points,0)})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center",children:[(0,r.jsx)("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1",children:"Answered"}),(0,r.jsxs)("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:[Object.keys(k).length,(0,r.jsxs)("span",{className:"text-gray-400 text-sm font-normal",children:["/",D.length]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center",children:[(0,r.jsx)("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1",children:"Time Left"}),(0,r.jsx)("div",{className:`text-xl font-bold font-mono ${R<300?"text-red-500 animate-pulse":"text-gray-900 dark:text-white"}`,children:(y=Math.floor(R/3600),j=Math.floor(R%3600/60),N=R%60,y>0?`${y}:${j.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`:`${j}:${N.toString().padStart(2,"0")}`)})]})]}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400 mb-2",children:[(0,r.jsxs)("span",{children:["Progress (Page ",P,")"]}),(0,r.jsxs)("span",{children:[Math.round(Object.keys(k).length/D.length*100),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-3 rounded-full transition-all duration-300",style:{width:`${Object.keys(k).length/D.length*100}%`}})})]})]}),(0,r.jsx)(l.Zp,{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-sm",children:(0,r.jsxs)(l.Wu,{className:"space-y-12",children:[(0,r.jsx)("div",{className:"space-y-10",children:(w=(P-1)*10,D.slice(w,w+10)).map((e,t)=>{let s=(P-1)*10+t;return(0,r.jsxs)("div",{className:`sm:p-4 bg-white dark:bg-gray-800/50 transition-opacity duration-500 ${V?"opacity-100":"opacity-0"}`,children:[(0,r.jsxs)("div",{className:"flex items-start space-x-4 mb-6",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-bold text-lg",children:s+1}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-100 leading-relaxed mb-2 select-none",children:e.text}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-slate-500 dark:text-slate-400",children:[(0,r.jsxs)("span",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-700 rounded-full font-medium",children:[e.points," point",1!==e.points?"s":""]}),(0,r.jsx)("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full font-medium capitalize",children:e.type.replace("-"," ")})]})]})]}),"multiple-choice"===e.type?(0,r.jsx)(o.z,{onValueChange:t=>B(e._id,t),disabled:C,className:"space-y-3",children:e.options.map((t,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-xl border-2 border-slate-200 dark:border-slate-600 hover:border-blue-300 dark:hover:border-blue-500 transition-all duration-200 group cursor-pointer",children:[(0,r.jsx)(o.C,{value:t,id:`${e._id}-${t}`,className:"w-5 h-5 text-blue-600"}),(0,r.jsxs)(d.J,{htmlFor:`${e._id}-${t}`,className:"flex-1 cursor-pointer text-slate-700 dark:text-slate-300 text-xs italic leading-relaxed group-hover:text-slate-900 dark:group-hover:text-slate-100 select-none",children:[(0,r.jsxs)("span",{className:"font-medium mr-2 text-slate-500 dark:text-slate-400",children:[String.fromCharCode(65+s),"."]}),t]})]},t))}):"true-false"===e.type?(0,r.jsx)(o.z,{onValueChange:t=>B(e._id,t),disabled:C,className:"space-y-3",children:e.options.map((t,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-xl border-2 border-slate-200 dark:border-slate-600 hover:border-green-300 dark:hover:border-green-500 transition-all duration-200 group cursor-pointer",children:[(0,r.jsx)(o.C,{value:t,id:`${e._id}-${t}`,className:"w-5 h-5 text-green-600"}),(0,r.jsxs)(d.J,{htmlFor:`${e._id}-${t}`,className:"flex-1 cursor-pointer text-slate-700 dark:text-slate-300 text-xs italic leading-relaxed group-hover:text-slate-900 dark:group-hover:text-slate-100 select-none",children:[(0,r.jsxs)("span",{className:"font-medium mr-2 text-slate-500 dark:text-slate-400",children:[String.fromCharCode(65+s),"."]}),t]})]},t))}):(0,r.jsx)("div",{className:"space-y-3",children:e.options.map((t,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-xl border-2 border-slate-200 dark:border-slate-600 hover:border-purple-300 dark:hover:border-purple-500 transition-all duration-200 group cursor-pointer",children:[(0,r.jsx)(n.S,{id:`${e._id}-${t}`,onCheckedChange:s=>{let r=k[e._id]||[],a=s?[...r,t]:r.filter(e=>e!==t);B(e._id,a)},disabled:C,className:"w-5 h-5 text-purple-600"}),(0,r.jsxs)(d.J,{htmlFor:`${e._id}-${t}`,className:"flex-1 cursor-pointer text-slate-700 dark:text-slate-300 text-xs italic leading-relaxed group-hover:text-slate-900 dark:group-hover:text-slate-100 select-none",children:[(0,r.jsxs)("span",{className:"font-medium mr-2 text-slate-500 dark:text-slate-400",children:[String.fromCharCode(65+s),"."]}),t]})]},t))}),C&&(0,r.jsx)("div",{className:"mt-4 p-3 rounded-lg text-sm",children:JSON.stringify(k[e._id])===JSON.stringify(e.correctAnswer)?(0,r.jsxs)("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[(0,r.jsx)(h.A,{className:"w-5 h-5 mr-2"}),"Correct!"]}):(0,r.jsxs)("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[(0,r.jsx)(g.A,{className:"w-5 h-5 mr-2"}),"Incorrect. Correct answer:"," ",(0,r.jsx)("span",{className:"select-none",children:Array.isArray(e.correctAnswer)?e.correctAnswer.join(", "):e.correctAnswer})]})})]},`question-${s}`)})}),C?(0,r.jsxs)("div",{className:"mt-8 text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Test Complete!"}),(0,r.jsxs)("p",{className:"text-xl mt-2",children:["Your score:"," ",(0,r.jsx)("span",{className:"font-bold text-blue-500",children:z})," /"," ",H]}),(0,r.jsxs)("div",{className:"flex gap-4 justify-center mt-6",children:[(0,r.jsx)(i.$,{onClick:()=>{if(S({}),T(!1),_(!1),F(0),W(1),q(e.questions.slice(0,10)),O(e.questions.length),J(2*e.questions.length*60),Z(!0),e._id){let t=`quiz_completed_${e._id}`;localStorage.removeItem(t)}},variant:"outline",children:"Retake Test"}),(0,r.jsxs)(i.$,{onClick:()=>(0,f.Iu)(e),variant:"secondary",className:"bg-indigo-600 hover:bg-indigo-700 text-white border-none transition-all shadow-md hover:shadow-lg",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Download Exam"]}),(0,r.jsxs)(i.$,{onClick:()=>_(!$),children:[(0,r.jsx)(m.A,{className:"w-4 h-4 mr-2"}),$?"Hide Review":"Review Answers"]})]})]}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-4",children:[(0,r.jsx)(i.$,{onClick:()=>Q(P-1),disabled:1===P||I,variant:"outline",size:"sm",children:"Previous"}),(0,r.jsx)("div",{className:"flex space-x-2",children:Array.from({length:Math.ceil(L/10)},(e,t)=>t+1).map(e=>(0,r.jsx)(i.$,{onClick:()=>Q(e),variant:P===e?"default":"outline",size:"sm",disabled:I,className:"w-10 h-10",children:e},e))}),(0,r.jsx)(i.$,{onClick:()=>Q(P+1),disabled:P===Math.ceil(L/10)||I,variant:"outline",size:"sm",children:"Next"})]}),I&&(0,r.jsx)("div",{className:"space-y-10",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)("div",{className:"p-8 bg-white dark:bg-gray-800/50 rounded-2xl border border-slate-200/50 dark:border-gray-700 animate-pulse",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-4 mb-6",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-xl"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"h-5 bg-gray-300 dark:bg-gray-600 rounded mb-3"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"h-6 w-16 bg-gray-300 dark:bg-gray-600 rounded-full"}),(0,r.jsx)("div",{className:"h-6 w-20 bg-gray-300 dark:bg-gray-600 rounded-full"})]})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-xl border-2 border-slate-200 dark:border-slate-600",children:[(0,r.jsx)("div",{className:"w-5 h-5 bg-gray-300 dark:bg-gray-600 rounded"}),(0,r.jsx)("div",{className:"flex-1 h-4 bg-gray-300 dark:bg-gray-600 rounded"})]},t))})]},`skeleton-${t}`))}),(0,r.jsxs)("div",{className:"flex justify-center space-x-6",children:[(0,r.jsx)(b(),{href:"/dashboard?tab=quizzes",children:(0,r.jsx)(i.$,{variant:"outline",size:"lg",className:"px-10 py-4 text-lg border-2 border-slate-300 hover:border-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all duration-200 rounded-xl font-medium",children:"Cancel"})}),(0,r.jsx)(i.$,{onClick:K,size:"lg",className:"px-10 py-4 text-lg bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white hover:shadow-xl transition-all duration-200 rounded-xl font-semibold",children:"Submit Assessment"})]})]})]})})]})})}}}]);